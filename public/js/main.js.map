{"version":3,"sources":["webpack:///./src/config.js","webpack:///./src/core/BaseThree.js","webpack:///./src/core/camera.js","webpack:///./src/core/light.js","webpack:///./src/core/orbitControls.js","webpack:///./src/core/renderer.js","webpack:///./src/core/router.js","webpack:///./src/core/sky.js","webpack:///./src/loaders/fbx/FBXLoader.js","webpack:///./src/loaders/fbx/NURBSCurve.js","webpack:///./src/loaders/fbx/NURBSUtils.js","webpack:///./src/loaders/fbx/TGALoader.js","webpack:///./src/loaders/fbx/fbx.js","webpack:///./src/loaders/fbx/inflate.module.min.js","webpack:///./src/loaders/obj/obj.js","webpack:///./src/loaders/stl/STLLoader.js","webpack:///./src/loaders/stl/stl.js","webpack:///./src/main.js","webpack:///./src/utils/datGUI.js","webpack:///./src/utils/detector.js"],"names":["isDev","dpr","obj","globalScale","group_road_1","path","level","group_shop_1","group_parking_1","group_charging_pile_1","group_build_out_1","childName","group_villa_1","group_camera_1","group_round_camera_1","group_barrier_gate_obj","group_barrier_gate_fbx","group_sign_1","RFID_1","water_obj","building","scale","floor","stl2","fog","color","near","camera","fov","far","aspect","posX","posY","posZ","controls","autoRotate","autoRotateSpeed","rotateSpeed","zoomSpeed","minDistance","maxDistance","minPolarAngle","Math","PI","maxPolarAngle","minAzimuthAngle","Infinity","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","target","x","y","z","ambientLight","enabled","spotLight","helperEnabled","indensity","position","angle","penumbra","decay","distance","canShowObjName","canLoadChildName","__ENV__","Config","BaseThree","container","initRouter","initScene","initLight","initRenderer","initCamera","initSky","initControl","initRaycaster","initAxis","stats","Stats","clock","THREE","render","window","__HMF__","object","set","scene","add","router","Router","sky","Sky","setScalar","sunSphere","visible","effectController","turbidity","rayleigh","mieCoefficient","mieDirectionalG","luminance","inclination","azimuth","sun","that","guiChanged","uniforms","material","value","theta","phi","cos","sin","copy","renderer","threeCamera","stl","STL","load","then","console","log","orbitControls","OrbitControls","threeControls","Camera","threeRenderer","Renderer","light","Light","lights","forEach","place","raycaster","config","OBJ","FBX","show","traverse","child","type","userData","querySelector","style","display","layer","open","content","title","offset","id","anim","shade","hideOrShowAllObj","event","mouse","clientX","innerWidth","clientY","innerHeight","setFromCamera","intersectObjects","children","name","some","item","startsWith","DatGUI","document","body","appendChild","domElement","isMesh","castShadow","receiveShadow","point","halfWidth","halfHeight","vector1","project","cameraPosition","ambientLightColor","reset","targetPosition","i","TWEEN","Tween","to","easing","Easing","Quadratic","Out","delay","start","targetScale","time","getDelta","key","hasOwnProperty","element","instance","update","requestAnimationFrame","bind","width","height","updateSize","addEventListener","updateProjectionMatrix","init","spotLightHelper","lightName","MOUSE","LEFT","MIDDLE","RIGHT","OrbitConstraint","Vector3","minZoom","maxZoom","scope","EPS","phiDelta","thetaDelta","panOffset","zoomChanged","getPolarAngle","getAzimuthalAngle","rotateLeft","rotateUp","panLeft","v","te","matrix","elements","multiplyScalar","panUp","pan","deltaX","deltaY","screenWidth","screenHeight","PerspectiveCamera","clone","sub","targetDistance","length","tan","OrthographicCamera","right","left","top","bottom","warn","dollyIn","dollyScale","zoom","max","min","dollyOut","quat","Quaternion","setFromUnitVectors","up","quatInverse","inverse","lastPosition","lastQuaternion","applyQuaternion","atan2","sqrt","radius","lookAt","distanceToSquared","dot","quaternion","constraint","undefined","Object","defineProperty","get","center","enableRotate","enablePan","keyPanSpeed","enableKeys","keys","UP","BOTTOM","mouseButtons","ORBIT","ZOOM","PAN","rotateStart","Vector2","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","STATE","NONE","ROTATE","DOLLY","TOUCH_ROTATE","TOUCH_DOLLY","TOUCH_PAN","state","target0","position0","zoom0","changeEvent","startEvent","endEvent","clientWidth","clientHeight","getAutoRotationAngle","dispatchEvent","getZoomScale","pow","onMouseDown","preventDefault","button","onMouseMove","onMouseUp","subVectors","removeEventListener","onMouseWheel","stopPropagation","delta","wheelDelta","detail","onKeyDown","keyCode","touchstart","touches","pageX","pageY","dx","dy","touchmove","touchend","contextmenu","dispose","prototype","create","EventDispatcher","constructor","defineProperties","noZoom","noRotate","noPan","noKeys","staticMoving","dynamicDampingFactor","antialias","setClearColor","setPixelRatio","devicePixelRatio","shadowMap","maxAnisotropy","getMaxAnisotropy","setSize","offsetWidth","offsetHeight","route","current","parent","stack","isRepeated","push","pop","shader","SkyShader","ShaderMaterial","fragmentShader","vertexShader","UniformsUtils","side","BackSide","Mesh","call","BoxBufferGeometry","sunPosition","join","FBXLoader","fbxTree","connections","sceneGraph","manager","DefaultLoadingManager","crossOrigin","url","onLoad","onProgress","onError","self","LoaderUtils","extractUrlBase","loader","FileLoader","setPath","setResponseType","buffer","parse","error","setTimeout","itemError","setResourcePath","resourcePath","setCrossOrigin","FBXBuffer","isFbxFormatBinary","BinaryParser","FBXText","convertArrayBufferToString","isFbxFormatASCII","Error","getFbxVersion","TextParser","textureLoader","TextureLoader","FBXTreeParser","parseConnections","images","parseImages","textures","parseTextures","materials","parseMaterials","deformers","parseDeformers","geometryMap","GeometryParser","parseScene","connectionMap","Map","rawConnections","Connections","rawConnection","fromID","toID","relationship","has","parents","parentRelationship","ID","childRelationship","blobs","Objects","videoNodes","Video","nodeID","videoNode","parseInt","RelativeFilename","Filename","arrayBufferContent","Content","ArrayBuffer","byteLength","base64Content","image","parseImage","filename","split","fileName","extension","slice","lastIndexOf","toLowerCase","TGALoader","Loader","Handlers","tgaLoader","array","Uint8Array","URL","createObjectURL","Blob","textureMap","textureNodes","Texture","texture","parseTexture","textureNode","loadTexture","attrName","wrapModeU","WrapModeU","wrapModeV","WrapModeV","valueU","valueV","wrapS","RepeatWrapping","ClampToEdgeWrapping","wrapT","values","Scaling","repeat","currentPath","indexOf","FileName","materialMap","materialNodes","Material","parseMaterial","materialNode","ShadingModel","parameters","parseParameters","MeshPhongMaterial","MeshLambertMaterial","setValues","BumpFactor","bumpScale","Diffuse","Color","fromArray","DiffuseColor","DisplacementFactor","displacementScale","Emissive","emissive","EmissiveColor","EmissiveFactor","emissiveIntensity","parseFloat","Opacity","opacity","transparent","ReflectionFactor","reflectivity","Shininess","shininess","Specular","specular","SpecularColor","bumpMap","getTexture","aoMap","map","displacementMap","emissiveMap","normalMap","envMap","mapping","EquirectangularReflectionMapping","specularMap","alphaMap","LayeredTexture","skeletons","morphTargets","DeformerNodes","Deformer","deformerNode","relationships","attrType","skeleton","parseSkeleton","geometryID","morphTarget","rawTargets","parseMorphTargets","deformerNodes","rawBones","boneNode","rawBone","indices","weights","transformLink","Matrix4","TransformLink","a","Indexes","Weights","bones","rawMorphTargets","morphTargetNode","rawMorphTarget","initialWeight","DeformPercent","fullWeights","FullWeights","geoID","filter","Group","modelMap","parseModels","modelNodes","Model","model","modelNode","setLookAtProperties","parentConnections","connection","bindSkeleton","createAmbientLight","setupMorphMaterials","node","transformData","parentMatrixWorld","transform","generateTransform","applyMatrix","animations","AnimationParser","isGroup","buildSkeleton","createCamera","createLight","createMesh","createCurve","Bone","PropertyBinding","sanitizeNodeName","getTransformData","bone","subBone","matrixWorld","cameraAttribute","attr","NodeAttribute","Object3D","CameraProjectionType","nearClippingPlane","NearPlane","farClippingPlane","FarPlane","AspectWidth","AspectHeight","FieldOfView","focalLength","FocalLength","setFocalLength","lightAttribute","LightType","intensity","Intensity","CastLightOnObject","FarAttenuationEnd","EnableFarAttenuation","PointLight","DirectionalLight","InnerAngle","_Math","degToRad","OuterAngle","SpotLight","CastShadows","geometry","attributes","vertexColors","VertexColors","FBX_Deformer","skinning","SkinnedMesh","normalizeSkinWeights","reduce","geo","LineBasicMaterial","linewidth","Line","inheritType","InheritType","eulerOrder","getEulerOrder","RotationOrder","translation","Lcl_Translation","preRotation","PreRotation","rotation","Lcl_Rotation","postRotation","PostRotation","Lcl_Scaling","scalingOffset","ScalingOffset","scalingPivot","ScalingPivot","rotationOffset","RotationOffset","rotationPivot","RotationPivot","lookAtTarget","pos","bindMatrices","parsePoseNodes","geoRelationships","geoConnParent","Skeleton","BindPoseNode","Pose","poseNodes","PoseNode","Array","isArray","poseNode","Node","Matrix","GlobalSettings","ambientColor","AmbientColor","r","g","b","AmbientLight","morphAttributes","setupMorphMaterial","index","uuid","matUuid","sharedMat","mat","clonedMat","geoNodes","Geometry","parseGeometry","geoNode","parseMeshGeometry","parseNurbsGeometry","GeometricTranslation","GeometricRotation","GeometricScaling","genGeometry","preTransform","BufferGeometry","geoInfo","parseGeoNode","buffers","genBuffers","positionAttribute","Float32BufferAttribute","vertex","applyToBufferAttribute","addAttribute","colors","Uint16BufferAttribute","weightsIndices","vertexWeights","normal","normalAttribute","normalMatrix","Matrix3","getNormalMatrix","uvs","uvBuffer","toString","mappingType","prevMaterialIndex","materialIndex","startIndex","currentIndex","addGroup","groups","lastGroup","lastIndex","count","addMorphTargets","vertexPositions","Vertices","vertexIndices","PolygonVertexIndex","LayerElementColor","parseVertexColors","LayerElementMaterial","parseMaterialIndices","LayerElementNormal","parseNormals","LayerElementUV","uv","parseUVs","weightTable","j","weight","polygonIndex","faceLength","displayedWeightsWarning","facePositionIndexes","faceNormals","faceColors","faceUVs","faceWeights","faceWeightIndices","vertexIndex","polygonVertexIndex","endOfFace","weightIndices","data","getData","wt","wIndex","Weight","weightIndex","currentWeight","comparedWeight","comparedWeightIndex","comparedWeightArray","tmp","genFace","parentGeo","parentGeoNode","rawTarget","morphGeoNode","genMorphGeometry","morphGeo","morphPositions","morphIndex","morphGeoInfo","morphBuffers","NormalNode","MappingInformationType","referenceType","ReferenceInformationType","Normals","indexBuffer","NormalIndex","NormalsIndex","dataSize","UVNode","UV","UVIndex","ColorNode","Colors","ColorIndex","MaterialNode","materialIndexBuffer","Materials","materialIndices","NURBSCurve","order","Order","isNaN","degree","knots","KnotVector","controlPoints","pointsValues","Points","l","Vector4","startKnot","endKnot","Form","curve","vertices","getPoints","positions","Float32Array","toArray","BufferAttribute","animationClips","rawClips","parseClips","rawClip","clip","addClip","AnimationCurve","curveNodesMap","parseAnimationCurveNodes","parseAnimationCurves","layersMap","parseAnimationLayers","parseAnimStacks","rawCurveNodes","AnimationCurveNode","rawCurveNode","match","curveNode","curves","rawCurves","animationCurve","times","KeyTime","convertFBXTimeToSeconds","KeyValueFloat","animationCurveID","animationCurveRelationship","rawLayers","AnimationLayer","layerCurveNodes","modelID","rawModel","modelName","initialPosition","initialRotation","initialScale","morph","deformerID","morpherID","morphName","rawStacks","AnimationStack","tracks","rawTracks","concat","generateTracks","AnimationClip","decompose","Euler","setFromQuaternion","T","positionTrack","generateVectorTrack","R","rotationTrack","generateRotationTrack","S","scaleTrack","morphTrack","generateMorphTrack","initialValue","getTimesForAllAxes","getKeyframeTrackValues","VectorKeyframeTrack","interpolateRotations","setFromEuler","euler","quaternionValues","premultiply","multiply","QuaternionKeyframeTrack","val","morphNum","getObjectByName","morphTargetDictionary","NumberKeyframeTrack","sort","elem","prevValue","xIndex","yIndex","zIndex","xValue","yValue","zValue","valuesSpan","absoluteSpan","abs","numSubIntervals","step","nextValue","initialTime","timeSpan","interval","nextTime","interpolatedTimes","interpolatedValues","inject","getPrevNode","nodeStack","currentIndent","getCurrentNode","getCurrentProp","currentProp","pushStack","popStack","setCurrentProp","currentPropName","text","allNodes","FBXTree","line","matchComment","matchEmpty","matchBeginning","matchProperty","matchEnd","parseNodeBegin","parseNodeProperty","parseNodePropertyContinued","property","nodeName","trim","replace","nodeAttrs","attrs","parseNodeAttr","currentNode","contentLine","propName","propValue","parentName","parseNodeSpecialProperty","connProps","from","rest","append","parseNumberArray","props","prop","innerPropName","innerPropType1","innerPropType2","innerPropFlag","innerPropValue","type2","flag","reader","BinaryReader","skip","version","getUint32","endOfContent","parseNode","size","getOffset","endOffset","getUint64","numProperties","propertyListLen","nameLen","getUint8","getString","propertyList","parseProperty","singleProperty","subNode","parseSubNode","getBoolean","getFloat64","getFloat32","getInt32","getInt64","getArrayBuffer","getInt16","arrayLength","encoding","compressedLength","getBooleanArray","getFloat64Array","getFloat32Array","getInt32Array","getInt64Array","Zlib","inflate","Inflate","reader2","decompress","littleEndian","dv","DataView","low","high","nullByte","decodeText","CORRECT","cursor","read","result","num","versionRegExp","dataArray","infoObject","tempEuler","tempVec","lTranslationM","lPreRotationM","lRotationM","lPostRotationM","lScalingM","lScalingPivotM","lScalingOffsetM","lRotationOffsetM","lRotationPivotM","lParentGX","lGlobalT","setPosition","makeRotationFromEuler","lLRM","lParentGRM","extractRotation","lParentTM","lLSM","lParentGSM","lParentGRSM","copyPosition","getInverse","lGlobalRS","lParentLSM","lParentGSM_noLocal","lTransform","lLocalTWithAllPivotAndOffsetInfo","lGlobalTranslation","enums","a1","a2","Curve","w","getPoint","t","u","hpoint","NURBSUtils","calcBSplinePoint","divideScalar","getTangent","ders","calcNURBSDerivatives","tangent","normalize","findSpan","p","U","n","mid","calcBasisFunctions","span","N","saved","rv","lv","temp","P","C","Nj","wNj","calcBasisFunctionDerivatives","zeroArr","ndu","s1","s2","k","d","rk","pk","j1","j2","calcBSplineDerivatives","nd","du","CK","nders","Pw","calcKoverI","nom","denom","calcRationalCurveDerivatives","Pders","Aders","wders","calcSurfacePoint","q","V","uspan","vspan","Nu","Nv","Sw","needsUpdate","tgaCheckHeader","header","image_type","TGA_TYPE_INDEXED","TGA_TYPE_RLE_INDEXED","colormap_length","colormap_size","colormap_type","TGA_TYPE_RGB","TGA_TYPE_GREY","TGA_TYPE_RLE_RGB","TGA_TYPE_RLE_GREY","TGA_TYPE_NO_DATA","pixel_size","tgaParse","use_rle","use_pal","pixel_data","pixel_total","palettes","subarray","c","shift","pixels","tgaGetImageData8bits","imageData","y_start","y_step","y_end","x_start","x_step","x_end","colormap","tgaGetImageData16bits","tgaGetImageData24bits","tgaGetImageData32bits","tgaGetImageDataGrey8bits","tgaGetImageDataGrey16bits","getTgaRGBA","palette","flags","TGA_ORIGIN_MASK","TGA_ORIGIN_SHIFT","TGA_ORIGIN_UL","TGA_ORIGIN_BL","TGA_ORIGIN_UR","TGA_ORIGIN_BR","use_grey","id_length","colormap_index","origin","useOffscreen","OffscreenCanvas","canvas","createElement","context","getContext","createImageData","rgbaData","putImageData","transferToImageBitmap","app","Promise","res","setCastShadowAndReceiveShadow","mixer","clipAction","play","mod","aa","execScript","e","Uint16Array","Uint32Array","Number","POSITIVE_INFINITY","f","h","m","s","input","bufferSize","bufferType","resize","A","B","ba","ca","D","M","F","E","G","H","I","J","K","L","da","ea","O","fa","Q","ga","o","W","verify","ha","method","charCodeAt","X","ADAPTIVE","BLOCK","Y","Z","$","ia","objLoader","OBJLoader","mtlLoader","MTLLoader","setTexturePath","substring","setMaterials","xhr","lengthComputable","percentComplete","loaded","total","innerHTML","toFixed","STLLoader","exception","isBinary","expect","face_size","n_faces","solid","off","matchDataViewAt","query","il","parseBinary","faces","hasColors","defaultR","defaultG","defaultB","alpha","dataOffset","normals","face","normalX","normalY","normalZ","packedColor","getUint16","vertexstart","parseASCII","patternFace","faceCounter","patternFloat","source","patternVertex","RegExp","patternNormal","exec","vertexCountPerFace","normalCountPerFace","ensureString","ensureBinary","array_buffer","binData","mesh","Main","initEvent","loadAllObjs","timer","targetObj","getFirstIntersectObj","canShowInfoPanel","end","clearTimeout","targetObjName","canLoadChild","parentRoute","getLastChild","togglerLoading","loadObj","modifyEnviroment","enterObj","showObjInfo","which","popRoute","showObjByLevel","positionAnimate","cloneObj","showMessage","initGUI","scaleAnimate","loadFbx","cloneObj2","Detector","webgl","alert","getElementById","main","gui","dat","GUI","build","cameraFolder","addFolder","cameraFOVGui","onChange","onFinishChange","cameraAspectGui","cameraFogColorGui","addColor","setHex","cameraFogNearGui","density","controlsFolder","controlsAutoRotateSpeedGui","ambientLightFolder","spotLightFolder","WebGLRenderingContext"],"mappings":"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","file":"main.js","sourcesContent":["// This object contains the state of the app\r\nexport default {\r\n  isDev: false,\r\n  dpr: 1,\r\n  obj: {\r\n    globalScale: 0.2,\r\n    // \r\n    group_road_1: {\r\n      path: '/3d/one/group_road_1/group_road_1',\r\n      level: 'one'\r\n    },\r\n    group_shop_1: {\r\n      path: '/3d/one/group_shop_1/group_shop_1',\r\n      level: 'one'\r\n    },\r\n    group_parking_1: {\r\n      path: '/3d/one/group_parking_1/group_parking_1',\r\n      level: 'one'\r\n    },\r\n    group_charging_pile_1: {\r\n      path: '/3d/one/group_charging_pile_1/group_charging_pile_1',\r\n      level: 'one'\r\n    },\r\n    group_build_out_1: {\r\n      path: '/3d/one/group_build_out_1/group_build_out_1',\r\n      level: 'one',\r\n      childName: 'building'\r\n    },\r\n    group_villa_1: {\r\n      path: '/3d/one/group_villa_1/group_villa_1',\r\n      level: 'one'\r\n    },\r\n    group_camera_1: {\r\n      path: '/3d/one/group_camera_1/group_camera_1',\r\n      level: 'one'\r\n    },\r\n    group_round_camera_1: {\r\n      path: '/3d/one/group_round_camera_1/group_round_camera_1',\r\n      level: 'one'\r\n    },\r\n    group_barrier_gate_obj: {\r\n      path: '/3d/one/group_barrier_gate_obj/barrier_gate_obj_1',\r\n      level: 'one'\r\n    },\r\n    group_barrier_gate_fbx: {\r\n      path: '/3d/one/group_barrier_gate_fbx/barrier_gate_fbx_1.FBX',\r\n      level: 'one'\r\n    },\r\n    group_sign_1: {\r\n      path: '/3d/one/group_sign_1/group_sign_1',\r\n      level: 'one'\r\n    },\r\n    RFID_1: {\r\n      path: '/3d/one/RFID_1/RFID_1',\r\n      level: 'one'\r\n    },\r\n    water_obj: {\r\n      path: '/3d/one/water_obj/water_obj',\r\n      level: 'one'\r\n    },\r\n    // \r\n    building: {\r\n      path: '/3d/two/building_in/building_in',\r\n      childName: 'floor',\r\n      level: 'two',\r\n      scale: 0.5\r\n    },\r\n    // \r\n    floor: {\r\n      path: '/3d/three/floor/single_floor',\r\n      level: 'three',\r\n      scale: 2\r\n    },\r\n    // \r\n    stl2: {\r\n      path: '/3d/main.STL'\r\n    }\r\n  },\r\n  fog: {\r\n    color: 0xffffff,\r\n    near: 0.0008\r\n  },\r\n  camera: {\r\n    fov: 40,\r\n    near: 0.1,\r\n    far: 1000,\r\n    aspect: 1,\r\n    posX: 0,\r\n    posY: 100,\r\n    posZ: 500\r\n  },\r\n  controls: {\r\n    autoRotate: false,\r\n    autoRotateSpeed: -0.5,\r\n    rotateSpeed: 0.5,\r\n    zoomSpeed: 0.8,\r\n    minDistance: 10,\r\n    maxDistance: 600,\r\n    minPolarAngle: Math.PI / 5,\r\n    maxPolarAngle: Math.PI / 2,\r\n    minAzimuthAngle: -Infinity,\r\n    maxAzimuthAngle: Infinity,\r\n    enableDamping: true,\r\n    dampingFactor: 0.5,\r\n    enableZoom: true,\r\n    target: {\r\n      x: 0,\r\n      y: 0,\r\n      z: 0\r\n    }\r\n  },\r\n  ambientLight: {\r\n    enabled: true,\r\n    color: 0x412e2e\r\n  },\r\n  spotLight: {\r\n    enabled: true,\r\n    helperEnabled: false,\r\n    color: 0xffffff,\r\n    indensity: 2,\r\n    position: {\r\n      x: 0,\r\n      y: 400,\r\n      z: -400\r\n    },\r\n    angle: 104.05,\r\n    penumbra: 0.05,\r\n    decay: 2,\r\n    distance: 100000000\r\n  }\r\n}\r\n","import * as THREE from 'three'\nimport TWEEN from 'tween.js'\n\nimport Renderer from './renderer' // (paintshadowresizedpr)\nimport Camera from './camera' // (initresizeposition change)\nimport Light from './light' // ()\nimport OrbitControls from './orbitControls'\nimport { Sky } from './sky'\nimport Router from './router'\nimport FBX from '../loaders/fbx/fbx'\nimport STL from '../loaders/stl/stl'\nimport OBJ from '../loaders/obj/obj'\n\n// \nimport DatGUI from '../utils/datGUI'\n\n// \nimport Config from '../config'\n\nconst canShowObjName = [\n  'building', // \n  'villa', // \n  'floor_common', // \n  'room', //\n  'parking', // \n  'barrier_gate_out', // \n  'barrier_gate_in', // \n  'charging_pile', // \n  'camera', // \n  'access_control_machine' // \n]\n\nconst canLoadChildName = [\n  'building', // \n  'floor' // \n]\n\n__ENV__ === 'dev' && (Config.isDev = true)\n\nexport default class BaseThree {\n  constructor(container) {\n    this.container = container\n    this.initRouter()\n    this.initScene()\n    this.initLight()\n    this.initRenderer()\n    this.initCamera()\n    this.initSky()\n    // this.initSTL()\n    this.initControl()\n    this.initRaycaster()\n    Config.isDev && this.initAxis()\n    Config.isDev && (this.stats = new Stats())\n    this.clock = new THREE.Clock()\n    this.render()\n    window.__HMF__ = {} // \n  }\n\n  initAxis() {\n    // \n    var object = new THREE.AxesHelper(300)\n    object.position.set(0, 0, 0)\n    this.scene.add(object)\n  }\n\n  initRouter() {\n    this.router = new Router()\n  }\n\n  initScene() {\n    this.scene = new THREE.Scene()\n    this.scene.fog = new THREE.FogExp2(Config.fog.color, Config.fog.near)\n  }\n  initSky() {\n    // Add Sky\n    const sky = new Sky()\n    sky.scale.setScalar(450000)\n    this.scene.add(sky)\n\n    // Add Sun Helper\n    let sunSphere\n    sunSphere = new THREE.Mesh(\n      new THREE.SphereBufferGeometry(20000, 16, 8),\n      new THREE.MeshBasicMaterial({\n        color: 0xffffff\n      })\n    )\n    sunSphere.position.y = -700000\n    sunSphere.visible = false\n    this.scene.add(sunSphere)\n\n    /// GUI\n\n    var effectController = {\n      turbidity: 10,\n      rayleigh: 2,\n      mieCoefficient: 0.005,\n      mieDirectionalG: 0.8,\n      luminance: 1,\n      inclination: 0.49, // elevation / inclination\n      azimuth: 0.25, // Facing front,\n      sun: !true\n    }\n\n    var distance = 400000\n    const that = this\n\n    function guiChanged() {\n      var uniforms = sky.material.uniforms\n      uniforms['turbidity'].value = effectController.turbidity\n      uniforms['rayleigh'].value = effectController.rayleigh\n      uniforms['luminance'].value = effectController.luminance\n      uniforms['mieCoefficient'].value = effectController.mieCoefficient\n      uniforms['mieDirectionalG'].value = effectController.mieDirectionalG\n\n      var theta = Math.PI * (effectController.inclination - 0.5)\n      var phi = 2 * Math.PI * (effectController.azimuth - 0.5)\n\n      sunSphere.position.x = distance * Math.cos(phi)\n      sunSphere.position.y = distance * Math.sin(phi) * Math.sin(theta)\n      sunSphere.position.z = distance * Math.sin(phi) * Math.cos(theta)\n\n      sunSphere.visible = effectController.sun\n\n      uniforms['sunPosition'].value.copy(sunSphere.position)\n\n      that.renderer.render(that.scene, that.camera.threeCamera)\n    }\n\n    guiChanged()\n  }\n\n  initSTL() {\n    const path = Config.obj.stl2.path\n    this.stl = new STL(this.scene)\n    this.stl.load(path).then(obj => console.log('object', obj))\n  }\n\n  initControl() {\n    const orbitControls = new OrbitControls(THREE)\n    this.threeControls = new orbitControls(this.camera.threeCamera, this.container)\n    this.threeControls.target.set(Config.controls.target.x, Config.controls.target.y, Config.controls.target.z)\n    this.threeControls.autoRotate = Config.controls.autoRotate\n    this.threeControls.autoRotateSpeed = Config.controls.autoRotateSpeed\n    this.threeControls.rotateSpeed = Config.controls.rotateSpeed\n    this.threeControls.zoomSpeed = Config.controls.zoomSpeed\n    this.threeControls.minDistance = Config.controls.minDistance\n    this.threeControls.maxDistance = Config.controls.maxDistance\n    this.threeControls.minPolarAngle = Config.controls.minPolarAngle\n    this.threeControls.maxPolarAngle = Config.controls.maxPolarAngle\n    this.threeControls.enableDamping = Config.controls.enableDamping\n    this.threeControls.enableZoom = Config.controls.enableZoom\n    this.threeControls.dampingFactor = Config.controls.dampingFactor\n  }\n\n  initCamera() {\n    this.camera = new Camera(this.renderer.threeRenderer)\n  }\n  initRenderer() {\n    this.renderer = new Renderer(this.scene, this.container)\n  }\n  initLight() {\n    this.light = new Light(this.scene)\n    const lights = ['ambient', 'spot']\n    lights.forEach(light => this.light.place(light))\n  }\n  initRaycaster() {\n    this.raycaster = new THREE.Raycaster()\n  }\n  loadObj(config) {\n    const { path, scale, level } = config\n    return new OBJ(this).load(path, scale, level)\n  }\n  loadFbx(config) {\n    const { path } = config\n    return new FBX(this).load(path)\n  }\n  hideOrShowAllObj(show, level) {\n    this.scene.traverse(child => {\n      if (child.type === 'Group') {\n        if (show) {\n          child.visible = child.userData.level === level\n        } else {\n          child.visible = false\n        }\n      }\n    })\n  }\n  togglerLoading(\n    obj = {\n      show: false\n    }\n  ) {\n    if (obj.show) {\n      this.container.querySelector('#loading').style.display = 'block'\n    } else {\n      this.container.querySelector('#loading').style.display = 'none'\n    }\n  }\n  showMessage() {\n    layer.open({\n      content: `1;<br>\n      2;<br>\n      3;`,\n      title: '',\n      offset: 'rt',\n      id: 1,\n      anim: 5,\n      shade: 0\n    })\n  }\n  showObjByLevel(level) {\n    this.hideOrShowAllObj(false)\n    this.hideOrShowAllObj(true, level)\n  }\n  getFirstIntersectObj(event) {\n    if (!event) {\n      return\n    }\n    //raycaster-11.\n    const mouse = new THREE.Vector2()\n    mouse.x = (event.clientX / window.innerWidth) * 2 - 1\n    mouse.y = -(event.clientY / window.innerHeight) * 2 + 1\n    // raycaster\n    this.raycaster.setFromCamera(mouse, this.camera.threeCamera)\n    // raycaster\n    return this.raycaster.intersectObjects(this.scene.children, true)[0]\n  }\n  canShowInfoPanel(name) {\n    return canShowObjName.some(item => name.startsWith(item))\n  }\n  canLoadChild(name) {\n    return canLoadChildName.some(item => name.startsWith(item))\n  }\n  initGUI(obj) {\n    new DatGUI(this, obj) // GUI\n    document.body.appendChild(this.stats.domElement) // \n  }\n  //\n  setCastShadowAndReceiveShadow(obj) {\n    obj.traverse(function(child) {\n      if (child.isMesh) {\n        child.castShadow = true\n        child.receiveShadow = true\n      }\n    })\n  }\n  getLocalPosition(point) {\n    //\n    const halfWidth = window.innerWidth / 2\n    const halfHeight = window.innerHeight / 2\n    const vector1 = point.project(this.camera.threeCamera)\n    return [vector1.x * halfWidth + halfWidth, -vector1.y * halfHeight + halfHeight]\n  }\n  modifyEnviroment({ cameraPosition, ambientLightColor, reset = false }) {\n    if (reset) {\n      this.camera.threeCamera.position.set(Config.camera.posX, Config.camera.posY, Config.camera.posZ)\n      this.light.ambientLight.color.set(Config.ambientLight.color)\n    } else {\n      this.camera.threeCamera.position.set(...cameraPosition)\n      this.light.ambientLight.color.set(ambientLightColor)\n    }\n  }\n  positionAnimate(obj, targetPosition, i) {\n    new TWEEN.Tween(obj.position)\n      .to(\n        {\n          x: targetPosition[0],\n          y: targetPosition[1],\n          z: targetPosition[2]\n        },\n        2000\n      )\n      .easing(TWEEN.Easing.Quadratic.Out)\n      .delay(200 * i + 1500)\n      .start()\n  }\n  scaleAnimate(obj, targetScale, i) {\n    new TWEEN.Tween(obj.scale)\n      .to(\n        {\n          x: targetScale[0],\n          y: targetScale[1],\n          z: targetScale[2]\n        },\n        2000\n      )\n      .easing(TWEEN.Easing.Quadratic.Out)\n      .delay(200 * i)\n      .start()\n  }\n  render() {\n    var time = this.clock.getDelta()\n    for (const key in window.__HMF__) {\n      if (window.__HMF__.hasOwnProperty(key)) {\n        const element = window.__HMF__[key]\n        element.instance && element.instance.update(time)\n      }\n    }\n    TWEEN.update()\n    Config.isDev && this.threeControls.update()\n    Config.isDev && this.stats.update()\n    this.renderer.render(this.scene, this.camera.threeCamera)\n    requestAnimationFrame(this.render.bind(this))\n  }\n}\n","import * as THREE from 'three'\r\n\r\nimport Config from '../config'\r\n\r\n// Class that creates and updates the main camera\r\nexport default class Camera {\r\n  constructor(renderer) {\r\n    const width = renderer.domElement.width\r\n    const height = renderer.domElement.height\r\n\r\n    // Create and position a Perspective Camera\r\n    this.threeCamera = new THREE.PerspectiveCamera(\r\n      Config.camera.fov,\r\n      width / height,\r\n      Config.camera.near,\r\n      Config.camera.far\r\n    )\r\n    this.threeCamera.position.set(Config.camera.posX, Config.camera.posY, Config.camera.posZ)\r\n\r\n    // Initial sizing\r\n    this.updateSize(renderer)\r\n\r\n    // Listeners\r\n    window.addEventListener('resize', () => this.updateSize(renderer), false)\r\n  }\r\n\r\n  updateSize(renderer) {\r\n    // Update camera aspect ratio with window aspect ratio\r\n    this.threeCamera.aspect = renderer.domElement.width / renderer.domElement.height\r\n\r\n    // Always call updateProjectionMatrix on camera change\r\n    this.threeCamera.updateProjectionMatrix()\r\n  }\r\n}\r\n","import * as THREE from 'three'\n\nimport Config from '../config'\n\n// Sets up and places all lights in scene\nexport default class Light {\n  constructor(scene) {\n    this.scene = scene\n    this.init()\n  }\n\n  init() {\n    // Ambient\n    this.ambientLight = new THREE.AmbientLight(Config.ambientLight.color)\n    this.ambientLight.visible = Config.ambientLight.enabled\n\n    // SpotLight\n    const {\n      spotLight: {\n        color,\n        indensity,\n        position: { x, y, z },\n        angle,\n        distance,\n        enabled,\n        helperEnabled,\n        penumbra\n      }\n    } = Config\n    this.spotLight = new THREE.SpotLight(color, indensity)\n    this.spotLight.position.set(x, y, z)\n    this.spotLight.angle = angle\n    this.spotLight.penumbra = penumbra\n    this.spotLight.decay = 2\n    this.spotLight.distance = distance\n    this.spotLight.castShadow = enabled\n    this.spotLightHelper = new THREE.SpotLightHelper(this.spotLight)\n    this.spotLightHelper.visible = helperEnabled\n  }\n\n  place(lightName) {\n    switch (lightName) {\n      case 'ambient':\n        this.scene.add(this.ambientLight)\n        break\n      case 'spot':\n        this.scene.add(this.spotLight)\n        this.scene.add(this.spotLightHelper)\n        break\n    }\n  }\n}\n","export default function(THREE) {\n  var MOUSE = THREE.MOUSE\n  if (!MOUSE)\n    MOUSE = {\n      LEFT: 0,\n      MIDDLE: 1,\n      RIGHT: 2\n    }\n\n  /**\n   * @author qiao / https://github.com/qiao\n   * @author mrdoob / http://mrdoob.com\n   * @author alteredq / http://alteredqualia.com/\n   * @author WestLangley / http://github.com/WestLangley\n   * @author erich666 / http://erichaines.com\n   */\n  /*global THREE, console */\n\n  function OrbitConstraint(object) {\n    this.object = object\n\n    // \"target\" sets the location of focus, where the object orbits around\n    // and where it pans with respect to.\n    this.target = new THREE.Vector3()\n\n    // Limits to how far you can dolly in and out ( PerspectiveCamera only )\n    this.minDistance = 0\n    this.maxDistance = Infinity\n\n    // Limits to how far you can zoom in and out ( OrthographicCamera only )\n    this.minZoom = 0\n    this.maxZoom = Infinity\n\n    // How far you can orbit vertically, upper and lower limits.\n    // Range is 0 to Math.PI radians.\n    this.minPolarAngle = 0 // radians\n    this.maxPolarAngle = Math.PI // radians\n\n    // How far you can orbit horizontally, upper and lower limits.\n    // If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n    this.minAzimuthAngle = -Infinity // radians\n    this.maxAzimuthAngle = Infinity // radians\n\n    // Set to true to enable damping (inertia)\n    // If damping is enabled, you must call controls.update() in your animation loop\n    this.enableDamping = false\n    this.dampingFactor = 0.25\n\n    ////////////\n    // internals\n\n    var scope = this\n\n    var EPS = 0.000001\n\n    // Current position in spherical coordinate system.\n    var theta\n    var phi\n\n    // Pending changes\n    var phiDelta = 0\n    var thetaDelta = 0\n    var scale = 1\n    var panOffset = new THREE.Vector3()\n    var zoomChanged = false\n\n    // API\n\n    this.getPolarAngle = function() {\n      return phi\n    }\n\n    this.getAzimuthalAngle = function() {\n      return theta\n    }\n\n    this.rotateLeft = function(angle) {\n      thetaDelta -= angle\n    }\n\n    this.rotateUp = function(angle) {\n      phiDelta -= angle\n    }\n\n    // pass in distance in world space to move left\n    this.panLeft = (function() {\n      var v = new THREE.Vector3()\n\n      return function panLeft(distance) {\n        var te = this.object.matrix.elements\n\n        // get X column of matrix\n        v.set(te[0], te[1], te[2])\n        v.multiplyScalar(-distance)\n\n        panOffset.add(v)\n      }\n    })()\n\n    // pass in distance in world space to move up\n    this.panUp = (function() {\n      var v = new THREE.Vector3()\n\n      return function panUp(distance) {\n        var te = this.object.matrix.elements\n\n        // get Y column of matrix\n        v.set(te[4], te[5], te[6])\n        v.multiplyScalar(distance)\n\n        panOffset.add(v)\n      }\n    })()\n\n    // pass in x,y of change desired in pixel space,\n    // right and down are positive\n    this.pan = function(deltaX, deltaY, screenWidth, screenHeight) {\n      if (scope.object instanceof THREE.PerspectiveCamera) {\n        // perspective\n        var position = scope.object.position\n        var offset = position.clone().sub(scope.target)\n        var targetDistance = offset.length()\n\n        // half of the fov is center to top of screen\n        targetDistance *= Math.tan(((scope.object.fov / 2) * Math.PI) / 180.0)\n\n        // we actually don't use screenWidth, since perspective camera is fixed to screen height\n        scope.panLeft((2 * deltaX * targetDistance) / screenHeight)\n        scope.panUp((2 * deltaY * targetDistance) / screenHeight)\n      } else if (scope.object instanceof THREE.OrthographicCamera) {\n        // orthographic\n        scope.panLeft((deltaX * (scope.object.right - scope.object.left)) / screenWidth)\n        scope.panUp((deltaY * (scope.object.top - scope.object.bottom)) / screenHeight)\n      } else {\n        // camera neither orthographic or perspective\n        console.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.')\n      }\n    }\n\n    this.dollyIn = function(dollyScale) {\n      if (scope.object instanceof THREE.PerspectiveCamera) {\n        scale /= dollyScale\n      } else if (scope.object instanceof THREE.OrthographicCamera) {\n        scope.object.zoom = Math.max(this.minZoom, Math.min(this.maxZoom, this.object.zoom * dollyScale))\n        scope.object.updateProjectionMatrix()\n        zoomChanged = true\n      } else {\n        console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.')\n      }\n    }\n\n    this.dollyOut = function(dollyScale) {\n      if (scope.object instanceof THREE.PerspectiveCamera) {\n        scale *= dollyScale\n      } else if (scope.object instanceof THREE.OrthographicCamera) {\n        scope.object.zoom = Math.max(this.minZoom, Math.min(this.maxZoom, this.object.zoom / dollyScale))\n        scope.object.updateProjectionMatrix()\n        zoomChanged = true\n      } else {\n        console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.')\n      }\n    }\n\n    this.update = (function() {\n      var offset = new THREE.Vector3()\n\n      // so camera.up is the orbit axis\n      var quat = new THREE.Quaternion().setFromUnitVectors(object.up, new THREE.Vector3(0, 1, 0))\n      var quatInverse = quat.clone().inverse()\n\n      var lastPosition = new THREE.Vector3()\n      var lastQuaternion = new THREE.Quaternion()\n\n      return function() {\n        var position = this.object.position\n\n        offset.copy(position).sub(this.target)\n\n        // rotate offset to \"y-axis-is-up\" space\n        offset.applyQuaternion(quat)\n\n        // angle from z-axis around y-axis\n\n        theta = Math.atan2(offset.x, offset.z)\n\n        // angle from y-axis\n\n        phi = Math.atan2(Math.sqrt(offset.x * offset.x + offset.z * offset.z), offset.y)\n\n        theta += thetaDelta\n        phi += phiDelta\n\n        // restrict theta to be between desired limits\n        theta = Math.max(this.minAzimuthAngle, Math.min(this.maxAzimuthAngle, theta))\n\n        // restrict phi to be between desired limits\n        phi = Math.max(this.minPolarAngle, Math.min(this.maxPolarAngle, phi))\n\n        // restrict phi to be betwee EPS and PI-EPS\n        phi = Math.max(EPS, Math.min(Math.PI - EPS, phi))\n\n        var radius = offset.length() * scale\n\n        // restrict radius to be between desired limits\n        radius = Math.max(this.minDistance, Math.min(this.maxDistance, radius))\n\n        // move target to panned location\n        this.target.add(panOffset)\n\n        offset.x = radius * Math.sin(phi) * Math.sin(theta)\n        offset.y = radius * Math.cos(phi)\n        offset.z = radius * Math.sin(phi) * Math.cos(theta)\n\n        // rotate offset back to \"camera-up-vector-is-up\" space\n        offset.applyQuaternion(quatInverse)\n\n        position.copy(this.target).add(offset)\n\n        this.object.lookAt(this.target)\n\n        if (this.enableDamping === true) {\n          thetaDelta *= 1 - this.dampingFactor\n          phiDelta *= 1 - this.dampingFactor\n        } else {\n          thetaDelta = 0\n          phiDelta = 0\n        }\n\n        scale = 1\n        panOffset.set(0, 0, 0)\n\n        // update condition is:\n        // min(camera displacement, camera rotation in radians)^2 > EPS\n        // using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n        if (\n          zoomChanged ||\n          lastPosition.distanceToSquared(this.object.position) > EPS ||\n          8 * (1 - lastQuaternion.dot(this.object.quaternion)) > EPS\n        ) {\n          lastPosition.copy(this.object.position)\n          lastQuaternion.copy(this.object.quaternion)\n          zoomChanged = false\n\n          return true\n        }\n\n        return false\n      }\n    })()\n  }\n\n  // This set of controls performs orbiting, dollying (zooming), and panning. It maintains\n  // the \"up\" direction as +Y, unlike the TrackballControls. Touch on tablet and phones is\n  // supported.\n  //\n  //    Orbit - left mouse / touch: one finger move\n  //    Zoom - middle mouse, or mousewheel / touch: two finger spread or squish\n  //    Pan - right mouse, or arrow keys / touch: three finter swipe\n\n  function OrbitControls(object, domElement) {\n    var constraint = new OrbitConstraint(object)\n\n    this.domElement = domElement !== undefined ? domElement : document\n\n    // API\n\n    Object.defineProperty(this, 'constraint', {\n      get: function() {\n        return constraint\n      }\n    })\n\n    this.getPolarAngle = function() {\n      return constraint.getPolarAngle()\n    }\n\n    this.getAzimuthalAngle = function() {\n      return constraint.getAzimuthalAngle()\n    }\n\n    // Set to false to disable this control\n    this.enabled = true\n\n    // center is old, deprecated; use \"target\" instead\n    this.center = this.target\n\n    // This option actually enables dollying in and out; left as \"zoom\" for\n    // backwards compatibility.\n    // Set to false to disable zooming\n    this.enableZoom = true\n    this.zoomSpeed = 1.0\n\n    // Set to false to disable rotating\n    this.enableRotate = true\n    this.rotateSpeed = 1.0\n\n    // Set to false to disable panning\n    this.enablePan = true\n    this.keyPanSpeed = 7.0 // pixels moved per arrow key push\n\n    // Set to true to automatically rotate around the target\n    // If auto-rotate is enabled, you must call controls.update() in your animation loop\n    this.autoRotate = false\n    this.autoRotateSpeed = 2.0 // 30 seconds per round when fps is 60\n\n    // Set to false to disable use of the keys\n    this.enableKeys = true\n\n    // The four arrow keys\n    this.keys = {\n      LEFT: 37,\n      UP: 38,\n      RIGHT: 39,\n      BOTTOM: 40\n    }\n\n    // Mouse buttons\n    this.mouseButtons = {\n      ORBIT: THREE.MOUSE.LEFT,\n      ZOOM: THREE.MOUSE.MIDDLE,\n      PAN: THREE.MOUSE.RIGHT\n    }\n\n    ////////////\n    // internals\n\n    var scope = this\n\n    var rotateStart = new THREE.Vector2()\n    var rotateEnd = new THREE.Vector2()\n    var rotateDelta = new THREE.Vector2()\n\n    var panStart = new THREE.Vector2()\n    var panEnd = new THREE.Vector2()\n    var panDelta = new THREE.Vector2()\n\n    var dollyStart = new THREE.Vector2()\n    var dollyEnd = new THREE.Vector2()\n    var dollyDelta = new THREE.Vector2()\n\n    var STATE = {\n      NONE: -1,\n      ROTATE: 0,\n      DOLLY: 1,\n      PAN: 2,\n      TOUCH_ROTATE: 3,\n      TOUCH_DOLLY: 4,\n      TOUCH_PAN: 5\n    }\n\n    var state = STATE.NONE\n\n    // for reset\n\n    this.target0 = this.target.clone()\n    this.position0 = this.object.position.clone()\n    this.zoom0 = this.object.zoom\n\n    // events\n\n    var changeEvent = {\n      type: 'change'\n    }\n    var startEvent = {\n      type: 'start'\n    }\n    var endEvent = {\n      type: 'end'\n    }\n\n    // pass in x,y of change desired in pixel space,\n    // right and down are positive\n    function pan(deltaX, deltaY) {\n      var element = scope.domElement === document ? scope.domElement.body : scope.domElement\n\n      constraint.pan(deltaX, deltaY, element.clientWidth, element.clientHeight)\n    }\n\n    this.update = function() {\n      if (this.autoRotate && state === STATE.NONE) {\n        constraint.rotateLeft(getAutoRotationAngle())\n      }\n\n      if (constraint.update() === true) {\n        this.dispatchEvent(changeEvent)\n      }\n    }\n\n    this.reset = function() {\n      state = STATE.NONE\n\n      this.target.copy(this.target0)\n      this.object.position.copy(this.position0)\n      this.object.zoom = this.zoom0\n\n      this.object.updateProjectionMatrix()\n      this.dispatchEvent(changeEvent)\n\n      this.update()\n    }\n\n    function getAutoRotationAngle() {\n      return ((2 * Math.PI) / 60 / 60) * scope.autoRotateSpeed\n    }\n\n    function getZoomScale() {\n      return Math.pow(0.95, scope.zoomSpeed)\n    }\n\n    function onMouseDown(event) {\n      if (scope.enabled === false) return\n\n      event.preventDefault()\n\n      if (event.button === scope.mouseButtons.ORBIT) {\n        if (scope.enableRotate === false) return\n\n        state = STATE.ROTATE\n\n        rotateStart.set(event.clientX, event.clientY)\n      } else if (event.button === scope.mouseButtons.ZOOM) {\n        if (scope.enableZoom === false) return\n\n        state = STATE.DOLLY\n\n        dollyStart.set(event.clientX, event.clientY)\n      } else if (event.button === scope.mouseButtons.PAN) {\n        if (scope.enablePan === false) return\n\n        state = STATE.PAN\n\n        panStart.set(event.clientX, event.clientY)\n      }\n\n      if (state !== STATE.NONE) {\n        document.addEventListener('mousemove', onMouseMove, false)\n        document.addEventListener('mouseup', onMouseUp, false)\n        scope.dispatchEvent(startEvent)\n      }\n    }\n\n    function onMouseMove(event) {\n      if (scope.enabled === false) return\n\n      event.preventDefault()\n\n      var element = scope.domElement === document ? scope.domElement.body : scope.domElement\n\n      if (state === STATE.ROTATE) {\n        if (scope.enableRotate === false) return\n\n        rotateEnd.set(event.clientX, event.clientY)\n        rotateDelta.subVectors(rotateEnd, rotateStart)\n\n        // rotating across whole screen goes 360 degrees around\n        constraint.rotateLeft(((2 * Math.PI * rotateDelta.x) / element.clientWidth) * scope.rotateSpeed)\n\n        // rotating up and down along whole screen attempts to go 360, but limited to 180\n        constraint.rotateUp(((2 * Math.PI * rotateDelta.y) / element.clientHeight) * scope.rotateSpeed)\n\n        rotateStart.copy(rotateEnd)\n      } else if (state === STATE.DOLLY) {\n        if (scope.enableZoom === false) return\n\n        dollyEnd.set(event.clientX, event.clientY)\n        dollyDelta.subVectors(dollyEnd, dollyStart)\n\n        if (dollyDelta.y > 0) {\n          constraint.dollyIn(getZoomScale())\n        } else if (dollyDelta.y < 0) {\n          constraint.dollyOut(getZoomScale())\n        }\n\n        dollyStart.copy(dollyEnd)\n      } else if (state === STATE.PAN) {\n        if (scope.enablePan === false) return\n\n        panEnd.set(event.clientX, event.clientY)\n        panDelta.subVectors(panEnd, panStart)\n\n        pan(panDelta.x, panDelta.y)\n\n        panStart.copy(panEnd)\n      }\n\n      if (state !== STATE.NONE) scope.update()\n    }\n\n    function onMouseUp(/* event */) {\n      if (scope.enabled === false) return\n\n      document.removeEventListener('mousemove', onMouseMove, false)\n      document.removeEventListener('mouseup', onMouseUp, false)\n      scope.dispatchEvent(endEvent)\n      state = STATE.NONE\n    }\n\n    function onMouseWheel(event) {\n      if (scope.enabled === false || scope.enableZoom === false || state !== STATE.NONE) return\n\n      event.preventDefault()\n      event.stopPropagation()\n\n      var delta = 0\n\n      if (event.wheelDelta !== undefined) {\n        // WebKit / Opera / Explorer 9\n\n        delta = event.wheelDelta\n      } else if (event.detail !== undefined) {\n        // Firefox\n\n        delta = -event.detail\n      }\n\n      if (delta > 0) {\n        constraint.dollyOut(getZoomScale())\n      } else if (delta < 0) {\n        constraint.dollyIn(getZoomScale())\n      }\n\n      scope.update()\n      scope.dispatchEvent(startEvent)\n      scope.dispatchEvent(endEvent)\n    }\n\n    function onKeyDown(event) {\n      if (scope.enabled === false || scope.enableKeys === false || scope.enablePan === false) return\n\n      switch (event.keyCode) {\n        case scope.keys.UP:\n          pan(0, scope.keyPanSpeed)\n          scope.update()\n          break\n\n        case scope.keys.BOTTOM:\n          pan(0, -scope.keyPanSpeed)\n          scope.update()\n          break\n\n        case scope.keys.LEFT:\n          pan(scope.keyPanSpeed, 0)\n          scope.update()\n          break\n\n        case scope.keys.RIGHT:\n          pan(-scope.keyPanSpeed, 0)\n          scope.update()\n          break\n      }\n    }\n\n    function touchstart(event) {\n      if (scope.enabled === false) return\n\n      switch (event.touches.length) {\n        case 1: // one-fingered touch: rotate\n          if (scope.enableRotate === false) return\n\n          state = STATE.TOUCH_ROTATE\n\n          rotateStart.set(event.touches[0].pageX, event.touches[0].pageY)\n          break\n\n        case 2: // two-fingered touch: dolly\n          if (scope.enableZoom === false) return\n\n          state = STATE.TOUCH_DOLLY\n\n          var dx = event.touches[0].pageX - event.touches[1].pageX\n          var dy = event.touches[0].pageY - event.touches[1].pageY\n          var distance = Math.sqrt(dx * dx + dy * dy)\n          dollyStart.set(0, distance)\n          break\n\n        case 3: // three-fingered touch: pan\n          if (scope.enablePan === false) return\n\n          state = STATE.TOUCH_PAN\n\n          panStart.set(event.touches[0].pageX, event.touches[0].pageY)\n          break\n\n        default:\n          state = STATE.NONE\n      }\n\n      if (state !== STATE.NONE) scope.dispatchEvent(startEvent)\n    }\n\n    function touchmove(event) {\n      if (scope.enabled === false) return\n\n      event.preventDefault()\n      event.stopPropagation()\n\n      var element = scope.domElement === document ? scope.domElement.body : scope.domElement\n\n      switch (event.touches.length) {\n        case 1: // one-fingered touch: rotate\n          if (scope.enableRotate === false) return\n          if (state !== STATE.TOUCH_ROTATE) return\n\n          rotateEnd.set(event.touches[0].pageX, event.touches[0].pageY)\n          rotateDelta.subVectors(rotateEnd, rotateStart)\n\n          // rotating across whole screen goes 360 degrees around\n          constraint.rotateLeft(((2 * Math.PI * rotateDelta.x) / element.clientWidth) * scope.rotateSpeed)\n          // rotating up and down along whole screen attempts to go 360, but limited to 180\n          constraint.rotateUp(((2 * Math.PI * rotateDelta.y) / element.clientHeight) * scope.rotateSpeed)\n\n          rotateStart.copy(rotateEnd)\n\n          scope.update()\n          break\n\n        case 2: // two-fingered touch: dolly\n          if (scope.enableZoom === false) return\n          if (state !== STATE.TOUCH_DOLLY) return\n\n          var dx = event.touches[0].pageX - event.touches[1].pageX\n          var dy = event.touches[0].pageY - event.touches[1].pageY\n          var distance = Math.sqrt(dx * dx + dy * dy)\n\n          dollyEnd.set(0, distance)\n          dollyDelta.subVectors(dollyEnd, dollyStart)\n\n          if (dollyDelta.y > 0) {\n            constraint.dollyOut(getZoomScale())\n          } else if (dollyDelta.y < 0) {\n            constraint.dollyIn(getZoomScale())\n          }\n\n          dollyStart.copy(dollyEnd)\n\n          scope.update()\n          break\n\n        case 3: // three-fingered touch: pan\n          if (scope.enablePan === false) return\n          if (state !== STATE.TOUCH_PAN) return\n\n          panEnd.set(event.touches[0].pageX, event.touches[0].pageY)\n          panDelta.subVectors(panEnd, panStart)\n\n          pan(panDelta.x, panDelta.y)\n\n          panStart.copy(panEnd)\n\n          scope.update()\n          break\n\n        default:\n          state = STATE.NONE\n      }\n    }\n\n    function touchend(/* event */) {\n      if (scope.enabled === false) return\n\n      scope.dispatchEvent(endEvent)\n      state = STATE.NONE\n    }\n\n    function contextmenu(event) {\n      event.preventDefault()\n    }\n\n    this.dispose = function() {\n      this.domElement.removeEventListener('contextmenu', contextmenu, false)\n      this.domElement.removeEventListener('mousedown', onMouseDown, false)\n      this.domElement.removeEventListener('mousewheel', onMouseWheel, false)\n      this.domElement.removeEventListener('MozMousePixelScroll', onMouseWheel, false) // firefox\n\n      this.domElement.removeEventListener('touchstart', touchstart, false)\n      this.domElement.removeEventListener('touchend', touchend, false)\n      this.domElement.removeEventListener('touchmove', touchmove, false)\n\n      document.removeEventListener('mousemove', onMouseMove, false)\n      document.removeEventListener('mouseup', onMouseUp, false)\n\n      window.removeEventListener('keydown', onKeyDown, false)\n    }\n\n    this.domElement.addEventListener('contextmenu', contextmenu, false)\n\n    this.domElement.addEventListener('mousedown', onMouseDown, false)\n    this.domElement.addEventListener('mousewheel', onMouseWheel, false)\n    this.domElement.addEventListener('MozMousePixelScroll', onMouseWheel, false) // firefox\n\n    this.domElement.addEventListener('touchstart', touchstart, false)\n    this.domElement.addEventListener('touchend', touchend, false)\n    this.domElement.addEventListener('touchmove', touchmove, false)\n\n    window.addEventListener('keydown', onKeyDown, false)\n\n    // force an update at start\n    this.update()\n  }\n\n  OrbitControls.prototype = Object.create(THREE.EventDispatcher.prototype)\n  OrbitControls.prototype.constructor = OrbitControls\n\n  Object.defineProperties(OrbitControls.prototype, {\n    object: {\n      get: function() {\n        return this.constraint.object\n      }\n    },\n\n    target: {\n      get: function() {\n        return this.constraint.target\n      },\n\n      set: function(value) {\n        console.warn('THREE.OrbitControls: target is now immutable. Use target.set() instead.')\n        this.constraint.target.copy(value)\n      }\n    },\n\n    minDistance: {\n      get: function() {\n        return this.constraint.minDistance\n      },\n\n      set: function(value) {\n        this.constraint.minDistance = value\n      }\n    },\n\n    maxDistance: {\n      get: function() {\n        return this.constraint.maxDistance\n      },\n\n      set: function(value) {\n        this.constraint.maxDistance = value\n      }\n    },\n\n    minZoom: {\n      get: function() {\n        return this.constraint.minZoom\n      },\n\n      set: function(value) {\n        this.constraint.minZoom = value\n      }\n    },\n\n    maxZoom: {\n      get: function() {\n        return this.constraint.maxZoom\n      },\n\n      set: function(value) {\n        this.constraint.maxZoom = value\n      }\n    },\n\n    minPolarAngle: {\n      get: function() {\n        return this.constraint.minPolarAngle\n      },\n\n      set: function(value) {\n        this.constraint.minPolarAngle = value\n      }\n    },\n\n    maxPolarAngle: {\n      get: function() {\n        return this.constraint.maxPolarAngle\n      },\n\n      set: function(value) {\n        this.constraint.maxPolarAngle = value\n      }\n    },\n\n    minAzimuthAngle: {\n      get: function() {\n        return this.constraint.minAzimuthAngle\n      },\n\n      set: function(value) {\n        this.constraint.minAzimuthAngle = value\n      }\n    },\n\n    maxAzimuthAngle: {\n      get: function() {\n        return this.constraint.maxAzimuthAngle\n      },\n\n      set: function(value) {\n        this.constraint.maxAzimuthAngle = value\n      }\n    },\n\n    enableDamping: {\n      get: function() {\n        return this.constraint.enableDamping\n      },\n\n      set: function(value) {\n        this.constraint.enableDamping = value\n      }\n    },\n\n    dampingFactor: {\n      get: function() {\n        return this.constraint.dampingFactor\n      },\n\n      set: function(value) {\n        this.constraint.dampingFactor = value\n      }\n    },\n\n    // backward compatibility\n\n    noZoom: {\n      get: function() {\n        console.warn('THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.')\n        return !this.enableZoom\n      },\n\n      set: function(value) {\n        console.warn('THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.')\n        this.enableZoom = !value\n      }\n    },\n\n    noRotate: {\n      get: function() {\n        console.warn('THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.')\n        return !this.enableRotate\n      },\n\n      set: function(value) {\n        console.warn('THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.')\n        this.enableRotate = !value\n      }\n    },\n\n    noPan: {\n      get: function() {\n        console.warn('THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.')\n        return !this.enablePan\n      },\n\n      set: function(value) {\n        console.warn('THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.')\n        this.enablePan = !value\n      }\n    },\n\n    noKeys: {\n      get: function() {\n        console.warn('THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.')\n        return !this.enableKeys\n      },\n\n      set: function(value) {\n        console.warn('THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.')\n        this.enableKeys = !value\n      }\n    },\n\n    staticMoving: {\n      get: function() {\n        console.warn('THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.')\n        return !this.constraint.enableDamping\n      },\n\n      set: function(value) {\n        console.warn('THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.')\n        this.constraint.enableDamping = !value\n      }\n    },\n\n    dynamicDampingFactor: {\n      get: function() {\n        console.warn('THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.')\n        return this.constraint.dampingFactor\n      },\n\n      set: function(value) {\n        console.warn('THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.')\n        this.constraint.dampingFactor = value\n      }\n    }\n  })\n\n  return OrbitControls\n}\n","import * as THREE from 'three'\n\nimport Config from '../config'\n\n// Main webGL renderer class\nexport default class Renderer {\n  constructor(scene, container) {\n    // Properties\n    this.scene = scene\n    this.container = container\n\n    // Create WebGL renderer and set its antialias\n    this.threeRenderer = new THREE.WebGLRenderer({\n      antialias: true\n    })\n\n    // Set clear color to fog to enable fog or to hex color for no fog\n    this.threeRenderer.setClearColor(scene.fog.color)\n    this.threeRenderer.setPixelRatio(window.devicePixelRatio) // For retina\n\n    // Appends canvas\n    container.appendChild(this.threeRenderer.domElement)\n\n    // Shadow map options\n    this.threeRenderer.shadowMap.enabled = true\n    this.threeRenderer.shadowMap.type = THREE.PCFSoftShadowMap\n\n    // Get anisotropy for textures\n    Config.maxAnisotropy = this.threeRenderer.getMaxAnisotropy()\n\n    // Initial size update set to canvas container\n    this.updateSize()\n\n    // Listeners\n    document.addEventListener('DOMContentLoaded', () => this.updateSize(), false)\n    window.addEventListener('resize', () => this.updateSize(), false)\n  }\n\n  updateSize() {\n    this.threeRenderer.setSize(this.container.offsetWidth, this.container.offsetHeight)\n  }\n\n  render(scene, camera) {\n    // Renders scene to canvas target\n    this.threeRenderer.render(scene, camera)\n  }\n}\n","export default class Router {\n  constructor(\n    route = {\n      current: 'one',\n      parent: null\n    }\n  ) {\n    this.stack = [route]\n  }\n  getLastChild() {\n    return this.stack[this.stack.length - 1]\n  }\n  push(route) {\n    const isRepeated = this.stack.some(item => item.current === route.current)\n    if (!isRepeated) {\n      this.stack.push(route)\n    }\n  }\n  pop() {\n    if (this.stack.length <= 1) {\n      return\n    }\n    return this.stack.pop()\n  }\n}\n","/**\n * @author zz85 / https://github.com/zz85\n *\n * Based on \"A Practical Analytic Model for Daylight\"\n * aka The Preetham Model, the de facto standard analytic skydome model\n * http://www.cs.utah.edu/~shirley/papers/sunsky/sunsky.pdf\n *\n * First implemented by Simon Wallner\n * http://www.simonwallner.at/projects/atmospheric-scattering\n *\n * Improved by Martin Upitis\n * http://blenderartists.org/forum/showthread.php?245954-preethams-sky-impementation-HDR\n *\n * Three.js integration by zz85 http://twitter.com/blurspline\n */\n\nimport { BackSide, BoxBufferGeometry, Mesh, ShaderMaterial, UniformsUtils, Vector3 } from 'three'\n\nvar Sky = function() {\n  var shader = Sky.SkyShader\n\n  var material = new ShaderMaterial({\n    fragmentShader: shader.fragmentShader,\n    vertexShader: shader.vertexShader,\n    uniforms: UniformsUtils.clone(shader.uniforms),\n    side: BackSide\n  })\n\n  Mesh.call(this, new BoxBufferGeometry(1, 1, 1), material)\n}\n\nSky.prototype = Object.create(Mesh.prototype)\n\nSky.SkyShader = {\n  uniforms: {\n    luminance: {\n      value: 1\n    },\n    turbidity: {\n      value: 2\n    },\n    rayleigh: {\n      value: 1\n    },\n    mieCoefficient: {\n      value: 0.005\n    },\n    mieDirectionalG: {\n      value: 0.8\n    },\n    sunPosition: {\n      value: new Vector3()\n    }\n  },\n\n  vertexShader: [\n    'uniform vec3 sunPosition;',\n    'uniform float rayleigh;',\n    'uniform float turbidity;',\n    'uniform float mieCoefficient;',\n\n    'varying vec3 vWorldPosition;',\n    'varying vec3 vSunDirection;',\n    'varying float vSunfade;',\n    'varying vec3 vBetaR;',\n    'varying vec3 vBetaM;',\n    'varying float vSunE;',\n\n    'const vec3 up = vec3( 0.0, 1.0, 0.0 );',\n\n    // constants for atmospheric scattering\n    'const float e = 2.71828182845904523536028747135266249775724709369995957;',\n    'const float pi = 3.141592653589793238462643383279502884197169;',\n\n    // wavelength of used primaries, according to preetham\n    'const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );',\n    // this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:\n    // (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))\n    'const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );',\n\n    // mie stuff\n    // K coefficient for the primaries\n    'const float v = 4.0;',\n    'const vec3 K = vec3( 0.686, 0.678, 0.666 );',\n    // MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K\n    'const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );',\n\n    // earth shadow hack\n    // cutoffAngle = pi / 1.95;\n    'const float cutoffAngle = 1.6110731556870734;',\n    'const float steepness = 1.5;',\n    'const float EE = 1000.0;',\n\n    'float sunIntensity( float zenithAngleCos ) {',\n    '\tzenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );',\n    '\treturn EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );',\n    '}',\n\n    'vec3 totalMie( float T ) {',\n    '\tfloat c = ( 0.2 * T ) * 10E-18;',\n    '\treturn 0.434 * c * MieConst;',\n    '}',\n\n    'void main() {',\n\n    '\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );',\n    '\tvWorldPosition = worldPosition.xyz;',\n\n    '\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',\n    '\tgl_Position.z = gl_Position.w;', // set z to camera.far\n\n    '\tvSunDirection = normalize( sunPosition );',\n\n    '\tvSunE = sunIntensity( dot( vSunDirection, up ) );',\n\n    '\tvSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );',\n\n    '\tfloat rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );',\n\n    // extinction (absorbtion + out scattering)\n    // rayleigh coefficients\n    '\tvBetaR = totalRayleigh * rayleighCoefficient;',\n\n    // mie coefficients\n    '\tvBetaM = totalMie( turbidity ) * mieCoefficient;',\n\n    '}'\n  ].join('\\n'),\n\n  fragmentShader: [\n    'varying vec3 vWorldPosition;',\n    'varying vec3 vSunDirection;',\n    'varying float vSunfade;',\n    'varying vec3 vBetaR;',\n    'varying vec3 vBetaM;',\n    'varying float vSunE;',\n\n    'uniform float luminance;',\n    'uniform float mieDirectionalG;',\n\n    'const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );',\n\n    // constants for atmospheric scattering\n    'const float pi = 3.141592653589793238462643383279502884197169;',\n\n    'const float n = 1.0003;', // refractive index of air\n    'const float N = 2.545E25;', // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)\n\n    // optical length at zenith for molecules\n    'const float rayleighZenithLength = 8.4E3;',\n    'const float mieZenithLength = 1.25E3;',\n    'const vec3 up = vec3( 0.0, 1.0, 0.0 );',\n    // 66 arc seconds -> degrees, and the cosine of that\n    'const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;',\n\n    // 3.0 / ( 16.0 * pi )\n    'const float THREE_OVER_SIXTEENPI = 0.05968310365946075;',\n    // 1.0 / ( 4.0 * pi )\n    'const float ONE_OVER_FOURPI = 0.07957747154594767;',\n\n    'float rayleighPhase( float cosTheta ) {',\n    '\treturn THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );',\n    '}',\n\n    'float hgPhase( float cosTheta, float g ) {',\n    '\tfloat g2 = pow( g, 2.0 );',\n    '\tfloat inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );',\n    '\treturn ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );',\n    '}',\n\n    // Filmic ToneMapping http://filmicgames.com/archives/75\n    'const float A = 0.15;',\n    'const float B = 0.50;',\n    'const float C = 0.10;',\n    'const float D = 0.20;',\n    'const float E = 0.02;',\n    'const float F = 0.30;',\n\n    'const float whiteScale = 1.0748724675633854;', // 1.0 / Uncharted2Tonemap(1000.0)\n\n    'vec3 Uncharted2Tonemap( vec3 x ) {',\n    '\treturn ( ( x * ( A * x + C * B ) + D * E ) / ( x * ( A * x + B ) + D * F ) ) - E / F;',\n    '}',\n\n    'void main() {',\n    // optical length\n    // cutoff angle at 90 to avoid singularity in next formula.\n    '\tfloat zenithAngle = acos( max( 0.0, dot( up, normalize( vWorldPosition - cameraPos ) ) ) );',\n    '\tfloat inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );',\n    '\tfloat sR = rayleighZenithLength * inverse;',\n    '\tfloat sM = mieZenithLength * inverse;',\n\n    // combined extinction factor\n    '\tvec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );',\n\n    // in scattering\n    '\tfloat cosTheta = dot( normalize( vWorldPosition - cameraPos ), vSunDirection );',\n\n    '\tfloat rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );',\n    '\tvec3 betaRTheta = vBetaR * rPhase;',\n\n    '\tfloat mPhase = hgPhase( cosTheta, mieDirectionalG );',\n    '\tvec3 betaMTheta = vBetaM * mPhase;',\n\n    '\tvec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );',\n    '\tLin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );',\n\n    // nightsky\n    '\tvec3 direction = normalize( vWorldPosition - cameraPos );',\n    '\tfloat theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]',\n    '\tfloat phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]',\n    '\tvec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );',\n    '\tvec3 L0 = vec3( 0.1 ) * Fex;',\n\n    // composition + solar disc\n    '\tfloat sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );',\n    '\tL0 += ( vSunE * 19000.0 * Fex ) * sundisk;',\n\n    '\tvec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );',\n\n    '\tvec3 curr = Uncharted2Tonemap( ( log2( 2.0 / pow( luminance, 4.0 ) ) ) * texColor );',\n    '\tvec3 color = curr * whiteScale;',\n\n    '\tvec3 retColor = pow( color, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );',\n\n    '\tgl_FragColor = vec4( retColor, 1.0 );',\n\n    '}'\n  ].join('\\n')\n}\n\nexport { Sky }\n","/**\n * @author Kyle-Larson https://github.com/Kyle-Larson\n * @author Takahiro https://github.com/takahirox\n * @author Lewy Blue https://github.com/looeee\n *\n * Loader loads FBX file and generates Group representing FBX scene.\n * Requires FBX file to be >= 7.0 and in ASCII or >= 6400 in Binary format\n * Versions lower than this may load but will probably have errors\n *\n * Needs Support:\n *  Morph normals / blend shape normals\n *\n * FBX format references:\n * \thttps://wiki.blender.org/index.php/User:Mont29/Foundation/FBX_File_Structure\n * \thttp://help.autodesk.com/view/FBX/2017/ENU/?guid=__cpp_ref_index_html (C++ SDK reference)\n *\n * \tBinary format specification:\n *\t\thttps://code.blender.org/2013/08/fbx-binary-file-format-specification/\n */\n\nimport {\n  AmbientLight,\n  AnimationClip,\n  Bone,\n  BufferAttribute,\n  BufferGeometry,\n  ClampToEdgeWrapping,\n  Color,\n  DefaultLoadingManager,\n  DirectionalLight,\n  EquirectangularReflectionMapping,\n  Euler,\n  FileLoader,\n  Float32BufferAttribute,\n  Group,\n  Line,\n  LineBasicMaterial,\n  Loader,\n  LoaderUtils,\n  Math as _Math,\n  Matrix3,\n  Matrix4,\n  Mesh,\n  MeshLambertMaterial,\n  MeshPhongMaterial,\n  NumberKeyframeTrack,\n  Object3D,\n  OrthographicCamera,\n  PerspectiveCamera,\n  PointLight,\n  PropertyBinding,\n  Quaternion,\n  QuaternionKeyframeTrack,\n  RepeatWrapping,\n  Skeleton,\n  SkinnedMesh,\n  SpotLight,\n  Texture,\n  TextureLoader,\n  Uint16BufferAttribute,\n  Vector3,\n  Vector4,\n  VectorKeyframeTrack,\n  VertexColors\n} from 'three'\nimport { Zlib } from './inflate.module.min.js'\nimport { TGALoader } from './TGALoader.js'\nimport { NURBSCurve } from './NURBSCurve.js'\n\nvar FBXLoader = (function() {\n  var fbxTree\n  var connections\n  var sceneGraph\n\n  function FBXLoader(manager) {\n    this.manager = manager !== undefined ? manager : DefaultLoadingManager\n  }\n\n  FBXLoader.prototype = {\n    constructor: FBXLoader,\n\n    crossOrigin: 'anonymous',\n\n    load: function(url, onLoad, onProgress, onError) {\n      var self = this\n\n      var path = self.path === undefined ? LoaderUtils.extractUrlBase(url) : self.path\n\n      var loader = new FileLoader(this.manager)\n      loader.setPath(self.path)\n      loader.setResponseType('arraybuffer')\n\n      loader.load(\n        url,\n        function(buffer) {\n          try {\n            onLoad(self.parse(buffer, path))\n          } catch (error) {\n            setTimeout(function() {\n              if (onError) onError(error)\n\n              self.manager.itemError(url)\n            }, 0)\n          }\n        },\n        onProgress,\n        onError\n      )\n    },\n\n    setPath: function(value) {\n      this.path = value\n      return this\n    },\n\n    setResourcePath: function(value) {\n      this.resourcePath = value\n      return this\n    },\n\n    setCrossOrigin: function(value) {\n      this.crossOrigin = value\n      return this\n    },\n\n    parse: function(FBXBuffer, path) {\n      if (isFbxFormatBinary(FBXBuffer)) {\n        fbxTree = new BinaryParser().parse(FBXBuffer)\n      } else {\n        var FBXText = convertArrayBufferToString(FBXBuffer)\n\n        if (!isFbxFormatASCII(FBXText)) {\n          throw new Error('THREE.FBXLoader: Unknown format.')\n        }\n\n        if (getFbxVersion(FBXText) < 7000) {\n          throw new Error('THREE.FBXLoader: FBX version not supported, FileVersion: ' + getFbxVersion(FBXText))\n        }\n\n        fbxTree = new TextParser().parse(FBXText)\n      }\n\n      // console.log( fbxTree );\n\n      var textureLoader = new TextureLoader(this.manager)\n        .setPath(this.resourcePath || path)\n        .setCrossOrigin(this.crossOrigin)\n\n      return new FBXTreeParser(textureLoader).parse(fbxTree)\n    }\n  }\n\n  // Parse the FBXTree object returned by the BinaryParser or TextParser and return a Group\n  function FBXTreeParser(textureLoader) {\n    this.textureLoader = textureLoader\n  }\n\n  FBXTreeParser.prototype = {\n    constructor: FBXTreeParser,\n\n    parse: function() {\n      connections = this.parseConnections()\n\n      var images = this.parseImages()\n      var textures = this.parseTextures(images)\n      var materials = this.parseMaterials(textures)\n      var deformers = this.parseDeformers()\n      var geometryMap = new GeometryParser().parse(deformers)\n\n      this.parseScene(deformers, geometryMap, materials)\n\n      return sceneGraph\n    },\n\n    // Parses FBXTree.Connections which holds parent-child connections between objects (e.g. material -> texture, model->geometry )\n    // and details the connection type\n    parseConnections: function() {\n      var connectionMap = new Map()\n\n      if ('Connections' in fbxTree) {\n        var rawConnections = fbxTree.Connections.connections\n\n        rawConnections.forEach(function(rawConnection) {\n          var fromID = rawConnection[0]\n          var toID = rawConnection[1]\n          var relationship = rawConnection[2]\n\n          if (!connectionMap.has(fromID)) {\n            connectionMap.set(fromID, {\n              parents: [],\n              children: []\n            })\n          }\n\n          var parentRelationship = {\n            ID: toID,\n            relationship: relationship\n          }\n          connectionMap.get(fromID).parents.push(parentRelationship)\n\n          if (!connectionMap.has(toID)) {\n            connectionMap.set(toID, {\n              parents: [],\n              children: []\n            })\n          }\n\n          var childRelationship = {\n            ID: fromID,\n            relationship: relationship\n          }\n          connectionMap.get(toID).children.push(childRelationship)\n        })\n      }\n\n      return connectionMap\n    },\n\n    // Parse FBXTree.Objects.Video for embedded image data\n    // These images are connected to textures in FBXTree.Objects.Textures\n    // via FBXTree.Connections.\n    parseImages: function() {\n      var images = {}\n      var blobs = {}\n\n      if ('Video' in fbxTree.Objects) {\n        var videoNodes = fbxTree.Objects.Video\n\n        for (var nodeID in videoNodes) {\n          var videoNode = videoNodes[nodeID]\n\n          var id = parseInt(nodeID)\n\n          images[id] = videoNode.RelativeFilename || videoNode.Filename\n\n          // raw image data is in videoNode.Content\n          if ('Content' in videoNode) {\n            var arrayBufferContent = videoNode.Content instanceof ArrayBuffer && videoNode.Content.byteLength > 0\n            var base64Content = typeof videoNode.Content === 'string' && videoNode.Content !== ''\n\n            if (arrayBufferContent || base64Content) {\n              var image = this.parseImage(videoNodes[nodeID])\n\n              blobs[videoNode.RelativeFilename || videoNode.Filename] = image\n            }\n          }\n        }\n      }\n\n      for (var id in images) {\n        var filename = images[id]\n\n        if (blobs[filename] !== undefined) images[id] = blobs[filename]\n        else images[id] = images[id].split('\\\\').pop()\n      }\n\n      return images\n    },\n\n    // Parse embedded image data in FBXTree.Video.Content\n    parseImage: function(videoNode) {\n      var content = videoNode.Content\n      var fileName = videoNode.RelativeFilename || videoNode.Filename\n      var extension = fileName.slice(fileName.lastIndexOf('.') + 1).toLowerCase()\n\n      var type\n\n      switch (extension) {\n        case 'bmp':\n          type = 'image/bmp'\n          break\n\n        case 'jpg':\n        case 'jpeg':\n          type = 'image/jpeg'\n          break\n\n        case 'png':\n          type = 'image/png'\n          break\n\n        case 'tif':\n          type = 'image/tiff'\n          break\n\n        case 'tga':\n          if (typeof TGALoader !== 'function') {\n            console.warn('FBXLoader: TGALoader is required to load TGA textures')\n            return\n          } else {\n            if (Loader.Handlers.get('.tga') === null) {\n              var tgaLoader = new TGALoader()\n              tgaLoader.setPath(this.textureLoader.path)\n\n              Loader.Handlers.add(/\\.tga$/i, tgaLoader)\n            }\n\n            type = 'image/tga'\n            break\n          }\n\n        default:\n          console.warn('FBXLoader: Image type \"' + extension + '\" is not supported.')\n          return\n      }\n\n      if (typeof content === 'string') {\n        // ASCII format\n\n        return 'data:' + type + ';base64,' + content\n      } else {\n        // Binary Format\n\n        var array = new Uint8Array(content)\n        return window.URL.createObjectURL(\n          new Blob([array], {\n            type: type\n          })\n        )\n      }\n    },\n\n    // Parse nodes in FBXTree.Objects.Texture\n    // These contain details such as UV scaling, cropping, rotation etc and are connected\n    // to images in FBXTree.Objects.Video\n    parseTextures: function(images) {\n      var textureMap = new Map()\n\n      if ('Texture' in fbxTree.Objects) {\n        var textureNodes = fbxTree.Objects.Texture\n        for (var nodeID in textureNodes) {\n          var texture = this.parseTexture(textureNodes[nodeID], images)\n          textureMap.set(parseInt(nodeID), texture)\n        }\n      }\n\n      return textureMap\n    },\n\n    // Parse individual node in FBXTree.Objects.Texture\n    parseTexture: function(textureNode, images) {\n      var texture = this.loadTexture(textureNode, images)\n\n      texture.ID = textureNode.id\n\n      texture.name = textureNode.attrName\n\n      var wrapModeU = textureNode.WrapModeU\n      var wrapModeV = textureNode.WrapModeV\n\n      var valueU = wrapModeU !== undefined ? wrapModeU.value : 0\n      var valueV = wrapModeV !== undefined ? wrapModeV.value : 0\n\n      // http://download.autodesk.com/us/fbx/SDKdocs/FBX_SDK_Help/files/fbxsdkref/class_k_fbx_texture.html#889640e63e2e681259ea81061b85143a\n      // 0: repeat(default), 1: clamp\n\n      texture.wrapS = valueU === 0 ? RepeatWrapping : ClampToEdgeWrapping\n      texture.wrapT = valueV === 0 ? RepeatWrapping : ClampToEdgeWrapping\n\n      if ('Scaling' in textureNode) {\n        var values = textureNode.Scaling.value\n\n        texture.repeat.x = values[0]\n        texture.repeat.y = values[1]\n      }\n\n      return texture\n    },\n\n    // load a texture specified as a blob or data URI, or via an external URL using TextureLoader\n    loadTexture: function(textureNode, images) {\n      var fileName\n\n      var currentPath = this.textureLoader.path\n\n      var children = connections.get(textureNode.id).children\n\n      if (children !== undefined && children.length > 0 && images[children[0].ID] !== undefined) {\n        fileName = images[children[0].ID]\n\n        if (fileName.indexOf('blob:') === 0 || fileName.indexOf('data:') === 0) {\n          this.textureLoader.setPath(undefined)\n        }\n      }\n\n      var texture\n\n      var extension = textureNode.FileName.slice(-3).toLowerCase()\n\n      if (extension === 'tga') {\n        var loader = Loader.Handlers.get('.tga')\n\n        if (loader === null) {\n          console.warn('FBXLoader: TGALoader not found, creating empty placeholder texture for', fileName)\n          texture = new Texture()\n        } else {\n          texture = loader.load(fileName)\n        }\n      } else if (extension === 'psd') {\n        console.warn('FBXLoader: PSD textures are not supported, creating empty placeholder texture for', fileName)\n        texture = new Texture()\n      } else {\n        texture = this.textureLoader.load(fileName)\n      }\n\n      this.textureLoader.setPath(currentPath)\n\n      return texture\n    },\n\n    // Parse nodes in FBXTree.Objects.Material\n    parseMaterials: function(textureMap) {\n      var materialMap = new Map()\n\n      if ('Material' in fbxTree.Objects) {\n        var materialNodes = fbxTree.Objects.Material\n\n        for (var nodeID in materialNodes) {\n          var material = this.parseMaterial(materialNodes[nodeID], textureMap)\n\n          if (material !== null) materialMap.set(parseInt(nodeID), material)\n        }\n      }\n\n      return materialMap\n    },\n\n    // Parse single node in FBXTree.Objects.Material\n    // Materials are connected to texture maps in FBXTree.Objects.Textures\n    // FBX format currently only supports Lambert and Phong shading models\n    parseMaterial: function(materialNode, textureMap) {\n      var ID = materialNode.id\n      var name = materialNode.attrName\n      var type = materialNode.ShadingModel\n\n      // Case where FBX wraps shading model in property object.\n      if (typeof type === 'object') {\n        type = type.value\n      }\n\n      // Ignore unused materials which don't have any connections.\n      if (!connections.has(ID)) return null\n\n      var parameters = this.parseParameters(materialNode, textureMap, ID)\n\n      var material\n\n      switch (type.toLowerCase()) {\n        case 'phong':\n          material = new MeshPhongMaterial()\n          break\n        case 'lambert':\n          material = new MeshLambertMaterial()\n          break\n        default:\n          console.warn('THREE.FBXLoader: unknown material type \"%s\". Defaulting to MeshPhongMaterial.', type)\n          material = new MeshPhongMaterial()\n          break\n      }\n\n      material.setValues(parameters)\n      material.name = name\n\n      return material\n    },\n\n    // Parse FBX material and return parameters suitable for a three.js material\n    // Also parse the texture map and return any textures associated with the material\n    parseParameters: function(materialNode, textureMap, ID) {\n      var parameters = {}\n\n      if (materialNode.BumpFactor) {\n        parameters.bumpScale = materialNode.BumpFactor.value\n      }\n      if (materialNode.Diffuse) {\n        parameters.color = new Color().fromArray(materialNode.Diffuse.value)\n      } else if (materialNode.DiffuseColor && materialNode.DiffuseColor.type === 'Color') {\n        // The blender exporter exports diffuse here instead of in materialNode.Diffuse\n        parameters.color = new Color().fromArray(materialNode.DiffuseColor.value)\n      }\n\n      if (materialNode.DisplacementFactor) {\n        parameters.displacementScale = materialNode.DisplacementFactor.value\n      }\n\n      if (materialNode.Emissive) {\n        parameters.emissive = new Color().fromArray(materialNode.Emissive.value)\n      } else if (materialNode.EmissiveColor && materialNode.EmissiveColor.type === 'Color') {\n        // The blender exporter exports emissive color here instead of in materialNode.Emissive\n        parameters.emissive = new Color().fromArray(materialNode.EmissiveColor.value)\n      }\n\n      if (materialNode.EmissiveFactor) {\n        parameters.emissiveIntensity = parseFloat(materialNode.EmissiveFactor.value)\n      }\n\n      if (materialNode.Opacity) {\n        parameters.opacity = parseFloat(materialNode.Opacity.value)\n      }\n\n      if (parameters.opacity < 1.0) {\n        parameters.transparent = true\n      }\n\n      if (materialNode.ReflectionFactor) {\n        parameters.reflectivity = materialNode.ReflectionFactor.value\n      }\n\n      if (materialNode.Shininess) {\n        parameters.shininess = materialNode.Shininess.value\n      }\n\n      if (materialNode.Specular) {\n        parameters.specular = new Color().fromArray(materialNode.Specular.value)\n      } else if (materialNode.SpecularColor && materialNode.SpecularColor.type === 'Color') {\n        // The blender exporter exports specular color here instead of in materialNode.Specular\n        parameters.specular = new Color().fromArray(materialNode.SpecularColor.value)\n      }\n\n      var self = this\n      connections.get(ID).children.forEach(function(child) {\n        var type = child.relationship\n\n        switch (type) {\n          case 'Bump':\n            parameters.bumpMap = self.getTexture(textureMap, child.ID)\n            break\n\n          case 'Maya|TEX_ao_map':\n            parameters.aoMap = self.getTexture(textureMap, child.ID)\n            break\n\n          case 'DiffuseColor':\n          case 'Maya|TEX_color_map':\n            parameters.map = self.getTexture(textureMap, child.ID)\n            break\n\n          case 'DisplacementColor':\n            parameters.displacementMap = self.getTexture(textureMap, child.ID)\n            break\n\n          case 'EmissiveColor':\n            parameters.emissiveMap = self.getTexture(textureMap, child.ID)\n            break\n\n          case 'NormalMap':\n          case 'Maya|TEX_normal_map':\n            parameters.normalMap = self.getTexture(textureMap, child.ID)\n            break\n\n          case 'ReflectionColor':\n            parameters.envMap = self.getTexture(textureMap, child.ID)\n            parameters.envMap.mapping = EquirectangularReflectionMapping\n            break\n\n          case 'SpecularColor':\n            parameters.specularMap = self.getTexture(textureMap, child.ID)\n            break\n\n          case 'TransparentColor':\n            parameters.alphaMap = self.getTexture(textureMap, child.ID)\n            parameters.transparent = true\n            break\n\n          case 'AmbientColor':\n          case 'ShininessExponent': // AKA glossiness map\n          case 'SpecularFactor': // AKA specularLevel\n          case 'VectorDisplacementColor': // NOTE: Seems to be a copy of DisplacementColor\n          default:\n            console.warn('THREE.FBXLoader: %s map is not supported in three.js, skipping texture.', type)\n            break\n        }\n      })\n\n      return parameters\n    },\n\n    // get a texture from the textureMap for use by a material.\n    getTexture: function(textureMap, id) {\n      // if the texture is a layered texture, just use the first layer and issue a warning\n      if ('LayeredTexture' in fbxTree.Objects && id in fbxTree.Objects.LayeredTexture) {\n        console.warn('THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer.')\n        id = connections.get(id).children[0].ID\n      }\n\n      return textureMap.get(id)\n    },\n\n    // Parse nodes in FBXTree.Objects.Deformer\n    // Deformer node can contain skinning or Vertex Cache animation data, however only skinning is supported here\n    // Generates map of Skeleton-like objects for use later when generating and binding skeletons.\n    parseDeformers: function() {\n      var skeletons = {}\n      var morphTargets = {}\n\n      if ('Deformer' in fbxTree.Objects) {\n        var DeformerNodes = fbxTree.Objects.Deformer\n\n        for (var nodeID in DeformerNodes) {\n          var deformerNode = DeformerNodes[nodeID]\n\n          var relationships = connections.get(parseInt(nodeID))\n\n          if (deformerNode.attrType === 'Skin') {\n            var skeleton = this.parseSkeleton(relationships, DeformerNodes)\n            skeleton.ID = nodeID\n\n            if (relationships.parents.length > 1)\n              console.warn('THREE.FBXLoader: skeleton attached to more than one geometry is not supported.')\n            skeleton.geometryID = relationships.parents[0].ID\n\n            skeletons[nodeID] = skeleton\n          } else if (deformerNode.attrType === 'BlendShape') {\n            var morphTarget = {\n              id: nodeID\n            }\n\n            morphTarget.rawTargets = this.parseMorphTargets(relationships, DeformerNodes)\n            morphTarget.id = nodeID\n\n            if (relationships.parents.length > 1)\n              console.warn('THREE.FBXLoader: morph target attached to more than one geometry is not supported.')\n\n            morphTargets[nodeID] = morphTarget\n          }\n        }\n      }\n\n      return {\n        skeletons: skeletons,\n        morphTargets: morphTargets\n      }\n    },\n\n    // Parse single nodes in FBXTree.Objects.Deformer\n    // The top level skeleton node has type 'Skin' and sub nodes have type 'Cluster'\n    // Each skin node represents a skeleton and each cluster node represents a bone\n    parseSkeleton: function(relationships, deformerNodes) {\n      var rawBones = []\n\n      relationships.children.forEach(function(child) {\n        var boneNode = deformerNodes[child.ID]\n\n        if (boneNode.attrType !== 'Cluster') return\n\n        var rawBone = {\n          ID: child.ID,\n          indices: [],\n          weights: [],\n          transformLink: new Matrix4().fromArray(boneNode.TransformLink.a)\n          // transform: new Matrix4().fromArray( boneNode.Transform.a ),\n          // linkMode: boneNode.Mode,\n        }\n\n        if ('Indexes' in boneNode) {\n          rawBone.indices = boneNode.Indexes.a\n          rawBone.weights = boneNode.Weights.a\n        }\n\n        rawBones.push(rawBone)\n      })\n\n      return {\n        rawBones: rawBones,\n        bones: []\n      }\n    },\n\n    // The top level morph deformer node has type \"BlendShape\" and sub nodes have type \"BlendShapeChannel\"\n    parseMorphTargets: function(relationships, deformerNodes) {\n      var rawMorphTargets = []\n\n      for (var i = 0; i < relationships.children.length; i++) {\n        var child = relationships.children[i]\n\n        var morphTargetNode = deformerNodes[child.ID]\n\n        var rawMorphTarget = {\n          name: morphTargetNode.attrName,\n          initialWeight: morphTargetNode.DeformPercent,\n          id: morphTargetNode.id,\n          fullWeights: morphTargetNode.FullWeights.a\n        }\n\n        if (morphTargetNode.attrType !== 'BlendShapeChannel') return\n\n        rawMorphTarget.geoID = connections.get(parseInt(child.ID)).children.filter(function(child) {\n          return child.relationship === undefined\n        })[0].ID\n\n        rawMorphTargets.push(rawMorphTarget)\n      }\n\n      return rawMorphTargets\n    },\n\n    // create the main Group() to be returned by the loader\n    parseScene: function(deformers, geometryMap, materialMap) {\n      sceneGraph = new Group()\n\n      var modelMap = this.parseModels(deformers.skeletons, geometryMap, materialMap)\n\n      var modelNodes = fbxTree.Objects.Model\n\n      var self = this\n      modelMap.forEach(function(model) {\n        var modelNode = modelNodes[model.ID]\n        self.setLookAtProperties(model, modelNode)\n\n        var parentConnections = connections.get(model.ID).parents\n\n        parentConnections.forEach(function(connection) {\n          var parent = modelMap.get(connection.ID)\n          if (parent !== undefined) parent.add(model)\n        })\n\n        if (model.parent === null) {\n          sceneGraph.add(model)\n        }\n      })\n\n      this.bindSkeleton(deformers.skeletons, geometryMap, modelMap)\n\n      this.createAmbientLight()\n\n      this.setupMorphMaterials()\n\n      sceneGraph.traverse(function(node) {\n        if (node.userData.transformData) {\n          if (node.parent) node.userData.transformData.parentMatrixWorld = node.parent.matrix\n\n          var transform = generateTransform(node.userData.transformData)\n\n          node.applyMatrix(transform)\n        }\n      })\n\n      var animations = new AnimationParser().parse()\n\n      // if all the models where already combined in a single group, just return that\n      if (sceneGraph.children.length === 1 && sceneGraph.children[0].isGroup) {\n        sceneGraph.children[0].animations = animations\n        sceneGraph = sceneGraph.children[0]\n      }\n\n      sceneGraph.animations = animations\n    },\n\n    // parse nodes in FBXTree.Objects.Model\n    parseModels: function(skeletons, geometryMap, materialMap) {\n      var modelMap = new Map()\n      var modelNodes = fbxTree.Objects.Model\n\n      for (var nodeID in modelNodes) {\n        var id = parseInt(nodeID)\n        var node = modelNodes[nodeID]\n        var relationships = connections.get(id)\n\n        var model = this.buildSkeleton(relationships, skeletons, id, node.attrName)\n\n        if (!model) {\n          switch (node.attrType) {\n            case 'Camera':\n              model = this.createCamera(relationships)\n              break\n            case 'Light':\n              model = this.createLight(relationships)\n              break\n            case 'Mesh':\n              model = this.createMesh(relationships, geometryMap, materialMap)\n              break\n            case 'NurbsCurve':\n              model = this.createCurve(relationships, geometryMap)\n              break\n            case 'LimbNode':\n            case 'Root':\n              model = new Bone()\n              break\n            case 'Null':\n            default:\n              model = new Group()\n              break\n          }\n\n          model.name = PropertyBinding.sanitizeNodeName(node.attrName)\n          model.ID = id\n        }\n\n        this.getTransformData(model, node)\n        modelMap.set(id, model)\n      }\n\n      return modelMap\n    },\n\n    buildSkeleton: function(relationships, skeletons, id, name) {\n      var bone = null\n\n      relationships.parents.forEach(function(parent) {\n        for (var ID in skeletons) {\n          var skeleton = skeletons[ID]\n\n          skeleton.rawBones.forEach(function(rawBone, i) {\n            if (rawBone.ID === parent.ID) {\n              var subBone = bone\n              bone = new Bone()\n\n              bone.matrixWorld.copy(rawBone.transformLink)\n\n              // set name and id here - otherwise in cases where \"subBone\" is created it will not have a name / id\n              bone.name = PropertyBinding.sanitizeNodeName(name)\n              bone.ID = id\n\n              skeleton.bones[i] = bone\n\n              // In cases where a bone is shared between multiple meshes\n              // duplicate the bone here and and it as a child of the first bone\n              if (subBone !== null) {\n                bone.add(subBone)\n              }\n            }\n          })\n        }\n      })\n\n      return bone\n    },\n\n    // create a PerspectiveCamera or OrthographicCamera\n    createCamera: function(relationships) {\n      var model\n      var cameraAttribute\n\n      relationships.children.forEach(function(child) {\n        var attr = fbxTree.Objects.NodeAttribute[child.ID]\n\n        if (attr !== undefined) {\n          cameraAttribute = attr\n        }\n      })\n\n      if (cameraAttribute === undefined) {\n        model = new Object3D()\n      } else {\n        var type = 0\n        if (cameraAttribute.CameraProjectionType !== undefined && cameraAttribute.CameraProjectionType.value === 1) {\n          type = 1\n        }\n\n        var nearClippingPlane = 1\n        if (cameraAttribute.NearPlane !== undefined) {\n          nearClippingPlane = cameraAttribute.NearPlane.value / 1000\n        }\n\n        var farClippingPlane = 1000\n        if (cameraAttribute.FarPlane !== undefined) {\n          farClippingPlane = cameraAttribute.FarPlane.value / 1000\n        }\n\n        var width = window.innerWidth\n        var height = window.innerHeight\n\n        if (cameraAttribute.AspectWidth !== undefined && cameraAttribute.AspectHeight !== undefined) {\n          width = cameraAttribute.AspectWidth.value\n          height = cameraAttribute.AspectHeight.value\n        }\n\n        var aspect = width / height\n\n        var fov = 45\n        if (cameraAttribute.FieldOfView !== undefined) {\n          fov = cameraAttribute.FieldOfView.value\n        }\n\n        var focalLength = cameraAttribute.FocalLength ? cameraAttribute.FocalLength.value : null\n\n        switch (type) {\n          case 0: // Perspective\n            model = new PerspectiveCamera(fov, aspect, nearClippingPlane, farClippingPlane)\n            if (focalLength !== null) model.setFocalLength(focalLength)\n            break\n\n          case 1: // Orthographic\n            model = new OrthographicCamera(\n              -width / 2,\n              width / 2,\n              height / 2,\n              -height / 2,\n              nearClippingPlane,\n              farClippingPlane\n            )\n            break\n\n          default:\n            console.warn('THREE.FBXLoader: Unknown camera type ' + type + '.')\n            model = new Object3D()\n            break\n        }\n      }\n\n      return model\n    },\n\n    // Create a DirectionalLight, PointLight or SpotLight\n    createLight: function(relationships) {\n      var model\n      var lightAttribute\n\n      relationships.children.forEach(function(child) {\n        var attr = fbxTree.Objects.NodeAttribute[child.ID]\n\n        if (attr !== undefined) {\n          lightAttribute = attr\n        }\n      })\n\n      if (lightAttribute === undefined) {\n        model = new Object3D()\n      } else {\n        var type\n\n        // LightType can be undefined for Point lights\n        if (lightAttribute.LightType === undefined) {\n          type = 0\n        } else {\n          type = lightAttribute.LightType.value\n        }\n\n        var color = 0xffffff\n\n        if (lightAttribute.Color !== undefined) {\n          color = new Color().fromArray(lightAttribute.Color.value)\n        }\n\n        var intensity = lightAttribute.Intensity === undefined ? 1 : lightAttribute.Intensity.value / 100\n\n        // light disabled\n        if (lightAttribute.CastLightOnObject !== undefined && lightAttribute.CastLightOnObject.value === 0) {\n          intensity = 0\n        }\n\n        var distance = 0\n        if (lightAttribute.FarAttenuationEnd !== undefined) {\n          if (lightAttribute.EnableFarAttenuation !== undefined && lightAttribute.EnableFarAttenuation.value === 0) {\n            distance = 0\n          } else {\n            distance = lightAttribute.FarAttenuationEnd.value\n          }\n        }\n\n        // TODO: could this be calculated linearly from FarAttenuationStart to FarAttenuationEnd?\n        var decay = 1\n\n        switch (type) {\n          case 0: // Point\n            model = new PointLight(color, intensity, distance, decay)\n            break\n\n          case 1: // Directional\n            model = new DirectionalLight(color, intensity)\n            break\n\n          case 2: // Spot\n            var angle = Math.PI / 3\n\n            if (lightAttribute.InnerAngle !== undefined) {\n              angle = _Math.degToRad(lightAttribute.InnerAngle.value)\n            }\n\n            var penumbra = 0\n            if (lightAttribute.OuterAngle !== undefined) {\n              // TODO: this is not correct - FBX calculates outer and inner angle in degrees\n              // with OuterAngle > InnerAngle && OuterAngle <= Math.PI\n              // while three.js uses a penumbra between (0, 1) to attenuate the inner angle\n              penumbra = _Math.degToRad(lightAttribute.OuterAngle.value)\n              penumbra = Math.max(penumbra, 1)\n            }\n\n            model = new SpotLight(color, intensity, distance, angle, penumbra, decay)\n            break\n\n          default:\n            console.warn(\n              'THREE.FBXLoader: Unknown light type ' + lightAttribute.LightType.value + ', defaulting to a PointLight.'\n            )\n            model = new PointLight(color, intensity)\n            break\n        }\n\n        if (lightAttribute.CastShadows !== undefined && lightAttribute.CastShadows.value === 1) {\n          model.castShadow = true\n        }\n      }\n\n      return model\n    },\n\n    createMesh: function(relationships, geometryMap, materialMap) {\n      var model\n      var geometry = null\n      var material = null\n      var materials = []\n\n      // get geometry and materials(s) from connections\n      relationships.children.forEach(function(child) {\n        if (geometryMap.has(child.ID)) {\n          geometry = geometryMap.get(child.ID)\n        }\n\n        if (materialMap.has(child.ID)) {\n          materials.push(materialMap.get(child.ID))\n        }\n      })\n\n      if (materials.length > 1) {\n        material = materials\n      } else if (materials.length > 0) {\n        material = materials[0]\n      } else {\n        material = new MeshPhongMaterial({\n          color: 0xcccccc\n        })\n        materials.push(material)\n      }\n\n      if ('color' in geometry.attributes) {\n        materials.forEach(function(material) {\n          material.vertexColors = VertexColors\n        })\n      }\n\n      if (geometry.FBX_Deformer) {\n        materials.forEach(function(material) {\n          material.skinning = true\n        })\n\n        model = new SkinnedMesh(geometry, material)\n        model.normalizeSkinWeights()\n      } else {\n        model = new Mesh(geometry, material)\n      }\n\n      return model\n    },\n\n    createCurve: function(relationships, geometryMap) {\n      var geometry = relationships.children.reduce(function(geo, child) {\n        if (geometryMap.has(child.ID)) geo = geometryMap.get(child.ID)\n\n        return geo\n      }, null)\n\n      // FBX does not list materials for Nurbs lines, so we'll just put our own in here.\n      var material = new LineBasicMaterial({\n        color: 0x3300ff,\n        linewidth: 1\n      })\n      return new Line(geometry, material)\n    },\n\n    // parse the model node for transform data\n    getTransformData: function(model, modelNode) {\n      var transformData = {}\n\n      if ('InheritType' in modelNode) transformData.inheritType = parseInt(modelNode.InheritType.value)\n\n      if ('RotationOrder' in modelNode) transformData.eulerOrder = getEulerOrder(modelNode.RotationOrder.value)\n      else transformData.eulerOrder = 'ZYX'\n\n      if ('Lcl_Translation' in modelNode) transformData.translation = modelNode.Lcl_Translation.value\n\n      if ('PreRotation' in modelNode) transformData.preRotation = modelNode.PreRotation.value\n      if ('Lcl_Rotation' in modelNode) transformData.rotation = modelNode.Lcl_Rotation.value\n      if ('PostRotation' in modelNode) transformData.postRotation = modelNode.PostRotation.value\n\n      if ('Lcl_Scaling' in modelNode) transformData.scale = modelNode.Lcl_Scaling.value\n\n      if ('ScalingOffset' in modelNode) transformData.scalingOffset = modelNode.ScalingOffset.value\n      if ('ScalingPivot' in modelNode) transformData.scalingPivot = modelNode.ScalingPivot.value\n\n      if ('RotationOffset' in modelNode) transformData.rotationOffset = modelNode.RotationOffset.value\n      if ('RotationPivot' in modelNode) transformData.rotationPivot = modelNode.RotationPivot.value\n\n      model.userData.transformData = transformData\n    },\n\n    setLookAtProperties: function(model, modelNode) {\n      if ('LookAtProperty' in modelNode) {\n        var children = connections.get(model.ID).children\n\n        children.forEach(function(child) {\n          if (child.relationship === 'LookAtProperty') {\n            var lookAtTarget = fbxTree.Objects.Model[child.ID]\n\n            if ('Lcl_Translation' in lookAtTarget) {\n              var pos = lookAtTarget.Lcl_Translation.value\n\n              // DirectionalLight, SpotLight\n              if (model.target !== undefined) {\n                model.target.position.fromArray(pos)\n                sceneGraph.add(model.target)\n              } else {\n                // Cameras and other Object3Ds\n\n                model.lookAt(new Vector3().fromArray(pos))\n              }\n            }\n          }\n        })\n      }\n    },\n\n    bindSkeleton: function(skeletons, geometryMap, modelMap) {\n      var bindMatrices = this.parsePoseNodes()\n\n      for (var ID in skeletons) {\n        var skeleton = skeletons[ID]\n\n        var parents = connections.get(parseInt(skeleton.ID)).parents\n\n        parents.forEach(function(parent) {\n          if (geometryMap.has(parent.ID)) {\n            var geoID = parent.ID\n            var geoRelationships = connections.get(geoID)\n\n            geoRelationships.parents.forEach(function(geoConnParent) {\n              if (modelMap.has(geoConnParent.ID)) {\n                var model = modelMap.get(geoConnParent.ID)\n\n                model.bind(new Skeleton(skeleton.bones), bindMatrices[geoConnParent.ID])\n              }\n            })\n          }\n        })\n      }\n    },\n\n    parsePoseNodes: function() {\n      var bindMatrices = {}\n\n      if ('Pose' in fbxTree.Objects) {\n        var BindPoseNode = fbxTree.Objects.Pose\n\n        for (var nodeID in BindPoseNode) {\n          if (BindPoseNode[nodeID].attrType === 'BindPose') {\n            var poseNodes = BindPoseNode[nodeID].PoseNode\n\n            if (Array.isArray(poseNodes)) {\n              poseNodes.forEach(function(poseNode) {\n                bindMatrices[poseNode.Node] = new Matrix4().fromArray(poseNode.Matrix.a)\n              })\n            } else {\n              bindMatrices[poseNodes.Node] = new Matrix4().fromArray(poseNodes.Matrix.a)\n            }\n          }\n        }\n      }\n\n      return bindMatrices\n    },\n\n    // Parse ambient color in FBXTree.GlobalSettings - if it's not set to black (default), create an ambient light\n    createAmbientLight: function() {\n      if ('GlobalSettings' in fbxTree && 'AmbientColor' in fbxTree.GlobalSettings) {\n        var ambientColor = fbxTree.GlobalSettings.AmbientColor.value\n        var r = ambientColor[0]\n        var g = ambientColor[1]\n        var b = ambientColor[2]\n\n        if (r !== 0 || g !== 0 || b !== 0) {\n          var color = new Color(r, g, b)\n          sceneGraph.add(new AmbientLight(color, 1))\n        }\n      }\n    },\n\n    setupMorphMaterials: function() {\n      var self = this\n      sceneGraph.traverse(function(child) {\n        if (child.isMesh) {\n          if (child.geometry.morphAttributes.position && child.geometry.morphAttributes.position.length) {\n            if (Array.isArray(child.material)) {\n              child.material.forEach(function(material, i) {\n                self.setupMorphMaterial(child, material, i)\n              })\n            } else {\n              self.setupMorphMaterial(child, child.material)\n            }\n          }\n        }\n      })\n    },\n\n    setupMorphMaterial: function(child, material, index) {\n      var uuid = child.uuid\n      var matUuid = material.uuid\n\n      // if a geometry has morph targets, it cannot share the material with other geometries\n      var sharedMat = false\n\n      sceneGraph.traverse(function(node) {\n        if (node.isMesh) {\n          if (Array.isArray(node.material)) {\n            node.material.forEach(function(mat) {\n              if (mat.uuid === matUuid && node.uuid !== uuid) sharedMat = true\n            })\n          } else if (node.material.uuid === matUuid && node.uuid !== uuid) sharedMat = true\n        }\n      })\n\n      if (sharedMat === true) {\n        var clonedMat = material.clone()\n        clonedMat.morphTargets = true\n\n        if (index === undefined) child.material = clonedMat\n        else child.material[index] = clonedMat\n      } else material.morphTargets = true\n    }\n  }\n\n  // parse Geometry data from FBXTree and return map of BufferGeometries\n  function GeometryParser() {}\n\n  GeometryParser.prototype = {\n    constructor: GeometryParser,\n\n    // Parse nodes in FBXTree.Objects.Geometry\n    parse: function(deformers) {\n      var geometryMap = new Map()\n\n      if ('Geometry' in fbxTree.Objects) {\n        var geoNodes = fbxTree.Objects.Geometry\n\n        for (var nodeID in geoNodes) {\n          var relationships = connections.get(parseInt(nodeID))\n          var geo = this.parseGeometry(relationships, geoNodes[nodeID], deformers)\n\n          geometryMap.set(parseInt(nodeID), geo)\n        }\n      }\n\n      return geometryMap\n    },\n\n    // Parse single node in FBXTree.Objects.Geometry\n    parseGeometry: function(relationships, geoNode, deformers) {\n      switch (geoNode.attrType) {\n        case 'Mesh':\n          return this.parseMeshGeometry(relationships, geoNode, deformers)\n          break\n\n        case 'NurbsCurve':\n          return this.parseNurbsGeometry(geoNode)\n          break\n      }\n    },\n\n    // Parse single node mesh geometry in FBXTree.Objects.Geometry\n    parseMeshGeometry: function(relationships, geoNode, deformers) {\n      var skeletons = deformers.skeletons\n      var morphTargets = deformers.morphTargets\n\n      var modelNodes = relationships.parents.map(function(parent) {\n        return fbxTree.Objects.Model[parent.ID]\n      })\n\n      // don't create geometry if it is not associated with any models\n      if (modelNodes.length === 0) return\n\n      var skeleton = relationships.children.reduce(function(skeleton, child) {\n        if (skeletons[child.ID] !== undefined) skeleton = skeletons[child.ID]\n\n        return skeleton\n      }, null)\n\n      var morphTarget = relationships.children.reduce(function(morphTarget, child) {\n        if (morphTargets[child.ID] !== undefined) morphTarget = morphTargets[child.ID]\n\n        return morphTarget\n      }, null)\n\n      // Assume one model and get the preRotation from that\n      // if there is more than one model associated with the geometry this may cause problems\n      var modelNode = modelNodes[0]\n\n      var transformData = {}\n\n      if ('RotationOrder' in modelNode) transformData.eulerOrder = getEulerOrder(modelNode.RotationOrder.value)\n      if ('InheritType' in modelNode) transformData.inheritType = parseInt(modelNode.InheritType.value)\n\n      if ('GeometricTranslation' in modelNode) transformData.translation = modelNode.GeometricTranslation.value\n      if ('GeometricRotation' in modelNode) transformData.rotation = modelNode.GeometricRotation.value\n      if ('GeometricScaling' in modelNode) transformData.scale = modelNode.GeometricScaling.value\n\n      var transform = generateTransform(transformData)\n\n      return this.genGeometry(geoNode, skeleton, morphTarget, transform)\n    },\n\n    // Generate a BufferGeometry from a node in FBXTree.Objects.Geometry\n    genGeometry: function(geoNode, skeleton, morphTarget, preTransform) {\n      var geo = new BufferGeometry()\n      if (geoNode.attrName) geo.name = geoNode.attrName\n\n      var geoInfo = this.parseGeoNode(geoNode, skeleton)\n      var buffers = this.genBuffers(geoInfo)\n\n      var positionAttribute = new Float32BufferAttribute(buffers.vertex, 3)\n\n      preTransform.applyToBufferAttribute(positionAttribute)\n\n      geo.addAttribute('position', positionAttribute)\n\n      if (buffers.colors.length > 0) {\n        geo.addAttribute('color', new Float32BufferAttribute(buffers.colors, 3))\n      }\n\n      if (skeleton) {\n        geo.addAttribute('skinIndex', new Uint16BufferAttribute(buffers.weightsIndices, 4))\n\n        geo.addAttribute('skinWeight', new Float32BufferAttribute(buffers.vertexWeights, 4))\n\n        // used later to bind the skeleton to the model\n        geo.FBX_Deformer = skeleton\n      }\n\n      if (buffers.normal.length > 0) {\n        var normalAttribute = new Float32BufferAttribute(buffers.normal, 3)\n\n        var normalMatrix = new Matrix3().getNormalMatrix(preTransform)\n        normalMatrix.applyToBufferAttribute(normalAttribute)\n\n        geo.addAttribute('normal', normalAttribute)\n      }\n\n      buffers.uvs.forEach(function(uvBuffer, i) {\n        // subsequent uv buffers are called 'uv1', 'uv2', ...\n        var name = 'uv' + (i + 1).toString()\n\n        // the first uv buffer is just called 'uv'\n        if (i === 0) {\n          name = 'uv'\n        }\n\n        geo.addAttribute(name, new Float32BufferAttribute(buffers.uvs[i], 2))\n      })\n\n      if (geoInfo.material && geoInfo.material.mappingType !== 'AllSame') {\n        // Convert the material indices of each vertex into rendering groups on the geometry.\n        var prevMaterialIndex = buffers.materialIndex[0]\n        var startIndex = 0\n\n        buffers.materialIndex.forEach(function(currentIndex, i) {\n          if (currentIndex !== prevMaterialIndex) {\n            geo.addGroup(startIndex, i - startIndex, prevMaterialIndex)\n\n            prevMaterialIndex = currentIndex\n            startIndex = i\n          }\n        })\n\n        // the loop above doesn't add the last group, do that here.\n        if (geo.groups.length > 0) {\n          var lastGroup = geo.groups[geo.groups.length - 1]\n          var lastIndex = lastGroup.start + lastGroup.count\n\n          if (lastIndex !== buffers.materialIndex.length) {\n            geo.addGroup(lastIndex, buffers.materialIndex.length - lastIndex, prevMaterialIndex)\n          }\n        }\n\n        // case where there are multiple materials but the whole geometry is only\n        // using one of them\n        if (geo.groups.length === 0) {\n          geo.addGroup(0, buffers.materialIndex.length, buffers.materialIndex[0])\n        }\n      }\n\n      this.addMorphTargets(geo, geoNode, morphTarget, preTransform)\n\n      return geo\n    },\n\n    parseGeoNode: function(geoNode, skeleton) {\n      var geoInfo = {}\n\n      geoInfo.vertexPositions = geoNode.Vertices !== undefined ? geoNode.Vertices.a : []\n      geoInfo.vertexIndices = geoNode.PolygonVertexIndex !== undefined ? geoNode.PolygonVertexIndex.a : []\n\n      if (geoNode.LayerElementColor) {\n        geoInfo.color = this.parseVertexColors(geoNode.LayerElementColor[0])\n      }\n\n      if (geoNode.LayerElementMaterial) {\n        geoInfo.material = this.parseMaterialIndices(geoNode.LayerElementMaterial[0])\n      }\n\n      if (geoNode.LayerElementNormal) {\n        geoInfo.normal = this.parseNormals(geoNode.LayerElementNormal[0])\n      }\n\n      if (geoNode.LayerElementUV) {\n        geoInfo.uv = []\n\n        var i = 0\n        while (geoNode.LayerElementUV[i]) {\n          geoInfo.uv.push(this.parseUVs(geoNode.LayerElementUV[i]))\n          i++\n        }\n      }\n\n      geoInfo.weightTable = {}\n\n      if (skeleton !== null) {\n        geoInfo.skeleton = skeleton\n\n        skeleton.rawBones.forEach(function(rawBone, i) {\n          // loop over the bone's vertex indices and weights\n          rawBone.indices.forEach(function(index, j) {\n            if (geoInfo.weightTable[index] === undefined) geoInfo.weightTable[index] = []\n\n            geoInfo.weightTable[index].push({\n              id: i,\n              weight: rawBone.weights[j]\n            })\n          })\n        })\n      }\n\n      return geoInfo\n    },\n\n    genBuffers: function(geoInfo) {\n      var buffers = {\n        vertex: [],\n        normal: [],\n        colors: [],\n        uvs: [],\n        materialIndex: [],\n        vertexWeights: [],\n        weightsIndices: []\n      }\n\n      var polygonIndex = 0\n      var faceLength = 0\n      var displayedWeightsWarning = false\n\n      // these will hold data for a single face\n      var facePositionIndexes = []\n      var faceNormals = []\n      var faceColors = []\n      var faceUVs = []\n      var faceWeights = []\n      var faceWeightIndices = []\n\n      var self = this\n      geoInfo.vertexIndices.forEach(function(vertexIndex, polygonVertexIndex) {\n        var endOfFace = false\n\n        // Face index and vertex index arrays are combined in a single array\n        // A cube with quad faces looks like this:\n        // PolygonVertexIndex: *24 {\n        //  a: 0, 1, 3, -3, 2, 3, 5, -5, 4, 5, 7, -7, 6, 7, 1, -1, 1, 7, 5, -4, 6, 0, 2, -5\n        //  }\n        // Negative numbers mark the end of a face - first face here is 0, 1, 3, -3\n        // to find index of last vertex bit shift the index: ^ - 1\n        if (vertexIndex < 0) {\n          vertexIndex = vertexIndex ^ -1 // equivalent to ( x * -1 ) - 1\n          endOfFace = true\n        }\n\n        var weightIndices = []\n        var weights = []\n\n        facePositionIndexes.push(vertexIndex * 3, vertexIndex * 3 + 1, vertexIndex * 3 + 2)\n\n        if (geoInfo.color) {\n          var data = getData(polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.color)\n\n          faceColors.push(data[0], data[1], data[2])\n        }\n\n        if (geoInfo.skeleton) {\n          if (geoInfo.weightTable[vertexIndex] !== undefined) {\n            geoInfo.weightTable[vertexIndex].forEach(function(wt) {\n              weights.push(wt.weight)\n              weightIndices.push(wt.id)\n            })\n          }\n\n          if (weights.length > 4) {\n            if (!displayedWeightsWarning) {\n              console.warn(\n                'THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights.'\n              )\n              displayedWeightsWarning = true\n            }\n\n            var wIndex = [0, 0, 0, 0]\n            var Weight = [0, 0, 0, 0]\n\n            weights.forEach(function(weight, weightIndex) {\n              var currentWeight = weight\n              var currentIndex = weightIndices[weightIndex]\n\n              Weight.forEach(function(comparedWeight, comparedWeightIndex, comparedWeightArray) {\n                if (currentWeight > comparedWeight) {\n                  comparedWeightArray[comparedWeightIndex] = currentWeight\n                  currentWeight = comparedWeight\n\n                  var tmp = wIndex[comparedWeightIndex]\n                  wIndex[comparedWeightIndex] = currentIndex\n                  currentIndex = tmp\n                }\n              })\n            })\n\n            weightIndices = wIndex\n            weights = Weight\n          }\n\n          // if the weight array is shorter than 4 pad with 0s\n          while (weights.length < 4) {\n            weights.push(0)\n            weightIndices.push(0)\n          }\n\n          for (var i = 0; i < 4; ++i) {\n            faceWeights.push(weights[i])\n            faceWeightIndices.push(weightIndices[i])\n          }\n        }\n\n        if (geoInfo.normal) {\n          var data = getData(polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.normal)\n\n          faceNormals.push(data[0], data[1], data[2])\n        }\n\n        if (geoInfo.material && geoInfo.material.mappingType !== 'AllSame') {\n          var materialIndex = getData(polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.material)[0]\n        }\n\n        if (geoInfo.uv) {\n          geoInfo.uv.forEach(function(uv, i) {\n            var data = getData(polygonVertexIndex, polygonIndex, vertexIndex, uv)\n\n            if (faceUVs[i] === undefined) {\n              faceUVs[i] = []\n            }\n\n            faceUVs[i].push(data[0])\n            faceUVs[i].push(data[1])\n          })\n        }\n\n        faceLength++\n\n        if (endOfFace) {\n          self.genFace(\n            buffers,\n            geoInfo,\n            facePositionIndexes,\n            materialIndex,\n            faceNormals,\n            faceColors,\n            faceUVs,\n            faceWeights,\n            faceWeightIndices,\n            faceLength\n          )\n\n          polygonIndex++\n          faceLength = 0\n\n          // reset arrays for the next face\n          facePositionIndexes = []\n          faceNormals = []\n          faceColors = []\n          faceUVs = []\n          faceWeights = []\n          faceWeightIndices = []\n        }\n      })\n\n      return buffers\n    },\n\n    // Generate data for a single face in a geometry. If the face is a quad then split it into 2 tris\n    genFace: function(\n      buffers,\n      geoInfo,\n      facePositionIndexes,\n      materialIndex,\n      faceNormals,\n      faceColors,\n      faceUVs,\n      faceWeights,\n      faceWeightIndices,\n      faceLength\n    ) {\n      for (var i = 2; i < faceLength; i++) {\n        buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[0]])\n        buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[1]])\n        buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[2]])\n\n        buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[(i - 1) * 3]])\n        buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[(i - 1) * 3 + 1]])\n        buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[(i - 1) * 3 + 2]])\n\n        buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[i * 3]])\n        buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[i * 3 + 1]])\n        buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[i * 3 + 2]])\n\n        if (geoInfo.skeleton) {\n          buffers.vertexWeights.push(faceWeights[0])\n          buffers.vertexWeights.push(faceWeights[1])\n          buffers.vertexWeights.push(faceWeights[2])\n          buffers.vertexWeights.push(faceWeights[3])\n\n          buffers.vertexWeights.push(faceWeights[(i - 1) * 4])\n          buffers.vertexWeights.push(faceWeights[(i - 1) * 4 + 1])\n          buffers.vertexWeights.push(faceWeights[(i - 1) * 4 + 2])\n          buffers.vertexWeights.push(faceWeights[(i - 1) * 4 + 3])\n\n          buffers.vertexWeights.push(faceWeights[i * 4])\n          buffers.vertexWeights.push(faceWeights[i * 4 + 1])\n          buffers.vertexWeights.push(faceWeights[i * 4 + 2])\n          buffers.vertexWeights.push(faceWeights[i * 4 + 3])\n\n          buffers.weightsIndices.push(faceWeightIndices[0])\n          buffers.weightsIndices.push(faceWeightIndices[1])\n          buffers.weightsIndices.push(faceWeightIndices[2])\n          buffers.weightsIndices.push(faceWeightIndices[3])\n\n          buffers.weightsIndices.push(faceWeightIndices[(i - 1) * 4])\n          buffers.weightsIndices.push(faceWeightIndices[(i - 1) * 4 + 1])\n          buffers.weightsIndices.push(faceWeightIndices[(i - 1) * 4 + 2])\n          buffers.weightsIndices.push(faceWeightIndices[(i - 1) * 4 + 3])\n\n          buffers.weightsIndices.push(faceWeightIndices[i * 4])\n          buffers.weightsIndices.push(faceWeightIndices[i * 4 + 1])\n          buffers.weightsIndices.push(faceWeightIndices[i * 4 + 2])\n          buffers.weightsIndices.push(faceWeightIndices[i * 4 + 3])\n        }\n\n        if (geoInfo.color) {\n          buffers.colors.push(faceColors[0])\n          buffers.colors.push(faceColors[1])\n          buffers.colors.push(faceColors[2])\n\n          buffers.colors.push(faceColors[(i - 1) * 3])\n          buffers.colors.push(faceColors[(i - 1) * 3 + 1])\n          buffers.colors.push(faceColors[(i - 1) * 3 + 2])\n\n          buffers.colors.push(faceColors[i * 3])\n          buffers.colors.push(faceColors[i * 3 + 1])\n          buffers.colors.push(faceColors[i * 3 + 2])\n        }\n\n        if (geoInfo.material && geoInfo.material.mappingType !== 'AllSame') {\n          buffers.materialIndex.push(materialIndex)\n          buffers.materialIndex.push(materialIndex)\n          buffers.materialIndex.push(materialIndex)\n        }\n\n        if (geoInfo.normal) {\n          buffers.normal.push(faceNormals[0])\n          buffers.normal.push(faceNormals[1])\n          buffers.normal.push(faceNormals[2])\n\n          buffers.normal.push(faceNormals[(i - 1) * 3])\n          buffers.normal.push(faceNormals[(i - 1) * 3 + 1])\n          buffers.normal.push(faceNormals[(i - 1) * 3 + 2])\n\n          buffers.normal.push(faceNormals[i * 3])\n          buffers.normal.push(faceNormals[i * 3 + 1])\n          buffers.normal.push(faceNormals[i * 3 + 2])\n        }\n\n        if (geoInfo.uv) {\n          geoInfo.uv.forEach(function(uv, j) {\n            if (buffers.uvs[j] === undefined) buffers.uvs[j] = []\n\n            buffers.uvs[j].push(faceUVs[j][0])\n            buffers.uvs[j].push(faceUVs[j][1])\n\n            buffers.uvs[j].push(faceUVs[j][(i - 1) * 2])\n            buffers.uvs[j].push(faceUVs[j][(i - 1) * 2 + 1])\n\n            buffers.uvs[j].push(faceUVs[j][i * 2])\n            buffers.uvs[j].push(faceUVs[j][i * 2 + 1])\n          })\n        }\n      }\n    },\n\n    addMorphTargets: function(parentGeo, parentGeoNode, morphTarget, preTransform) {\n      if (morphTarget === null) return\n\n      parentGeo.morphAttributes.position = []\n      // parentGeo.morphAttributes.normal = []; // not implemented\n\n      var self = this\n      morphTarget.rawTargets.forEach(function(rawTarget) {\n        var morphGeoNode = fbxTree.Objects.Geometry[rawTarget.geoID]\n\n        if (morphGeoNode !== undefined) {\n          self.genMorphGeometry(parentGeo, parentGeoNode, morphGeoNode, preTransform, rawTarget.name)\n        }\n      })\n    },\n\n    // a morph geometry node is similar to a standard  node, and the node is also contained\n    // in FBXTree.Objects.Geometry, however it can only have attributes for position, normal\n    // and a special attribute Index defining which vertices of the original geometry are affected\n    // Normal and position attributes only have data for the vertices that are affected by the morph\n    genMorphGeometry: function(parentGeo, parentGeoNode, morphGeoNode, preTransform, name) {\n      var morphGeo = new BufferGeometry()\n      if (morphGeoNode.attrName) morphGeo.name = morphGeoNode.attrName\n\n      var vertexIndices = parentGeoNode.PolygonVertexIndex !== undefined ? parentGeoNode.PolygonVertexIndex.a : []\n\n      // make a copy of the parent's vertex positions\n      var vertexPositions = parentGeoNode.Vertices !== undefined ? parentGeoNode.Vertices.a.slice() : []\n\n      var morphPositions = morphGeoNode.Vertices !== undefined ? morphGeoNode.Vertices.a : []\n      var indices = morphGeoNode.Indexes !== undefined ? morphGeoNode.Indexes.a : []\n\n      for (var i = 0; i < indices.length; i++) {\n        var morphIndex = indices[i] * 3\n\n        // FBX format uses blend shapes rather than morph targets. This can be converted\n        // by additively combining the blend shape positions with the original geometry's positions\n        vertexPositions[morphIndex] += morphPositions[i * 3]\n        vertexPositions[morphIndex + 1] += morphPositions[i * 3 + 1]\n        vertexPositions[morphIndex + 2] += morphPositions[i * 3 + 2]\n      }\n\n      // TODO: add morph normal support\n      var morphGeoInfo = {\n        vertexIndices: vertexIndices,\n        vertexPositions: vertexPositions\n      }\n\n      var morphBuffers = this.genBuffers(morphGeoInfo)\n\n      var positionAttribute = new Float32BufferAttribute(morphBuffers.vertex, 3)\n      positionAttribute.name = name || morphGeoNode.attrName\n\n      preTransform.applyToBufferAttribute(positionAttribute)\n\n      parentGeo.morphAttributes.position.push(positionAttribute)\n    },\n\n    // Parse normal from FBXTree.Objects.Geometry.LayerElementNormal if it exists\n    parseNormals: function(NormalNode) {\n      var mappingType = NormalNode.MappingInformationType\n      var referenceType = NormalNode.ReferenceInformationType\n      var buffer = NormalNode.Normals.a\n      var indexBuffer = []\n      if (referenceType === 'IndexToDirect') {\n        if ('NormalIndex' in NormalNode) {\n          indexBuffer = NormalNode.NormalIndex.a\n        } else if ('NormalsIndex' in NormalNode) {\n          indexBuffer = NormalNode.NormalsIndex.a\n        }\n      }\n\n      return {\n        dataSize: 3,\n        buffer: buffer,\n        indices: indexBuffer,\n        mappingType: mappingType,\n        referenceType: referenceType\n      }\n    },\n\n    // Parse UVs from FBXTree.Objects.Geometry.LayerElementUV if it exists\n    parseUVs: function(UVNode) {\n      var mappingType = UVNode.MappingInformationType\n      var referenceType = UVNode.ReferenceInformationType\n      var buffer = UVNode.UV.a\n      var indexBuffer = []\n      if (referenceType === 'IndexToDirect') {\n        indexBuffer = UVNode.UVIndex.a\n      }\n\n      return {\n        dataSize: 2,\n        buffer: buffer,\n        indices: indexBuffer,\n        mappingType: mappingType,\n        referenceType: referenceType\n      }\n    },\n\n    // Parse Vertex Colors from FBXTree.Objects.Geometry.LayerElementColor if it exists\n    parseVertexColors: function(ColorNode) {\n      var mappingType = ColorNode.MappingInformationType\n      var referenceType = ColorNode.ReferenceInformationType\n      var buffer = ColorNode.Colors.a\n      var indexBuffer = []\n      if (referenceType === 'IndexToDirect') {\n        indexBuffer = ColorNode.ColorIndex.a\n      }\n\n      return {\n        dataSize: 4,\n        buffer: buffer,\n        indices: indexBuffer,\n        mappingType: mappingType,\n        referenceType: referenceType\n      }\n    },\n\n    // Parse mapping and material data in FBXTree.Objects.Geometry.LayerElementMaterial if it exists\n    parseMaterialIndices: function(MaterialNode) {\n      var mappingType = MaterialNode.MappingInformationType\n      var referenceType = MaterialNode.ReferenceInformationType\n\n      if (mappingType === 'NoMappingInformation') {\n        return {\n          dataSize: 1,\n          buffer: [0],\n          indices: [0],\n          mappingType: 'AllSame',\n          referenceType: referenceType\n        }\n      }\n\n      var materialIndexBuffer = MaterialNode.Materials.a\n\n      // Since materials are stored as indices, there's a bit of a mismatch between FBX and what\n      // we expect.So we create an intermediate buffer that points to the index in the buffer,\n      // for conforming with the other functions we've written for other data.\n      var materialIndices = []\n\n      for (var i = 0; i < materialIndexBuffer.length; ++i) {\n        materialIndices.push(i)\n      }\n\n      return {\n        dataSize: 1,\n        buffer: materialIndexBuffer,\n        indices: materialIndices,\n        mappingType: mappingType,\n        referenceType: referenceType\n      }\n    },\n\n    // Generate a NurbGeometry from a node in FBXTree.Objects.Geometry\n    parseNurbsGeometry: function(geoNode) {\n      if (NURBSCurve === undefined) {\n        console.error(\n          'THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry.'\n        )\n        return new BufferGeometry()\n      }\n\n      var order = parseInt(geoNode.Order)\n\n      if (isNaN(order)) {\n        console.error('THREE.FBXLoader: Invalid Order %s given for geometry ID: %s', geoNode.Order, geoNode.id)\n        return new BufferGeometry()\n      }\n\n      var degree = order - 1\n\n      var knots = geoNode.KnotVector.a\n      var controlPoints = []\n      var pointsValues = geoNode.Points.a\n\n      for (var i = 0, l = pointsValues.length; i < l; i += 4) {\n        controlPoints.push(new Vector4().fromArray(pointsValues, i))\n      }\n\n      var startKnot, endKnot\n\n      if (geoNode.Form === 'Closed') {\n        controlPoints.push(controlPoints[0])\n      } else if (geoNode.Form === 'Periodic') {\n        startKnot = degree\n        endKnot = knots.length - 1 - startKnot\n\n        for (var i = 0; i < degree; ++i) {\n          controlPoints.push(controlPoints[i])\n        }\n      }\n\n      var curve = new NURBSCurve(degree, knots, controlPoints, startKnot, endKnot)\n      var vertices = curve.getPoints(controlPoints.length * 7)\n\n      var positions = new Float32Array(vertices.length * 3)\n\n      vertices.forEach(function(vertex, i) {\n        vertex.toArray(positions, i * 3)\n      })\n\n      var geometry = new BufferGeometry()\n      geometry.addAttribute('position', new BufferAttribute(positions, 3))\n\n      return geometry\n    }\n  }\n\n  // parse animation data from FBXTree\n  function AnimationParser() {}\n\n  AnimationParser.prototype = {\n    constructor: AnimationParser,\n\n    // take raw animation clips and turn them into three.js animation clips\n    parse: function() {\n      var animationClips = []\n\n      var rawClips = this.parseClips()\n\n      if (rawClips !== undefined) {\n        for (var key in rawClips) {\n          var rawClip = rawClips[key]\n\n          var clip = this.addClip(rawClip)\n\n          animationClips.push(clip)\n        }\n      }\n\n      return animationClips\n    },\n\n    parseClips: function() {\n      // since the actual transformation data is stored in FBXTree.Objects.AnimationCurve,\n      // if this is undefined we can safely assume there are no animations\n      if (fbxTree.Objects.AnimationCurve === undefined) return undefined\n\n      var curveNodesMap = this.parseAnimationCurveNodes()\n\n      this.parseAnimationCurves(curveNodesMap)\n\n      var layersMap = this.parseAnimationLayers(curveNodesMap)\n      var rawClips = this.parseAnimStacks(layersMap)\n\n      return rawClips\n    },\n\n    // parse nodes in FBXTree.Objects.AnimationCurveNode\n    // each AnimationCurveNode holds data for an animation transform for a model (e.g. left arm rotation )\n    // and is referenced by an AnimationLayer\n    parseAnimationCurveNodes: function() {\n      var rawCurveNodes = fbxTree.Objects.AnimationCurveNode\n\n      var curveNodesMap = new Map()\n\n      for (var nodeID in rawCurveNodes) {\n        var rawCurveNode = rawCurveNodes[nodeID]\n\n        if (rawCurveNode.attrName.match(/S|R|T|DeformPercent/) !== null) {\n          var curveNode = {\n            id: rawCurveNode.id,\n            attr: rawCurveNode.attrName,\n            curves: {}\n          }\n\n          curveNodesMap.set(curveNode.id, curveNode)\n        }\n      }\n\n      return curveNodesMap\n    },\n\n    // parse nodes in FBXTree.Objects.AnimationCurve and connect them up to\n    // previously parsed AnimationCurveNodes. Each AnimationCurve holds data for a single animated\n    // axis ( e.g. times and values of x rotation)\n    parseAnimationCurves: function(curveNodesMap) {\n      var rawCurves = fbxTree.Objects.AnimationCurve\n\n      // TODO: Many values are identical up to roundoff error, but won't be optimised\n      // e.g. position times: [0, 0.4, 0. 8]\n      // position values: [7.23538335023477e-7, 93.67518615722656, -0.9982695579528809, 7.23538335023477e-7, 93.67518615722656, -0.9982695579528809, 7.235384487103147e-7, 93.67520904541016, -0.9982695579528809]\n      // clearly, this should be optimised to\n      // times: [0], positions [7.23538335023477e-7, 93.67518615722656, -0.9982695579528809]\n      // this shows up in nearly every FBX file, and generally time array is length > 100\n\n      for (var nodeID in rawCurves) {\n        var animationCurve = {\n          id: rawCurves[nodeID].id,\n          times: rawCurves[nodeID].KeyTime.a.map(convertFBXTimeToSeconds),\n          values: rawCurves[nodeID].KeyValueFloat.a\n        }\n\n        var relationships = connections.get(animationCurve.id)\n\n        if (relationships !== undefined) {\n          var animationCurveID = relationships.parents[0].ID\n          var animationCurveRelationship = relationships.parents[0].relationship\n\n          if (animationCurveRelationship.match(/X/)) {\n            curveNodesMap.get(animationCurveID).curves['x'] = animationCurve\n          } else if (animationCurveRelationship.match(/Y/)) {\n            curveNodesMap.get(animationCurveID).curves['y'] = animationCurve\n          } else if (animationCurveRelationship.match(/Z/)) {\n            curveNodesMap.get(animationCurveID).curves['z'] = animationCurve\n          } else if (animationCurveRelationship.match(/d|DeformPercent/) && curveNodesMap.has(animationCurveID)) {\n            curveNodesMap.get(animationCurveID).curves['morph'] = animationCurve\n          }\n        }\n      }\n    },\n\n    // parse nodes in FBXTree.Objects.AnimationLayer. Each layers holds references\n    // to various AnimationCurveNodes and is referenced by an AnimationStack node\n    // note: theoretically a stack can have multiple layers, however in practice there always seems to be one per stack\n    parseAnimationLayers: function(curveNodesMap) {\n      var rawLayers = fbxTree.Objects.AnimationLayer\n\n      var layersMap = new Map()\n\n      for (var nodeID in rawLayers) {\n        var layerCurveNodes = []\n\n        var connection = connections.get(parseInt(nodeID))\n\n        if (connection !== undefined) {\n          // all the animationCurveNodes used in the layer\n          var children = connection.children\n\n          children.forEach(function(child, i) {\n            if (curveNodesMap.has(child.ID)) {\n              var curveNode = curveNodesMap.get(child.ID)\n\n              // check that the curves are defined for at least one axis, otherwise ignore the curveNode\n              if (\n                curveNode.curves.x !== undefined ||\n                curveNode.curves.y !== undefined ||\n                curveNode.curves.z !== undefined\n              ) {\n                if (layerCurveNodes[i] === undefined) {\n                  var modelID = connections.get(child.ID).parents.filter(function(parent) {\n                    return parent.relationship !== undefined\n                  })[0].ID\n\n                  if (modelID !== undefined) {\n                    var rawModel = fbxTree.Objects.Model[modelID.toString()]\n\n                    var node = {\n                      modelName: PropertyBinding.sanitizeNodeName(rawModel.attrName),\n                      ID: rawModel.id,\n                      initialPosition: [0, 0, 0],\n                      initialRotation: [0, 0, 0],\n                      initialScale: [1, 1, 1]\n                    }\n\n                    sceneGraph.traverse(function(child) {\n                      if (child.ID === rawModel.id) {\n                        node.transform = child.matrix\n\n                        if (child.userData.transformData) node.eulerOrder = child.userData.transformData.eulerOrder\n                      }\n                    })\n\n                    if (!node.transform) node.transform = new Matrix4()\n\n                    // if the animated model is pre rotated, we'll have to apply the pre rotations to every\n                    // animation value as well\n                    if ('PreRotation' in rawModel) node.preRotation = rawModel.PreRotation.value\n                    if ('PostRotation' in rawModel) node.postRotation = rawModel.PostRotation.value\n\n                    layerCurveNodes[i] = node\n                  }\n                }\n\n                if (layerCurveNodes[i]) layerCurveNodes[i][curveNode.attr] = curveNode\n              } else if (curveNode.curves.morph !== undefined) {\n                if (layerCurveNodes[i] === undefined) {\n                  var deformerID = connections.get(child.ID).parents.filter(function(parent) {\n                    return parent.relationship !== undefined\n                  })[0].ID\n\n                  var morpherID = connections.get(deformerID).parents[0].ID\n                  var geoID = connections.get(morpherID).parents[0].ID\n\n                  // assuming geometry is not used in more than one model\n                  var modelID = connections.get(geoID).parents[0].ID\n\n                  var rawModel = fbxTree.Objects.Model[modelID]\n\n                  var node = {\n                    modelName: PropertyBinding.sanitizeNodeName(rawModel.attrName),\n                    morphName: fbxTree.Objects.Deformer[deformerID].attrName\n                  }\n\n                  layerCurveNodes[i] = node\n                }\n\n                layerCurveNodes[i][curveNode.attr] = curveNode\n              }\n            }\n          })\n\n          layersMap.set(parseInt(nodeID), layerCurveNodes)\n        }\n      }\n\n      return layersMap\n    },\n\n    // parse nodes in FBXTree.Objects.AnimationStack. These are the top level node in the animation\n    // hierarchy. Each Stack node will be used to create a AnimationClip\n    parseAnimStacks: function(layersMap) {\n      var rawStacks = fbxTree.Objects.AnimationStack\n\n      // connect the stacks (clips) up to the layers\n      var rawClips = {}\n\n      for (var nodeID in rawStacks) {\n        var children = connections.get(parseInt(nodeID)).children\n\n        if (children.length > 1) {\n          // it seems like stacks will always be associated with a single layer. But just in case there are files\n          // where there are multiple layers per stack, we'll display a warning\n          console.warn(\n            'THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.'\n          )\n        }\n\n        var layer = layersMap.get(children[0].ID)\n\n        rawClips[nodeID] = {\n          name: rawStacks[nodeID].attrName,\n          layer: layer\n        }\n      }\n\n      return rawClips\n    },\n\n    addClip: function(rawClip) {\n      var tracks = []\n\n      var self = this\n      rawClip.layer.forEach(function(rawTracks) {\n        tracks = tracks.concat(self.generateTracks(rawTracks))\n      })\n\n      return new AnimationClip(rawClip.name, -1, tracks)\n    },\n\n    generateTracks: function(rawTracks) {\n      var tracks = []\n\n      var initialPosition = new Vector3()\n      var initialRotation = new Quaternion()\n      var initialScale = new Vector3()\n\n      if (rawTracks.transform) rawTracks.transform.decompose(initialPosition, initialRotation, initialScale)\n\n      initialPosition = initialPosition.toArray()\n      initialRotation = new Euler().setFromQuaternion(initialRotation, rawTracks.eulerOrder).toArray()\n      initialScale = initialScale.toArray()\n\n      if (rawTracks.T !== undefined && Object.keys(rawTracks.T.curves).length > 0) {\n        var positionTrack = this.generateVectorTrack(\n          rawTracks.modelName,\n          rawTracks.T.curves,\n          initialPosition,\n          'position'\n        )\n        if (positionTrack !== undefined) tracks.push(positionTrack)\n      }\n\n      if (rawTracks.R !== undefined && Object.keys(rawTracks.R.curves).length > 0) {\n        var rotationTrack = this.generateRotationTrack(\n          rawTracks.modelName,\n          rawTracks.R.curves,\n          initialRotation,\n          rawTracks.preRotation,\n          rawTracks.postRotation,\n          rawTracks.eulerOrder\n        )\n        if (rotationTrack !== undefined) tracks.push(rotationTrack)\n      }\n\n      if (rawTracks.S !== undefined && Object.keys(rawTracks.S.curves).length > 0) {\n        var scaleTrack = this.generateVectorTrack(rawTracks.modelName, rawTracks.S.curves, initialScale, 'scale')\n        if (scaleTrack !== undefined) tracks.push(scaleTrack)\n      }\n\n      if (rawTracks.DeformPercent !== undefined) {\n        var morphTrack = this.generateMorphTrack(rawTracks)\n        if (morphTrack !== undefined) tracks.push(morphTrack)\n      }\n\n      return tracks\n    },\n\n    generateVectorTrack: function(modelName, curves, initialValue, type) {\n      var times = this.getTimesForAllAxes(curves)\n      var values = this.getKeyframeTrackValues(times, curves, initialValue)\n\n      return new VectorKeyframeTrack(modelName + '.' + type, times, values)\n    },\n\n    generateRotationTrack: function(modelName, curves, initialValue, preRotation, postRotation, eulerOrder) {\n      if (curves.x !== undefined) {\n        this.interpolateRotations(curves.x)\n        curves.x.values = curves.x.values.map(_Math.degToRad)\n      }\n      if (curves.y !== undefined) {\n        this.interpolateRotations(curves.y)\n        curves.y.values = curves.y.values.map(_Math.degToRad)\n      }\n      if (curves.z !== undefined) {\n        this.interpolateRotations(curves.z)\n        curves.z.values = curves.z.values.map(_Math.degToRad)\n      }\n\n      var times = this.getTimesForAllAxes(curves)\n      var values = this.getKeyframeTrackValues(times, curves, initialValue)\n\n      if (preRotation !== undefined) {\n        preRotation = preRotation.map(_Math.degToRad)\n        preRotation.push(eulerOrder)\n\n        preRotation = new Euler().fromArray(preRotation)\n        preRotation = new Quaternion().setFromEuler(preRotation)\n      }\n\n      if (postRotation !== undefined) {\n        postRotation = postRotation.map(_Math.degToRad)\n        postRotation.push(eulerOrder)\n\n        postRotation = new Euler().fromArray(postRotation)\n        postRotation = new Quaternion().setFromEuler(postRotation).inverse()\n      }\n\n      var quaternion = new Quaternion()\n      var euler = new Euler()\n\n      var quaternionValues = []\n\n      for (var i = 0; i < values.length; i += 3) {\n        euler.set(values[i], values[i + 1], values[i + 2], eulerOrder)\n\n        quaternion.setFromEuler(euler)\n\n        if (preRotation !== undefined) quaternion.premultiply(preRotation)\n        if (postRotation !== undefined) quaternion.multiply(postRotation)\n\n        quaternion.toArray(quaternionValues, (i / 3) * 4)\n      }\n\n      return new QuaternionKeyframeTrack(modelName + '.quaternion', times, quaternionValues)\n    },\n\n    generateMorphTrack: function(rawTracks) {\n      var curves = rawTracks.DeformPercent.curves.morph\n      var values = curves.values.map(function(val) {\n        return val / 100\n      })\n\n      var morphNum = sceneGraph.getObjectByName(rawTracks.modelName).morphTargetDictionary[rawTracks.morphName]\n\n      return new NumberKeyframeTrack(\n        rawTracks.modelName + '.morphTargetInfluences[' + morphNum + ']',\n        curves.times,\n        values\n      )\n    },\n\n    // For all animated objects, times are defined separately for each axis\n    // Here we'll combine the times into one sorted array without duplicates\n    getTimesForAllAxes: function(curves) {\n      var times = []\n\n      // first join together the times for each axis, if defined\n      if (curves.x !== undefined) times = times.concat(curves.x.times)\n      if (curves.y !== undefined) times = times.concat(curves.y.times)\n      if (curves.z !== undefined) times = times.concat(curves.z.times)\n\n      // then sort them and remove duplicates\n      times = times\n        .sort(function(a, b) {\n          return a - b\n        })\n        .filter(function(elem, index, array) {\n          return array.indexOf(elem) == index\n        })\n\n      return times\n    },\n\n    getKeyframeTrackValues: function(times, curves, initialValue) {\n      var prevValue = initialValue\n\n      var values = []\n\n      var xIndex = -1\n      var yIndex = -1\n      var zIndex = -1\n\n      times.forEach(function(time) {\n        if (curves.x) xIndex = curves.x.times.indexOf(time)\n        if (curves.y) yIndex = curves.y.times.indexOf(time)\n        if (curves.z) zIndex = curves.z.times.indexOf(time)\n\n        // if there is an x value defined for this frame, use that\n        if (xIndex !== -1) {\n          var xValue = curves.x.values[xIndex]\n          values.push(xValue)\n          prevValue[0] = xValue\n        } else {\n          // otherwise use the x value from the previous frame\n          values.push(prevValue[0])\n        }\n\n        if (yIndex !== -1) {\n          var yValue = curves.y.values[yIndex]\n          values.push(yValue)\n          prevValue[1] = yValue\n        } else {\n          values.push(prevValue[1])\n        }\n\n        if (zIndex !== -1) {\n          var zValue = curves.z.values[zIndex]\n          values.push(zValue)\n          prevValue[2] = zValue\n        } else {\n          values.push(prevValue[2])\n        }\n      })\n\n      return values\n    },\n\n    // Rotations are defined as Euler angles which can have values  of any size\n    // These will be converted to quaternions which don't support values greater than\n    // PI, so we'll interpolate large rotations\n    interpolateRotations: function(curve) {\n      for (var i = 1; i < curve.values.length; i++) {\n        var initialValue = curve.values[i - 1]\n        var valuesSpan = curve.values[i] - initialValue\n\n        var absoluteSpan = Math.abs(valuesSpan)\n\n        if (absoluteSpan >= 180) {\n          var numSubIntervals = absoluteSpan / 180\n\n          var step = valuesSpan / numSubIntervals\n          var nextValue = initialValue + step\n\n          var initialTime = curve.times[i - 1]\n          var timeSpan = curve.times[i] - initialTime\n          var interval = timeSpan / numSubIntervals\n          var nextTime = initialTime + interval\n\n          var interpolatedTimes = []\n          var interpolatedValues = []\n\n          while (nextTime < curve.times[i]) {\n            interpolatedTimes.push(nextTime)\n            nextTime += interval\n\n            interpolatedValues.push(nextValue)\n            nextValue += step\n          }\n\n          curve.times = inject(curve.times, i, interpolatedTimes)\n          curve.values = inject(curve.values, i, interpolatedValues)\n        }\n      }\n    }\n  }\n\n  // parse an FBX file in ASCII format\n  function TextParser() {}\n\n  TextParser.prototype = {\n    constructor: TextParser,\n\n    getPrevNode: function() {\n      return this.nodeStack[this.currentIndent - 2]\n    },\n\n    getCurrentNode: function() {\n      return this.nodeStack[this.currentIndent - 1]\n    },\n\n    getCurrentProp: function() {\n      return this.currentProp\n    },\n\n    pushStack: function(node) {\n      this.nodeStack.push(node)\n      this.currentIndent += 1\n    },\n\n    popStack: function() {\n      this.nodeStack.pop()\n      this.currentIndent -= 1\n    },\n\n    setCurrentProp: function(val, name) {\n      this.currentProp = val\n      this.currentPropName = name\n    },\n\n    parse: function(text) {\n      this.currentIndent = 0\n\n      this.allNodes = new FBXTree()\n      this.nodeStack = []\n      this.currentProp = []\n      this.currentPropName = ''\n\n      var self = this\n\n      var split = text.split(/[\\r\\n]+/)\n\n      split.forEach(function(line, i) {\n        var matchComment = line.match(/^[\\s\\t]*;/)\n        var matchEmpty = line.match(/^[\\s\\t]*$/)\n\n        if (matchComment || matchEmpty) return\n\n        var matchBeginning = line.match('^\\\\t{' + self.currentIndent + '}(\\\\w+):(.*){', '')\n        var matchProperty = line.match('^\\\\t{' + self.currentIndent + '}(\\\\w+):[\\\\s\\\\t\\\\r\\\\n](.*)')\n        var matchEnd = line.match('^\\\\t{' + (self.currentIndent - 1) + '}}')\n\n        if (matchBeginning) {\n          self.parseNodeBegin(line, matchBeginning)\n        } else if (matchProperty) {\n          self.parseNodeProperty(line, matchProperty, split[++i])\n        } else if (matchEnd) {\n          self.popStack()\n        } else if (line.match(/^[^\\s\\t}]/)) {\n          // large arrays are split over multiple lines terminated with a ',' character\n          // if this is encountered the line needs to be joined to the previous line\n          self.parseNodePropertyContinued(line)\n        }\n      })\n\n      return this.allNodes\n    },\n\n    parseNodeBegin: function(line, property) {\n      var nodeName = property[1]\n        .trim()\n        .replace(/^\"/, '')\n        .replace(/\"$/, '')\n\n      var nodeAttrs = property[2].split(',').map(function(attr) {\n        return attr\n          .trim()\n          .replace(/^\"/, '')\n          .replace(/\"$/, '')\n      })\n\n      var node = {\n        name: nodeName\n      }\n      var attrs = this.parseNodeAttr(nodeAttrs)\n\n      var currentNode = this.getCurrentNode()\n\n      // a top node\n      if (this.currentIndent === 0) {\n        this.allNodes.add(nodeName, node)\n      } else {\n        // a subnode\n\n        // if the subnode already exists, append it\n        if (nodeName in currentNode) {\n          // special case Pose needs PoseNodes as an array\n          if (nodeName === 'PoseNode') {\n            currentNode.PoseNode.push(node)\n          } else if (currentNode[nodeName].id !== undefined) {\n            currentNode[nodeName] = {}\n            currentNode[nodeName][currentNode[nodeName].id] = currentNode[nodeName]\n          }\n\n          if (attrs.id !== '') currentNode[nodeName][attrs.id] = node\n        } else if (typeof attrs.id === 'number') {\n          currentNode[nodeName] = {}\n          currentNode[nodeName][attrs.id] = node\n        } else if (nodeName !== 'Properties70') {\n          if (nodeName === 'PoseNode') currentNode[nodeName] = [node]\n          else currentNode[nodeName] = node\n        }\n      }\n\n      if (typeof attrs.id === 'number') node.id = attrs.id\n      if (attrs.name !== '') node.attrName = attrs.name\n      if (attrs.type !== '') node.attrType = attrs.type\n\n      this.pushStack(node)\n    },\n\n    parseNodeAttr: function(attrs) {\n      var id = attrs[0]\n\n      if (attrs[0] !== '') {\n        id = parseInt(attrs[0])\n\n        if (isNaN(id)) {\n          id = attrs[0]\n        }\n      }\n\n      var name = '',\n        type = ''\n\n      if (attrs.length > 1) {\n        name = attrs[1].replace(/^(\\w+)::/, '')\n        type = attrs[2]\n      }\n\n      return {\n        id: id,\n        name: name,\n        type: type\n      }\n    },\n\n    parseNodeProperty: function(line, property, contentLine) {\n      var propName = property[1]\n        .replace(/^\"/, '')\n        .replace(/\"$/, '')\n        .trim()\n      var propValue = property[2]\n        .replace(/^\"/, '')\n        .replace(/\"$/, '')\n        .trim()\n\n      // for special case: base64 image data follows \"Content: ,\" line\n      //\tContent: ,\n      //\t \"/9j/4RDaRXhpZgAATU0A...\"\n      if (propName === 'Content' && propValue === ',') {\n        propValue = contentLine\n          .replace(/\"/g, '')\n          .replace(/,$/, '')\n          .trim()\n      }\n\n      var currentNode = this.getCurrentNode()\n      var parentName = currentNode.name\n\n      if (parentName === 'Properties70') {\n        this.parseNodeSpecialProperty(line, propName, propValue)\n        return\n      }\n\n      // Connections\n      if (propName === 'C') {\n        var connProps = propValue.split(',').slice(1)\n        var from = parseInt(connProps[0])\n        var to = parseInt(connProps[1])\n\n        var rest = propValue.split(',').slice(3)\n\n        rest = rest.map(function(elem) {\n          return elem.trim().replace(/^\"/, '')\n        })\n\n        propName = 'connections'\n        propValue = [from, to]\n        append(propValue, rest)\n\n        if (currentNode[propName] === undefined) {\n          currentNode[propName] = []\n        }\n      }\n\n      // Node\n      if (propName === 'Node') currentNode.id = propValue\n\n      // connections\n      if (propName in currentNode && Array.isArray(currentNode[propName])) {\n        currentNode[propName].push(propValue)\n      } else {\n        if (propName !== 'a') currentNode[propName] = propValue\n        else currentNode.a = propValue\n      }\n\n      this.setCurrentProp(currentNode, propName)\n\n      // convert string to array, unless it ends in ',' in which case more will be added to it\n      if (propName === 'a' && propValue.slice(-1) !== ',') {\n        currentNode.a = parseNumberArray(propValue)\n      }\n    },\n\n    parseNodePropertyContinued: function(line) {\n      var currentNode = this.getCurrentNode()\n\n      currentNode.a += line\n\n      // if the line doesn't end in ',' we have reached the end of the property value\n      // so convert the string to an array\n      if (line.slice(-1) !== ',') {\n        currentNode.a = parseNumberArray(currentNode.a)\n      }\n    },\n\n    // parse \"Property70\"\n    parseNodeSpecialProperty: function(line, propName, propValue) {\n      // split this\n      // P: \"Lcl Scaling\", \"Lcl Scaling\", \"\", \"A\",1,1,1\n      // into array like below\n      // [\"Lcl Scaling\", \"Lcl Scaling\", \"\", \"A\", \"1,1,1\" ]\n      var props = propValue.split('\",').map(function(prop) {\n        return prop\n          .trim()\n          .replace(/^\\\"/, '')\n          .replace(/\\s/, '_')\n      })\n\n      var innerPropName = props[0]\n      var innerPropType1 = props[1]\n      var innerPropType2 = props[2]\n      var innerPropFlag = props[3]\n      var innerPropValue = props[4]\n\n      // cast values where needed, otherwise leave as strings\n      switch (innerPropType1) {\n        case 'int':\n        case 'enum':\n        case 'bool':\n        case 'ULongLong':\n        case 'double':\n        case 'Number':\n        case 'FieldOfView':\n          innerPropValue = parseFloat(innerPropValue)\n          break\n\n        case 'Color':\n        case 'ColorRGB':\n        case 'Vector3D':\n        case 'Lcl_Translation':\n        case 'Lcl_Rotation':\n        case 'Lcl_Scaling':\n          innerPropValue = parseNumberArray(innerPropValue)\n          break\n      }\n\n      // CAUTION: these props must append to parent's parent\n      this.getPrevNode()[innerPropName] = {\n        type: innerPropType1,\n        type2: innerPropType2,\n        flag: innerPropFlag,\n        value: innerPropValue\n      }\n\n      this.setCurrentProp(this.getPrevNode(), innerPropName)\n    }\n  }\n\n  // Parse an FBX file in Binary format\n  function BinaryParser() {}\n\n  BinaryParser.prototype = {\n    constructor: BinaryParser,\n\n    parse: function(buffer) {\n      var reader = new BinaryReader(buffer)\n      reader.skip(23) // skip magic 23 bytes\n\n      var version = reader.getUint32()\n\n      console.log('THREE.FBXLoader: FBX binary version: ' + version)\n\n      var allNodes = new FBXTree()\n\n      while (!this.endOfContent(reader)) {\n        var node = this.parseNode(reader, version)\n        if (node !== null) allNodes.add(node.name, node)\n      }\n\n      return allNodes\n    },\n\n    // Check if reader has reached the end of content.\n    endOfContent: function(reader) {\n      // footer size: 160bytes + 16-byte alignment padding\n      // - 16bytes: magic\n      // - padding til 16-byte alignment (at least 1byte?)\n      //\t(seems like some exporters embed fixed 15 or 16bytes?)\n      // - 4bytes: magic\n      // - 4bytes: version\n      // - 120bytes: zero\n      // - 16bytes: magic\n      if (reader.size() % 16 === 0) {\n        return ((reader.getOffset() + 160 + 16) & ~0xf) >= reader.size()\n      } else {\n        return reader.getOffset() + 160 + 16 >= reader.size()\n      }\n    },\n\n    // recursively parse nodes until the end of the file is reached\n    parseNode: function(reader, version) {\n      var node = {}\n\n      // The first three data sizes depends on version.\n      var endOffset = version >= 7500 ? reader.getUint64() : reader.getUint32()\n      var numProperties = version >= 7500 ? reader.getUint64() : reader.getUint32()\n\n      // note: do not remove this even if you get a linter warning as it moves the buffer forward\n      var propertyListLen = version >= 7500 ? reader.getUint64() : reader.getUint32()\n\n      var nameLen = reader.getUint8()\n      var name = reader.getString(nameLen)\n\n      // Regards this node as NULL-record if endOffset is zero\n      if (endOffset === 0) return null\n\n      var propertyList = []\n\n      for (var i = 0; i < numProperties; i++) {\n        propertyList.push(this.parseProperty(reader))\n      }\n\n      // Regards the first three elements in propertyList as id, attrName, and attrType\n      var id = propertyList.length > 0 ? propertyList[0] : ''\n      var attrName = propertyList.length > 1 ? propertyList[1] : ''\n      var attrType = propertyList.length > 2 ? propertyList[2] : ''\n\n      // check if this node represents just a single property\n      // like (name, 0) set or (name2, [0, 1, 2]) set of {name: 0, name2: [0, 1, 2]}\n      node.singleProperty = numProperties === 1 && reader.getOffset() === endOffset ? true : false\n\n      while (endOffset > reader.getOffset()) {\n        var subNode = this.parseNode(reader, version)\n\n        if (subNode !== null) this.parseSubNode(name, node, subNode)\n      }\n\n      node.propertyList = propertyList // raw property list used by parent\n\n      if (typeof id === 'number') node.id = id\n      if (attrName !== '') node.attrName = attrName\n      if (attrType !== '') node.attrType = attrType\n      if (name !== '') node.name = name\n\n      return node\n    },\n\n    parseSubNode: function(name, node, subNode) {\n      // special case: child node is single property\n      if (subNode.singleProperty === true) {\n        var value = subNode.propertyList[0]\n\n        if (Array.isArray(value)) {\n          node[subNode.name] = subNode\n\n          subNode.a = value\n        } else {\n          node[subNode.name] = value\n        }\n      } else if (name === 'Connections' && subNode.name === 'C') {\n        var array = []\n\n        subNode.propertyList.forEach(function(property, i) {\n          // first Connection is FBX type (OO, OP, etc.). We'll discard these\n          if (i !== 0) array.push(property)\n        })\n\n        if (node.connections === undefined) {\n          node.connections = []\n        }\n\n        node.connections.push(array)\n      } else if (subNode.name === 'Properties70') {\n        var keys = Object.keys(subNode)\n\n        keys.forEach(function(key) {\n          node[key] = subNode[key]\n        })\n      } else if (name === 'Properties70' && subNode.name === 'P') {\n        var innerPropName = subNode.propertyList[0]\n        var innerPropType1 = subNode.propertyList[1]\n        var innerPropType2 = subNode.propertyList[2]\n        var innerPropFlag = subNode.propertyList[3]\n        var innerPropValue\n\n        if (innerPropName.indexOf('Lcl ') === 0) innerPropName = innerPropName.replace('Lcl ', 'Lcl_')\n        if (innerPropType1.indexOf('Lcl ') === 0) innerPropType1 = innerPropType1.replace('Lcl ', 'Lcl_')\n\n        if (\n          innerPropType1 === 'Color' ||\n          innerPropType1 === 'ColorRGB' ||\n          innerPropType1 === 'Vector' ||\n          innerPropType1 === 'Vector3D' ||\n          innerPropType1.indexOf('Lcl_') === 0\n        ) {\n          innerPropValue = [subNode.propertyList[4], subNode.propertyList[5], subNode.propertyList[6]]\n        } else {\n          innerPropValue = subNode.propertyList[4]\n        }\n\n        // this will be copied to parent, see above\n        node[innerPropName] = {\n          type: innerPropType1,\n          type2: innerPropType2,\n          flag: innerPropFlag,\n          value: innerPropValue\n        }\n      } else if (node[subNode.name] === undefined) {\n        if (typeof subNode.id === 'number') {\n          node[subNode.name] = {}\n          node[subNode.name][subNode.id] = subNode\n        } else {\n          node[subNode.name] = subNode\n        }\n      } else {\n        if (subNode.name === 'PoseNode') {\n          if (!Array.isArray(node[subNode.name])) {\n            node[subNode.name] = [node[subNode.name]]\n          }\n\n          node[subNode.name].push(subNode)\n        } else if (node[subNode.name][subNode.id] === undefined) {\n          node[subNode.name][subNode.id] = subNode\n        }\n      }\n    },\n\n    parseProperty: function(reader) {\n      var type = reader.getString(1)\n\n      switch (type) {\n        case 'C':\n          return reader.getBoolean()\n\n        case 'D':\n          return reader.getFloat64()\n\n        case 'F':\n          return reader.getFloat32()\n\n        case 'I':\n          return reader.getInt32()\n\n        case 'L':\n          return reader.getInt64()\n\n        case 'R':\n          var length = reader.getUint32()\n          return reader.getArrayBuffer(length)\n\n        case 'S':\n          var length = reader.getUint32()\n          return reader.getString(length)\n\n        case 'Y':\n          return reader.getInt16()\n\n        case 'b':\n        case 'c':\n        case 'd':\n        case 'f':\n        case 'i':\n        case 'l':\n          var arrayLength = reader.getUint32()\n          var encoding = reader.getUint32() // 0: non-compressed, 1: compressed\n          var compressedLength = reader.getUint32()\n\n          if (encoding === 0) {\n            switch (type) {\n              case 'b':\n              case 'c':\n                return reader.getBooleanArray(arrayLength)\n\n              case 'd':\n                return reader.getFloat64Array(arrayLength)\n\n              case 'f':\n                return reader.getFloat32Array(arrayLength)\n\n              case 'i':\n                return reader.getInt32Array(arrayLength)\n\n              case 'l':\n                return reader.getInt64Array(arrayLength)\n            }\n          }\n\n          if (typeof Zlib === 'undefined') {\n            console.error(\n              'THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js'\n            )\n          }\n\n          var inflate = new Zlib.Inflate(new Uint8Array(reader.getArrayBuffer(compressedLength))) // eslint-disable-line no-undef\n          var reader2 = new BinaryReader(inflate.decompress().buffer)\n\n          switch (type) {\n            case 'b':\n            case 'c':\n              return reader2.getBooleanArray(arrayLength)\n\n            case 'd':\n              return reader2.getFloat64Array(arrayLength)\n\n            case 'f':\n              return reader2.getFloat32Array(arrayLength)\n\n            case 'i':\n              return reader2.getInt32Array(arrayLength)\n\n            case 'l':\n              return reader2.getInt64Array(arrayLength)\n          }\n\n        default:\n          throw new Error('THREE.FBXLoader: Unknown property type ' + type)\n      }\n    }\n  }\n\n  function BinaryReader(buffer, littleEndian) {\n    this.dv = new DataView(buffer)\n    this.offset = 0\n    this.littleEndian = littleEndian !== undefined ? littleEndian : true\n  }\n\n  BinaryReader.prototype = {\n    constructor: BinaryReader,\n\n    getOffset: function() {\n      return this.offset\n    },\n\n    size: function() {\n      return this.dv.buffer.byteLength\n    },\n\n    skip: function(length) {\n      this.offset += length\n    },\n\n    // seems like true/false representation depends on exporter.\n    // true: 1 or 'Y'(=0x59), false: 0 or 'T'(=0x54)\n    // then sees LSB.\n    getBoolean: function() {\n      return (this.getUint8() & 1) === 1\n    },\n\n    getBooleanArray: function(size) {\n      var a = []\n\n      for (var i = 0; i < size; i++) {\n        a.push(this.getBoolean())\n      }\n\n      return a\n    },\n\n    getUint8: function() {\n      var value = this.dv.getUint8(this.offset)\n      this.offset += 1\n      return value\n    },\n\n    getInt16: function() {\n      var value = this.dv.getInt16(this.offset, this.littleEndian)\n      this.offset += 2\n      return value\n    },\n\n    getInt32: function() {\n      var value = this.dv.getInt32(this.offset, this.littleEndian)\n      this.offset += 4\n      return value\n    },\n\n    getInt32Array: function(size) {\n      var a = []\n\n      for (var i = 0; i < size; i++) {\n        a.push(this.getInt32())\n      }\n\n      return a\n    },\n\n    getUint32: function() {\n      var value = this.dv.getUint32(this.offset, this.littleEndian)\n      this.offset += 4\n      return value\n    },\n\n    // JavaScript doesn't support 64-bit integer so calculate this here\n    // 1 << 32 will return 1 so using multiply operation instead here.\n    // There's a possibility that this method returns wrong value if the value\n    // is out of the range between Number.MAX_SAFE_INTEGER and Number.MIN_SAFE_INTEGER.\n    // TODO: safely handle 64-bit integer\n    getInt64: function() {\n      var low, high\n\n      if (this.littleEndian) {\n        low = this.getUint32()\n        high = this.getUint32()\n      } else {\n        high = this.getUint32()\n        low = this.getUint32()\n      }\n\n      // calculate negative value\n      if (high & 0x80000000) {\n        high = ~high & 0xffffffff\n        low = ~low & 0xffffffff\n\n        if (low === 0xffffffff) high = (high + 1) & 0xffffffff\n\n        low = (low + 1) & 0xffffffff\n\n        return -(high * 0x100000000 + low)\n      }\n\n      return high * 0x100000000 + low\n    },\n\n    getInt64Array: function(size) {\n      var a = []\n\n      for (var i = 0; i < size; i++) {\n        a.push(this.getInt64())\n      }\n\n      return a\n    },\n\n    // Note: see getInt64() comment\n    getUint64: function() {\n      var low, high\n\n      if (this.littleEndian) {\n        low = this.getUint32()\n        high = this.getUint32()\n      } else {\n        high = this.getUint32()\n        low = this.getUint32()\n      }\n\n      return high * 0x100000000 + low\n    },\n\n    getFloat32: function() {\n      var value = this.dv.getFloat32(this.offset, this.littleEndian)\n      this.offset += 4\n      return value\n    },\n\n    getFloat32Array: function(size) {\n      var a = []\n\n      for (var i = 0; i < size; i++) {\n        a.push(this.getFloat32())\n      }\n\n      return a\n    },\n\n    getFloat64: function() {\n      var value = this.dv.getFloat64(this.offset, this.littleEndian)\n      this.offset += 8\n      return value\n    },\n\n    getFloat64Array: function(size) {\n      var a = []\n\n      for (var i = 0; i < size; i++) {\n        a.push(this.getFloat64())\n      }\n\n      return a\n    },\n\n    getArrayBuffer: function(size) {\n      var value = this.dv.buffer.slice(this.offset, this.offset + size)\n      this.offset += size\n      return value\n    },\n\n    getString: function(size) {\n      // note: safari 9 doesn't support Uint8Array.indexOf; create intermediate array instead\n      var a = []\n\n      for (var i = 0; i < size; i++) {\n        a[i] = this.getUint8()\n      }\n\n      var nullByte = a.indexOf(0)\n      if (nullByte >= 0) a = a.slice(0, nullByte)\n\n      return LoaderUtils.decodeText(new Uint8Array(a))\n    }\n  }\n\n  // FBXTree holds a representation of the FBX data, returned by the TextParser ( FBX ASCII format)\n  // and BinaryParser( FBX Binary format)\n  function FBXTree() {}\n\n  FBXTree.prototype = {\n    constructor: FBXTree,\n\n    add: function(key, val) {\n      this[key] = val\n    }\n  }\n\n  // ************** UTILITY FUNCTIONS **************\n\n  function isFbxFormatBinary(buffer) {\n    var CORRECT = 'Kaydara FBX Binary  \\0'\n\n    return buffer.byteLength >= CORRECT.length && CORRECT === convertArrayBufferToString(buffer, 0, CORRECT.length)\n  }\n\n  function isFbxFormatASCII(text) {\n    var CORRECT = [\n      'K',\n      'a',\n      'y',\n      'd',\n      'a',\n      'r',\n      'a',\n      '\\\\',\n      'F',\n      'B',\n      'X',\n      '\\\\',\n      'B',\n      'i',\n      'n',\n      'a',\n      'r',\n      'y',\n      '\\\\',\n      '\\\\'\n    ]\n\n    var cursor = 0\n\n    function read(offset) {\n      var result = text[offset - 1]\n      text = text.slice(cursor + offset)\n      cursor++\n      return result\n    }\n\n    for (var i = 0; i < CORRECT.length; ++i) {\n      var num = read(1)\n      if (num === CORRECT[i]) {\n        return false\n      }\n    }\n\n    return true\n  }\n\n  function getFbxVersion(text) {\n    var versionRegExp = /FBXVersion: (\\d+)/\n    var match = text.match(versionRegExp)\n    if (match) {\n      var version = parseInt(match[1])\n      return version\n    }\n    throw new Error('THREE.FBXLoader: Cannot find the version number for the file given.')\n  }\n\n  // Converts FBX ticks into real time seconds.\n  function convertFBXTimeToSeconds(time) {\n    return time / 46186158000\n  }\n\n  var dataArray = []\n\n  // extracts the data from the correct position in the FBX array based on indexing type\n  function getData(polygonVertexIndex, polygonIndex, vertexIndex, infoObject) {\n    var index\n\n    switch (infoObject.mappingType) {\n      case 'ByPolygonVertex':\n        index = polygonVertexIndex\n        break\n      case 'ByPolygon':\n        index = polygonIndex\n        break\n      case 'ByVertice':\n        index = vertexIndex\n        break\n      case 'AllSame':\n        index = infoObject.indices[0]\n        break\n      default:\n        console.warn('THREE.FBXLoader: unknown attribute mapping type ' + infoObject.mappingType)\n    }\n\n    if (infoObject.referenceType === 'IndexToDirect') index = infoObject.indices[index]\n\n    var from = index * infoObject.dataSize\n    var to = from + infoObject.dataSize\n\n    return slice(dataArray, infoObject.buffer, from, to)\n  }\n\n  var tempEuler = new Euler()\n  var tempVec = new Vector3()\n\n  // generate transformation from FBX transform data\n  // ref: https://help.autodesk.com/view/FBX/2017/ENU/?guid=__files_GUID_10CDD63C_79C1_4F2D_BB28_AD2BE65A02ED_htm\n  // ref: http://docs.autodesk.com/FBX/2014/ENU/FBX-SDK-Documentation/index.html?url=cpp_ref/_transformations_2main_8cxx-example.html,topicNumber=cpp_ref__transformations_2main_8cxx_example_htmlfc10a1e1-b18d-4e72-9dc0-70d0f1959f5e\n  function generateTransform(transformData) {\n    var lTranslationM = new Matrix4()\n    var lPreRotationM = new Matrix4()\n    var lRotationM = new Matrix4()\n    var lPostRotationM = new Matrix4()\n\n    var lScalingM = new Matrix4()\n    var lScalingPivotM = new Matrix4()\n    var lScalingOffsetM = new Matrix4()\n    var lRotationOffsetM = new Matrix4()\n    var lRotationPivotM = new Matrix4()\n\n    var lParentGX = new Matrix4()\n    var lGlobalT = new Matrix4()\n\n    var inheritType = transformData.inheritType ? transformData.inheritType : 0\n\n    if (transformData.translation) lTranslationM.setPosition(tempVec.fromArray(transformData.translation))\n\n    if (transformData.preRotation) {\n      var array = transformData.preRotation.map(_Math.degToRad)\n      array.push(transformData.eulerOrder)\n      lPreRotationM.makeRotationFromEuler(tempEuler.fromArray(array))\n    }\n\n    if (transformData.rotation) {\n      var array = transformData.rotation.map(_Math.degToRad)\n      array.push(transformData.eulerOrder)\n      lRotationM.makeRotationFromEuler(tempEuler.fromArray(array))\n    }\n\n    if (transformData.postRotation) {\n      var array = transformData.postRotation.map(_Math.degToRad)\n      array.push(transformData.eulerOrder)\n      lPostRotationM.makeRotationFromEuler(tempEuler.fromArray(array))\n    }\n\n    if (transformData.scale) lScalingM.scale(tempVec.fromArray(transformData.scale))\n\n    // Pivots and offsets\n    if (transformData.scalingOffset) lScalingOffsetM.setPosition(tempVec.fromArray(transformData.scalingOffset))\n    if (transformData.scalingPivot) lScalingPivotM.setPosition(tempVec.fromArray(transformData.scalingPivot))\n    if (transformData.rotationOffset) lRotationOffsetM.setPosition(tempVec.fromArray(transformData.rotationOffset))\n    if (transformData.rotationPivot) lRotationPivotM.setPosition(tempVec.fromArray(transformData.rotationPivot))\n\n    // parent transform\n    if (transformData.parentMatrixWorld) lParentGX = transformData.parentMatrixWorld\n\n    // Global Rotation\n    var lLRM = lPreRotationM.multiply(lRotationM).multiply(lPostRotationM)\n    var lParentGRM = new Matrix4()\n    lParentGX.extractRotation(lParentGRM)\n\n    // Global Shear*Scaling\n    var lParentTM = new Matrix4()\n    var lLSM\n    var lParentGSM\n    var lParentGRSM\n\n    lParentTM.copyPosition(lParentGX)\n    lParentGRSM = lParentTM.getInverse(lParentTM).multiply(lParentGX)\n    lParentGSM = lParentGRM.getInverse(lParentGRM).multiply(lParentGRSM)\n    lLSM = lScalingM\n\n    var lGlobalRS\n    if (inheritType === 0) {\n      lGlobalRS = lParentGRM\n        .multiply(lLRM)\n        .multiply(lParentGSM)\n        .multiply(lLSM)\n    } else if (inheritType === 1) {\n      lGlobalRS = lParentGRM\n        .multiply(lParentGSM)\n        .multiply(lLRM)\n        .multiply(lLSM)\n    } else {\n      var lParentLSM = new Matrix4().copy(lScalingM)\n\n      var lParentGSM_noLocal = lParentGSM.multiply(lParentLSM.getInverse(lParentLSM))\n\n      lGlobalRS = lParentGRM\n        .multiply(lLRM)\n        .multiply(lParentGSM_noLocal)\n        .multiply(lLSM)\n    }\n\n    // Calculate the local transform matrix\n    var lTransform = lTranslationM\n      .multiply(lRotationOffsetM)\n      .multiply(lRotationPivotM)\n      .multiply(lPreRotationM)\n      .multiply(lRotationM)\n      .multiply(lPostRotationM)\n      .multiply(lRotationPivotM.getInverse(lRotationPivotM))\n      .multiply(lScalingOffsetM)\n      .multiply(lScalingPivotM)\n      .multiply(lScalingM)\n      .multiply(lScalingPivotM.getInverse(lScalingPivotM))\n\n    var lLocalTWithAllPivotAndOffsetInfo = new Matrix4().copyPosition(lTransform)\n\n    var lGlobalTranslation = lParentGX.multiply(lLocalTWithAllPivotAndOffsetInfo)\n    lGlobalT.copyPosition(lGlobalTranslation)\n\n    lTransform = lGlobalT.multiply(lGlobalRS)\n\n    return lTransform\n  }\n\n  // Returns the three.js intrinsic Euler order corresponding to FBX extrinsic Euler order\n  // ref: http://help.autodesk.com/view/FBX/2017/ENU/?guid=__cpp_ref_class_fbx_euler_html\n  function getEulerOrder(order) {\n    order = order || 0\n\n    var enums = [\n      'ZYX', // -> XYZ extrinsic\n      'YZX', // -> XZY extrinsic\n      'XZY', // -> YZX extrinsic\n      'ZXY', // -> YXZ extrinsic\n      'YXZ', // -> ZXY extrinsic\n      'XYZ' // -> ZYX extrinsic\n      //'SphericXYZ', // not possible to support\n    ]\n\n    if (order === 6) {\n      console.warn(\n        'THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect.'\n      )\n      return enums[0]\n    }\n\n    return enums[order]\n  }\n\n  // Parses comma separated list of numbers and returns them an array.\n  // Used internally by the TextParser\n  function parseNumberArray(value) {\n    var array = value.split(',').map(function(val) {\n      return parseFloat(val)\n    })\n\n    return array\n  }\n\n  function convertArrayBufferToString(buffer, from, to) {\n    if (from === undefined) from = 0\n    if (to === undefined) to = buffer.byteLength\n\n    return LoaderUtils.decodeText(new Uint8Array(buffer, from, to))\n  }\n\n  function append(a, b) {\n    for (var i = 0, j = a.length, l = b.length; i < l; i++, j++) {\n      a[j] = b[i]\n    }\n  }\n\n  function slice(a, b, from, to) {\n    for (var i = from, j = 0; i < to; i++, j++) {\n      a[j] = b[i]\n    }\n\n    return a\n  }\n\n  // inject array a2 into array a1 at index\n  function inject(a1, index, a2) {\n    return a1\n      .slice(0, index)\n      .concat(a2)\n      .concat(a1.slice(index))\n  }\n\n  return FBXLoader\n})()\n\nexport { FBXLoader }\n","/**\n * @author renej\n * NURBS curve object\n *\n * Derives from Curve, overriding getPoint and getTangent.\n *\n * Implementation is based on (x, y [, z=0 [, w=1]]) control points with w=weight.\n *\n **/\n\nimport { Curve, Vector3, Vector4 } from 'three'\nimport { NURBSUtils } from './NURBSUtils.js'\n\n/**************************************************************\n *\tNURBS curve\n **************************************************************/\n\nvar NURBSCurve = function(\n  degree,\n  knots /* array of reals */,\n  controlPoints /* array of Vector(2|3|4) */,\n  startKnot /* index in knots */,\n  endKnot /* index in knots */\n) {\n  Curve.call(this)\n\n  this.degree = degree\n  this.knots = knots\n  this.controlPoints = []\n  // Used by periodic NURBS to remove hidden spans\n  this.startKnot = startKnot || 0\n  this.endKnot = endKnot || this.knots.length - 1\n  for (var i = 0; i < controlPoints.length; ++i) {\n    // ensure Vector4 for control points\n    var point = controlPoints[i]\n    this.controlPoints[i] = new Vector4(point.x, point.y, point.z, point.w)\n  }\n}\n\nNURBSCurve.prototype = Object.create(Curve.prototype)\nNURBSCurve.prototype.constructor = NURBSCurve\n\nNURBSCurve.prototype.getPoint = function(t) {\n  var u = this.knots[this.startKnot] + t * (this.knots[this.endKnot] - this.knots[this.startKnot]) // linear mapping t->u\n\n  // following results in (wx, wy, wz, w) homogeneous point\n  var hpoint = NURBSUtils.calcBSplinePoint(this.degree, this.knots, this.controlPoints, u)\n\n  if (hpoint.w != 1.0) {\n    // project to 3D space: (wx, wy, wz, w) -> (x, y, z, 1)\n    hpoint.divideScalar(hpoint.w)\n  }\n\n  return new Vector3(hpoint.x, hpoint.y, hpoint.z)\n}\n\nNURBSCurve.prototype.getTangent = function(t) {\n  var u = this.knots[0] + t * (this.knots[this.knots.length - 1] - this.knots[0])\n  var ders = NURBSUtils.calcNURBSDerivatives(this.degree, this.knots, this.controlPoints, u, 1)\n  var tangent = ders[1].clone()\n  tangent.normalize()\n\n  return tangent\n}\n\nexport { NURBSCurve }\n","/**\n * @author renej\n * NURBS utils\n *\n * See NURBSCurve and NURBSSurface.\n *\n **/\n\nimport { Vector3, Vector4 } from 'three'\n\n/**************************************************************\n *\tNURBS Utils\n **************************************************************/\n\nvar NURBSUtils = {\n  /*\n  Finds knot vector span.\n\n  p : degree\n  u : parametric value\n  U : knot vector\n\n  returns the span\n  */\n  findSpan: function(p, u, U) {\n    var n = U.length - p - 1\n\n    if (u >= U[n]) {\n      return n - 1\n    }\n\n    if (u <= U[p]) {\n      return p\n    }\n\n    var low = p\n    var high = n\n    var mid = Math.floor((low + high) / 2)\n\n    while (u < U[mid] || u >= U[mid + 1]) {\n      if (u < U[mid]) {\n        high = mid\n      } else {\n        low = mid\n      }\n\n      mid = Math.floor((low + high) / 2)\n    }\n\n    return mid\n  },\n\n  /*\n  Calculate basis functions. See The NURBS Book, page 70, algorithm A2.2\n\n  span : span in which u lies\n  u    : parametric point\n  p    : degree\n  U    : knot vector\n\n  returns array[p+1] with basis functions values.\n  */\n  calcBasisFunctions: function(span, u, p, U) {\n    var N = []\n    var left = []\n    var right = []\n    N[0] = 1.0\n\n    for (var j = 1; j <= p; ++j) {\n      left[j] = u - U[span + 1 - j]\n      right[j] = U[span + j] - u\n\n      var saved = 0.0\n\n      for (var r = 0; r < j; ++r) {\n        var rv = right[r + 1]\n        var lv = left[j - r]\n        var temp = N[r] / (rv + lv)\n        N[r] = saved + rv * temp\n        saved = lv * temp\n      }\n\n      N[j] = saved\n    }\n\n    return N\n  },\n\n  /*\n  Calculate B-Spline curve points. See The NURBS Book, page 82, algorithm A3.1.\n\n  p : degree of B-Spline\n  U : knot vector\n  P : control points (x, y, z, w)\n  u : parametric point\n\n  returns point for given u\n  */\n  calcBSplinePoint: function(p, U, P, u) {\n    var span = this.findSpan(p, u, U)\n    var N = this.calcBasisFunctions(span, u, p, U)\n    var C = new Vector4(0, 0, 0, 0)\n\n    for (var j = 0; j <= p; ++j) {\n      var point = P[span - p + j]\n      var Nj = N[j]\n      var wNj = point.w * Nj\n      C.x += point.x * wNj\n      C.y += point.y * wNj\n      C.z += point.z * wNj\n      C.w += point.w * Nj\n    }\n\n    return C\n  },\n\n  /*\n  Calculate basis functions derivatives. See The NURBS Book, page 72, algorithm A2.3.\n\n  span : span in which u lies\n  u    : parametric point\n  p    : degree\n  n    : number of derivatives to calculate\n  U    : knot vector\n\n  returns array[n+1][p+1] with basis functions derivatives\n  */\n  calcBasisFunctionDerivatives: function(span, u, p, n, U) {\n    var zeroArr = []\n    for (var i = 0; i <= p; ++i) zeroArr[i] = 0.0\n\n    var ders = []\n    for (var i = 0; i <= n; ++i) ders[i] = zeroArr.slice(0)\n\n    var ndu = []\n    for (var i = 0; i <= p; ++i) ndu[i] = zeroArr.slice(0)\n\n    ndu[0][0] = 1.0\n\n    var left = zeroArr.slice(0)\n    var right = zeroArr.slice(0)\n\n    for (var j = 1; j <= p; ++j) {\n      left[j] = u - U[span + 1 - j]\n      right[j] = U[span + j] - u\n\n      var saved = 0.0\n\n      for (var r = 0; r < j; ++r) {\n        var rv = right[r + 1]\n        var lv = left[j - r]\n        ndu[j][r] = rv + lv\n\n        var temp = ndu[r][j - 1] / ndu[j][r]\n        ndu[r][j] = saved + rv * temp\n        saved = lv * temp\n      }\n\n      ndu[j][j] = saved\n    }\n\n    for (var j = 0; j <= p; ++j) {\n      ders[0][j] = ndu[j][p]\n    }\n\n    for (var r = 0; r <= p; ++r) {\n      var s1 = 0\n      var s2 = 1\n\n      var a = []\n      for (var i = 0; i <= p; ++i) {\n        a[i] = zeroArr.slice(0)\n      }\n      a[0][0] = 1.0\n\n      for (var k = 1; k <= n; ++k) {\n        var d = 0.0\n        var rk = r - k\n        var pk = p - k\n\n        if (r >= k) {\n          a[s2][0] = a[s1][0] / ndu[pk + 1][rk]\n          d = a[s2][0] * ndu[rk][pk]\n        }\n\n        var j1 = rk >= -1 ? 1 : -rk\n        var j2 = r - 1 <= pk ? k - 1 : p - r\n\n        for (var j = j1; j <= j2; ++j) {\n          a[s2][j] = (a[s1][j] - a[s1][j - 1]) / ndu[pk + 1][rk + j]\n          d += a[s2][j] * ndu[rk + j][pk]\n        }\n\n        if (r <= pk) {\n          a[s2][k] = -a[s1][k - 1] / ndu[pk + 1][r]\n          d += a[s2][k] * ndu[r][pk]\n        }\n\n        ders[k][r] = d\n\n        var j = s1\n        s1 = s2\n        s2 = j\n      }\n    }\n\n    var r = p\n\n    for (var k = 1; k <= n; ++k) {\n      for (var j = 0; j <= p; ++j) {\n        ders[k][j] *= r\n      }\n      r *= p - k\n    }\n\n    return ders\n  },\n\n  /*\n  \tCalculate derivatives of a B-Spline. See The NURBS Book, page 93, algorithm A3.2.\n\n  \tp  : degree\n  \tU  : knot vector\n  \tP  : control points\n  \tu  : Parametric points\n  \tnd : number of derivatives\n\n  \treturns array[d+1] with derivatives\n  \t*/\n  calcBSplineDerivatives: function(p, U, P, u, nd) {\n    var du = nd < p ? nd : p\n    var CK = []\n    var span = this.findSpan(p, u, U)\n    var nders = this.calcBasisFunctionDerivatives(span, u, p, du, U)\n    var Pw = []\n\n    for (var i = 0; i < P.length; ++i) {\n      var point = P[i].clone()\n      var w = point.w\n\n      point.x *= w\n      point.y *= w\n      point.z *= w\n\n      Pw[i] = point\n    }\n    for (var k = 0; k <= du; ++k) {\n      var point = Pw[span - p].clone().multiplyScalar(nders[k][0])\n\n      for (var j = 1; j <= p; ++j) {\n        point.add(Pw[span - p + j].clone().multiplyScalar(nders[k][j]))\n      }\n\n      CK[k] = point\n    }\n\n    for (var k = du + 1; k <= nd + 1; ++k) {\n      CK[k] = new Vector4(0, 0, 0)\n    }\n\n    return CK\n  },\n\n  /*\n  Calculate \"K over I\"\n\n  returns k!/(i!(k-i)!)\n  */\n  calcKoverI: function(k, i) {\n    var nom = 1\n\n    for (var j = 2; j <= k; ++j) {\n      nom *= j\n    }\n\n    var denom = 1\n\n    for (var j = 2; j <= i; ++j) {\n      denom *= j\n    }\n\n    for (var j = 2; j <= k - i; ++j) {\n      denom *= j\n    }\n\n    return nom / denom\n  },\n\n  /*\n  Calculate derivatives (0-nd) of rational curve. See The NURBS Book, page 127, algorithm A4.2.\n\n  Pders : result of function calcBSplineDerivatives\n\n  returns array with derivatives for rational curve.\n  */\n  calcRationalCurveDerivatives: function(Pders) {\n    var nd = Pders.length\n    var Aders = []\n    var wders = []\n\n    for (var i = 0; i < nd; ++i) {\n      var point = Pders[i]\n      Aders[i] = new Vector3(point.x, point.y, point.z)\n      wders[i] = point.w\n    }\n\n    var CK = []\n\n    for (var k = 0; k < nd; ++k) {\n      var v = Aders[k].clone()\n\n      for (var i = 1; i <= k; ++i) {\n        v.sub(CK[k - i].clone().multiplyScalar(this.calcKoverI(k, i) * wders[i]))\n      }\n\n      CK[k] = v.divideScalar(wders[0])\n    }\n\n    return CK\n  },\n\n  /*\n  Calculate NURBS curve derivatives. See The NURBS Book, page 127, algorithm A4.2.\n\n  p  : degree\n  U  : knot vector\n  P  : control points in homogeneous space\n  u  : parametric points\n  nd : number of derivatives\n\n  returns array with derivatives.\n  */\n  calcNURBSDerivatives: function(p, U, P, u, nd) {\n    var Pders = this.calcBSplineDerivatives(p, U, P, u, nd)\n    return this.calcRationalCurveDerivatives(Pders)\n  },\n\n  /*\n  Calculate rational B-Spline surface point. See The NURBS Book, page 134, algorithm A4.3.\n\n  p1, p2 : degrees of B-Spline surface\n  U1, U2 : knot vectors\n  P      : control points (x, y, z, w)\n  u, v   : parametric values\n\n  returns point for given (u, v)\n  */\n  calcSurfacePoint: function(p, q, U, V, P, u, v, target) {\n    var uspan = this.findSpan(p, u, U)\n    var vspan = this.findSpan(q, v, V)\n    var Nu = this.calcBasisFunctions(uspan, u, p, U)\n    var Nv = this.calcBasisFunctions(vspan, v, q, V)\n    var temp = []\n\n    for (var l = 0; l <= q; ++l) {\n      temp[l] = new Vector4(0, 0, 0, 0)\n      for (var k = 0; k <= p; ++k) {\n        var point = P[uspan - p + k][vspan - q + l].clone()\n        var w = point.w\n        point.x *= w\n        point.y *= w\n        point.z *= w\n        temp[l].add(point.multiplyScalar(Nu[k]))\n      }\n    }\n\n    var Sw = new Vector4(0, 0, 0, 0)\n    for (var l = 0; l <= q; ++l) {\n      Sw.add(temp[l].multiplyScalar(Nv[l]))\n    }\n\n    Sw.divideScalar(Sw.w)\n    target.set(Sw.x, Sw.y, Sw.z)\n  }\n}\n\nexport { NURBSUtils }\n","/*\r\n * @author Daosheng Mu / https://github.com/DaoshengMu/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author takahirox / https://github.com/takahirox/\r\n */\r\nimport * as THREE from 'three'\r\nTHREE.TGALoader = function(manager) {\r\n  this.manager = manager !== undefined ? manager : THREE.DefaultLoadingManager\r\n}\r\n\r\nTHREE.TGALoader.prototype = {\r\n  constructor: THREE.TGALoader,\r\n\r\n  load: function(url, onLoad, onProgress, onError) {\r\n    var scope = this\r\n\r\n    var texture = new THREE.Texture()\r\n\r\n    var loader = new THREE.FileLoader(this.manager)\r\n    loader.setResponseType('arraybuffer')\r\n    loader.setPath(this.path)\r\n\r\n    loader.load(\r\n      url,\r\n      function(buffer) {\r\n        texture.image = scope.parse(buffer)\r\n        texture.needsUpdate = true\r\n\r\n        if (onLoad !== undefined) {\r\n          onLoad(texture)\r\n        }\r\n      },\r\n      onProgress,\r\n      onError\r\n    )\r\n\r\n    return texture\r\n  },\r\n\r\n  parse: function(buffer) {\r\n    // reference from vthibault, https://github.com/vthibault/roBrowser/blob/master/src/Loaders/Targa.js\r\n\r\n    function tgaCheckHeader(header) {\r\n      switch (header.image_type) {\r\n        // check indexed type\r\n\r\n        case TGA_TYPE_INDEXED:\r\n        case TGA_TYPE_RLE_INDEXED:\r\n          if (header.colormap_length > 256 || header.colormap_size !== 24 || header.colormap_type !== 1) {\r\n            console.error('THREE.TGALoader: Invalid type colormap data for indexed type.')\r\n          }\r\n          break\r\n\r\n        // check colormap type\r\n\r\n        case TGA_TYPE_RGB:\r\n        case TGA_TYPE_GREY:\r\n        case TGA_TYPE_RLE_RGB:\r\n        case TGA_TYPE_RLE_GREY:\r\n          if (header.colormap_type) {\r\n            console.error('THREE.TGALoader: Invalid type colormap data for colormap type.')\r\n          }\r\n          break\r\n\r\n        // What the need of a file without data ?\r\n\r\n        case TGA_TYPE_NO_DATA:\r\n          console.error('THREE.TGALoader: No data.')\r\n\r\n        // Invalid type ?\r\n\r\n        default:\r\n          console.error('THREE.TGALoader: Invalid type \"%s\".', header.image_type)\r\n      }\r\n\r\n      // check image width and height\r\n\r\n      if (header.width <= 0 || header.height <= 0) {\r\n        console.error('THREE.TGALoader: Invalid image size.')\r\n      }\r\n\r\n      // check image pixel size\r\n\r\n      if (header.pixel_size !== 8 && header.pixel_size !== 16 && header.pixel_size !== 24 && header.pixel_size !== 32) {\r\n        console.error('THREE.TGALoader: Invalid pixel size \"%s\".', header.pixel_size)\r\n      }\r\n    }\r\n\r\n    // parse tga image buffer\r\n\r\n    function tgaParse(use_rle, use_pal, header, offset, data) {\r\n      var pixel_data, pixel_size, pixel_total, palettes\r\n\r\n      pixel_size = header.pixel_size >> 3\r\n      pixel_total = header.width * header.height * pixel_size\r\n\r\n      // read palettes\r\n\r\n      if (use_pal) {\r\n        palettes = data.subarray(offset, (offset += header.colormap_length * (header.colormap_size >> 3)))\r\n      }\r\n\r\n      // read RLE\r\n\r\n      if (use_rle) {\r\n        pixel_data = new Uint8Array(pixel_total)\r\n\r\n        var c, count, i\r\n        var shift = 0\r\n        var pixels = new Uint8Array(pixel_size)\r\n\r\n        while (shift < pixel_total) {\r\n          c = data[offset++]\r\n          count = (c & 0x7f) + 1\r\n\r\n          // RLE pixels\r\n\r\n          if (c & 0x80) {\r\n            // bind pixel tmp array\r\n\r\n            for (i = 0; i < pixel_size; ++i) {\r\n              pixels[i] = data[offset++]\r\n            }\r\n\r\n            // copy pixel array\r\n\r\n            for (i = 0; i < count; ++i) {\r\n              pixel_data.set(pixels, shift + i * pixel_size)\r\n            }\r\n\r\n            shift += pixel_size * count\r\n          } else {\r\n            // raw pixels\r\n\r\n            count *= pixel_size\r\n            for (i = 0; i < count; ++i) {\r\n              pixel_data[shift + i] = data[offset++]\r\n            }\r\n            shift += count\r\n          }\r\n        }\r\n      } else {\r\n        // raw pixels\r\n\r\n        pixel_data = data.subarray(offset, (offset += use_pal ? header.width * header.height : pixel_total))\r\n      }\r\n\r\n      return {\r\n        pixel_data: pixel_data,\r\n        palettes: palettes\r\n      }\r\n    }\r\n\r\n    function tgaGetImageData8bits(imageData, y_start, y_step, y_end, x_start, x_step, x_end, image, palettes) {\r\n      var colormap = palettes\r\n      var color,\r\n        i = 0,\r\n        x,\r\n        y\r\n      var width = header.width\r\n\r\n      for (y = y_start; y !== y_end; y += y_step) {\r\n        for (x = x_start; x !== x_end; x += x_step, i++) {\r\n          color = image[i]\r\n          imageData[(x + width * y) * 4 + 3] = 255\r\n          imageData[(x + width * y) * 4 + 2] = colormap[color * 3 + 0]\r\n          imageData[(x + width * y) * 4 + 1] = colormap[color * 3 + 1]\r\n          imageData[(x + width * y) * 4 + 0] = colormap[color * 3 + 2]\r\n        }\r\n      }\r\n\r\n      return imageData\r\n    }\r\n\r\n    function tgaGetImageData16bits(imageData, y_start, y_step, y_end, x_start, x_step, x_end, image) {\r\n      var color,\r\n        i = 0,\r\n        x,\r\n        y\r\n      var width = header.width\r\n\r\n      for (y = y_start; y !== y_end; y += y_step) {\r\n        for (x = x_start; x !== x_end; x += x_step, i += 2) {\r\n          color = image[i + 0] + (image[i + 1] << 8) // Inversed ?\r\n          imageData[(x + width * y) * 4 + 0] = (color & 0x7c00) >> 7\r\n          imageData[(x + width * y) * 4 + 1] = (color & 0x03e0) >> 2\r\n          imageData[(x + width * y) * 4 + 2] = (color & 0x001f) >> 3\r\n          imageData[(x + width * y) * 4 + 3] = color & 0x8000 ? 0 : 255\r\n        }\r\n      }\r\n\r\n      return imageData\r\n    }\r\n\r\n    function tgaGetImageData24bits(imageData, y_start, y_step, y_end, x_start, x_step, x_end, image) {\r\n      var i = 0,\r\n        x,\r\n        y\r\n      var width = header.width\r\n\r\n      for (y = y_start; y !== y_end; y += y_step) {\r\n        for (x = x_start; x !== x_end; x += x_step, i += 3) {\r\n          imageData[(x + width * y) * 4 + 3] = 255\r\n          imageData[(x + width * y) * 4 + 2] = image[i + 0]\r\n          imageData[(x + width * y) * 4 + 1] = image[i + 1]\r\n          imageData[(x + width * y) * 4 + 0] = image[i + 2]\r\n        }\r\n      }\r\n\r\n      return imageData\r\n    }\r\n\r\n    function tgaGetImageData32bits(imageData, y_start, y_step, y_end, x_start, x_step, x_end, image) {\r\n      var i = 0,\r\n        x,\r\n        y\r\n      var width = header.width\r\n\r\n      for (y = y_start; y !== y_end; y += y_step) {\r\n        for (x = x_start; x !== x_end; x += x_step, i += 4) {\r\n          imageData[(x + width * y) * 4 + 2] = image[i + 0]\r\n          imageData[(x + width * y) * 4 + 1] = image[i + 1]\r\n          imageData[(x + width * y) * 4 + 0] = image[i + 2]\r\n          imageData[(x + width * y) * 4 + 3] = image[i + 3]\r\n        }\r\n      }\r\n\r\n      return imageData\r\n    }\r\n\r\n    function tgaGetImageDataGrey8bits(imageData, y_start, y_step, y_end, x_start, x_step, x_end, image) {\r\n      var color,\r\n        i = 0,\r\n        x,\r\n        y\r\n      var width = header.width\r\n\r\n      for (y = y_start; y !== y_end; y += y_step) {\r\n        for (x = x_start; x !== x_end; x += x_step, i++) {\r\n          color = image[i]\r\n          imageData[(x + width * y) * 4 + 0] = color\r\n          imageData[(x + width * y) * 4 + 1] = color\r\n          imageData[(x + width * y) * 4 + 2] = color\r\n          imageData[(x + width * y) * 4 + 3] = 255\r\n        }\r\n      }\r\n\r\n      return imageData\r\n    }\r\n\r\n    function tgaGetImageDataGrey16bits(imageData, y_start, y_step, y_end, x_start, x_step, x_end, image) {\r\n      var i = 0,\r\n        x,\r\n        y\r\n      var width = header.width\r\n\r\n      for (y = y_start; y !== y_end; y += y_step) {\r\n        for (x = x_start; x !== x_end; x += x_step, i += 2) {\r\n          imageData[(x + width * y) * 4 + 0] = image[i + 0]\r\n          imageData[(x + width * y) * 4 + 1] = image[i + 0]\r\n          imageData[(x + width * y) * 4 + 2] = image[i + 0]\r\n          imageData[(x + width * y) * 4 + 3] = image[i + 1]\r\n        }\r\n      }\r\n\r\n      return imageData\r\n    }\r\n\r\n    function getTgaRGBA(data, width, height, image, palette) {\r\n      var x_start, y_start, x_step, y_step, x_end, y_end\r\n\r\n      switch ((header.flags & TGA_ORIGIN_MASK) >> TGA_ORIGIN_SHIFT) {\r\n        default:\r\n        case TGA_ORIGIN_UL:\r\n          x_start = 0\r\n          x_step = 1\r\n          x_end = width\r\n          y_start = 0\r\n          y_step = 1\r\n          y_end = height\r\n          break\r\n\r\n        case TGA_ORIGIN_BL:\r\n          x_start = 0\r\n          x_step = 1\r\n          x_end = width\r\n          y_start = height - 1\r\n          y_step = -1\r\n          y_end = -1\r\n          break\r\n\r\n        case TGA_ORIGIN_UR:\r\n          x_start = width - 1\r\n          x_step = -1\r\n          x_end = -1\r\n          y_start = 0\r\n          y_step = 1\r\n          y_end = height\r\n          break\r\n\r\n        case TGA_ORIGIN_BR:\r\n          x_start = width - 1\r\n          x_step = -1\r\n          x_end = -1\r\n          y_start = height - 1\r\n          y_step = -1\r\n          y_end = -1\r\n          break\r\n      }\r\n\r\n      if (use_grey) {\r\n        switch (header.pixel_size) {\r\n          case 8:\r\n            tgaGetImageDataGrey8bits(data, y_start, y_step, y_end, x_start, x_step, x_end, image)\r\n            break\r\n\r\n          case 16:\r\n            tgaGetImageDataGrey16bits(data, y_start, y_step, y_end, x_start, x_step, x_end, image)\r\n            break\r\n\r\n          default:\r\n            console.error('THREE.TGALoader: Format not supported.')\r\n            break\r\n        }\r\n      } else {\r\n        switch (header.pixel_size) {\r\n          case 8:\r\n            tgaGetImageData8bits(data, y_start, y_step, y_end, x_start, x_step, x_end, image, palette)\r\n            break\r\n\r\n          case 16:\r\n            tgaGetImageData16bits(data, y_start, y_step, y_end, x_start, x_step, x_end, image)\r\n            break\r\n\r\n          case 24:\r\n            tgaGetImageData24bits(data, y_start, y_step, y_end, x_start, x_step, x_end, image)\r\n            break\r\n\r\n          case 32:\r\n            tgaGetImageData32bits(data, y_start, y_step, y_end, x_start, x_step, x_end, image)\r\n            break\r\n\r\n          default:\r\n            console.error('THREE.TGALoader: Format not supported.')\r\n            break\r\n        }\r\n      }\r\n\r\n      // Load image data according to specific method\r\n      // var func = 'tgaGetImageData' + (use_grey ? 'Grey' : '') + (header.pixel_size) + 'bits';\r\n      // func(data, y_start, y_step, y_end, x_start, x_step, x_end, width, image, palette );\r\n      return data\r\n    }\r\n\r\n    // TGA constants\r\n\r\n    var TGA_TYPE_NO_DATA = 0,\r\n      TGA_TYPE_INDEXED = 1,\r\n      TGA_TYPE_RGB = 2,\r\n      TGA_TYPE_GREY = 3,\r\n      TGA_TYPE_RLE_INDEXED = 9,\r\n      TGA_TYPE_RLE_RGB = 10,\r\n      TGA_TYPE_RLE_GREY = 11,\r\n      TGA_ORIGIN_MASK = 0x30,\r\n      TGA_ORIGIN_SHIFT = 0x04,\r\n      TGA_ORIGIN_BL = 0x00,\r\n      TGA_ORIGIN_BR = 0x01,\r\n      TGA_ORIGIN_UL = 0x02,\r\n      TGA_ORIGIN_UR = 0x03\r\n\r\n    if (buffer.length < 19) console.error('THREE.TGALoader: Not enough data to contain header.')\r\n\r\n    var content = new Uint8Array(buffer),\r\n      offset = 0,\r\n      header = {\r\n        id_length: content[offset++],\r\n        colormap_type: content[offset++],\r\n        image_type: content[offset++],\r\n        colormap_index: content[offset++] | (content[offset++] << 8),\r\n        colormap_length: content[offset++] | (content[offset++] << 8),\r\n        colormap_size: content[offset++],\r\n        origin: [content[offset++] | (content[offset++] << 8), content[offset++] | (content[offset++] << 8)],\r\n        width: content[offset++] | (content[offset++] << 8),\r\n        height: content[offset++] | (content[offset++] << 8),\r\n        pixel_size: content[offset++],\r\n        flags: content[offset++]\r\n      }\r\n\r\n    // check tga if it is valid format\r\n\r\n    tgaCheckHeader(header)\r\n\r\n    if (header.id_length + offset > buffer.length) {\r\n      console.error('THREE.TGALoader: No data.')\r\n    }\r\n\r\n    // skip the needn't data\r\n\r\n    offset += header.id_length\r\n\r\n    // get targa information about RLE compression and palette\r\n\r\n    var use_rle = false,\r\n      use_pal = false,\r\n      use_grey = false\r\n\r\n    switch (header.image_type) {\r\n      case TGA_TYPE_RLE_INDEXED:\r\n        use_rle = true\r\n        use_pal = true\r\n        break\r\n\r\n      case TGA_TYPE_INDEXED:\r\n        use_pal = true\r\n        break\r\n\r\n      case TGA_TYPE_RLE_RGB:\r\n        use_rle = true\r\n        break\r\n\r\n      case TGA_TYPE_RGB:\r\n        break\r\n\r\n      case TGA_TYPE_RLE_GREY:\r\n        use_rle = true\r\n        use_grey = true\r\n        break\r\n\r\n      case TGA_TYPE_GREY:\r\n        use_grey = true\r\n        break\r\n    }\r\n\r\n    //\r\n\r\n    var useOffscreen = typeof OffscreenCanvas !== 'undefined'\r\n\r\n    var canvas = useOffscreen ? new OffscreenCanvas(header.width, header.height) : document.createElement('canvas')\r\n    canvas.width = header.width\r\n    canvas.height = header.height\r\n\r\n    var context = canvas.getContext('2d')\r\n    var imageData = context.createImageData(header.width, header.height)\r\n\r\n    var result = tgaParse(use_rle, use_pal, header, offset, content)\r\n    var rgbaData = getTgaRGBA(imageData.data, header.width, header.height, result.pixel_data, result.palettes)\r\n\r\n    context.putImageData(imageData, 0, 0)\r\n\r\n    return useOffscreen ? canvas.transferToImageBitmap() : canvas\r\n  },\r\n\r\n  setPath: function(value) {\r\n    this.path = value\r\n    return this\r\n  }\r\n}\r\n","import { FBXLoader } from './FBXLoader.js'\nimport Config from '../../config'\nimport * as THREE from 'three'\n\nexport default class FBX {\n  constructor(app) {\n    this.self = app\n    this.loader = new FBXLoader()\n  }\n  load(path) {\n    return new Promise(res => {\n      this.loader.load(path, obj => {\n        obj.scale.set(Config.obj.globalScale, Config.obj.globalScale, Config.obj.globalScale)\n        this.self.setCastShadowAndReceiveShadow(obj)\n        this.mixer = obj.mixer = new THREE.AnimationMixer(obj)\n        this.mixer.clipAction(obj.animations[0]).play()\n        this.self.scene.add(obj)\n        window.__HMF__[path] = obj\n        window.__HMF__[path].instance = this\n        res(obj)\n      })\n    })\n  }\n  update(time) {\n    this.mixer && this.mixer.update(time)\n  }\n}\n","/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */var mod={}, l=void 0,aa=mod;function r(c,d){var a=c.split(\".\"),b=aa;!(a[0]in b)&&b.execScript&&b.execScript(\"var \"+a[0]);for(var e;a.length&&(e=a.shift());)!a.length&&d!==l?b[e]=d:b=b[e]?b[e]:b[e]={}};var t=\"undefined\"!==typeof Uint8Array&&\"undefined\"!==typeof Uint16Array&&\"undefined\"!==typeof Uint32Array&&\"undefined\"!==typeof DataView;function v(c){var d=c.length,a=0,b=Number.POSITIVE_INFINITY,e,f,g,h,k,m,n,p,s,x;for(p=0;p<d;++p)c[p]>a&&(a=c[p]),c[p]<b&&(b=c[p]);e=1<<a;f=new (t?Uint32Array:Array)(e);g=1;h=0;for(k=2;g<=a;){for(p=0;p<d;++p)if(c[p]===g){m=0;n=h;for(s=0;s<g;++s)m=m<<1|n&1,n>>=1;x=g<<16|p;for(s=m;s<e;s+=k)f[s]=x;++h}++g;h<<=1;k<<=1}return[f,a,b]};function w(c,d){this.g=[];this.h=32768;this.d=this.f=this.a=this.l=0;this.input=t?new Uint8Array(c):c;this.m=!1;this.i=y;this.r=!1;if(d||!(d={}))d.index&&(this.a=d.index),d.bufferSize&&(this.h=d.bufferSize),d.bufferType&&(this.i=d.bufferType),d.resize&&(this.r=d.resize);switch(this.i){case A:this.b=32768;this.c=new (t?Uint8Array:Array)(32768+this.h+258);break;case y:this.b=0;this.c=new (t?Uint8Array:Array)(this.h);this.e=this.z;this.n=this.v;this.j=this.w;break;default:throw Error(\"invalid inflate mode\");\n}}var A=0,y=1,B={t:A,s:y};\nw.prototype.k=function(){for(;!this.m;){var c=C(this,3);c&1&&(this.m=!0);c>>>=1;switch(c){case 0:var d=this.input,a=this.a,b=this.c,e=this.b,f=d.length,g=l,h=l,k=b.length,m=l;this.d=this.f=0;if(a+1>=f)throw Error(\"invalid uncompressed block header: LEN\");g=d[a++]|d[a++]<<8;if(a+1>=f)throw Error(\"invalid uncompressed block header: NLEN\");h=d[a++]|d[a++]<<8;if(g===~h)throw Error(\"invalid uncompressed block header: length verify\");if(a+g>d.length)throw Error(\"input buffer is broken\");switch(this.i){case A:for(;e+\ng>b.length;){m=k-e;g-=m;if(t)b.set(d.subarray(a,a+m),e),e+=m,a+=m;else for(;m--;)b[e++]=d[a++];this.b=e;b=this.e();e=this.b}break;case y:for(;e+g>b.length;)b=this.e({p:2});break;default:throw Error(\"invalid inflate mode\");}if(t)b.set(d.subarray(a,a+g),e),e+=g,a+=g;else for(;g--;)b[e++]=d[a++];this.a=a;this.b=e;this.c=b;break;case 1:this.j(ba,ca);break;case 2:for(var n=C(this,5)+257,p=C(this,5)+1,s=C(this,4)+4,x=new (t?Uint8Array:Array)(D.length),S=l,T=l,U=l,u=l,M=l,F=l,z=l,q=l,V=l,q=0;q<s;++q)x[D[q]]=\nC(this,3);if(!t){q=s;for(s=x.length;q<s;++q)x[D[q]]=0}S=v(x);u=new (t?Uint8Array:Array)(n+p);q=0;for(V=n+p;q<V;)switch(M=E(this,S),M){case 16:for(z=3+C(this,2);z--;)u[q++]=F;break;case 17:for(z=3+C(this,3);z--;)u[q++]=0;F=0;break;case 18:for(z=11+C(this,7);z--;)u[q++]=0;F=0;break;default:F=u[q++]=M}T=t?v(u.subarray(0,n)):v(u.slice(0,n));U=t?v(u.subarray(n)):v(u.slice(n));this.j(T,U);break;default:throw Error(\"unknown BTYPE: \"+c);}}return this.n()};\nvar G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],D=t?new Uint16Array(G):G,H=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],I=t?new Uint16Array(H):H,J=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],K=t?new Uint8Array(J):J,L=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],da=t?new Uint16Array(L):L,ea=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,\n13,13],N=t?new Uint8Array(ea):ea,O=new (t?Uint8Array:Array)(288),P,fa;P=0;for(fa=O.length;P<fa;++P)O[P]=143>=P?8:255>=P?9:279>=P?7:8;var ba=v(O),Q=new (t?Uint8Array:Array)(30),R,ga;R=0;for(ga=Q.length;R<ga;++R)Q[R]=5;var ca=v(Q);function C(c,d){for(var a=c.f,b=c.d,e=c.input,f=c.a,g=e.length,h;b<d;){if(f>=g)throw Error(\"input buffer is broken\");a|=e[f++]<<b;b+=8}h=a&(1<<d)-1;c.f=a>>>d;c.d=b-d;c.a=f;return h}\nfunction E(c,d){for(var a=c.f,b=c.d,e=c.input,f=c.a,g=e.length,h=d[0],k=d[1],m,n;b<k&&!(f>=g);)a|=e[f++]<<b,b+=8;m=h[a&(1<<k)-1];n=m>>>16;if(n>b)throw Error(\"invalid code length: \"+n);c.f=a>>n;c.d=b-n;c.a=f;return m&65535}\nw.prototype.j=function(c,d){var a=this.c,b=this.b;this.o=c;for(var e=a.length-258,f,g,h,k;256!==(f=E(this,c));)if(256>f)b>=e&&(this.b=b,a=this.e(),b=this.b),a[b++]=f;else{g=f-257;k=I[g];0<K[g]&&(k+=C(this,K[g]));f=E(this,d);h=da[f];0<N[f]&&(h+=C(this,N[f]));b>=e&&(this.b=b,a=this.e(),b=this.b);for(;k--;)a[b]=a[b++-h]}for(;8<=this.d;)this.d-=8,this.a--;this.b=b};\nw.prototype.w=function(c,d){var a=this.c,b=this.b;this.o=c;for(var e=a.length,f,g,h,k;256!==(f=E(this,c));)if(256>f)b>=e&&(a=this.e(),e=a.length),a[b++]=f;else{g=f-257;k=I[g];0<K[g]&&(k+=C(this,K[g]));f=E(this,d);h=da[f];0<N[f]&&(h+=C(this,N[f]));b+k>e&&(a=this.e(),e=a.length);for(;k--;)a[b]=a[b++-h]}for(;8<=this.d;)this.d-=8,this.a--;this.b=b};\nw.prototype.e=function(){var c=new (t?Uint8Array:Array)(this.b-32768),d=this.b-32768,a,b,e=this.c;if(t)c.set(e.subarray(32768,c.length));else{a=0;for(b=c.length;a<b;++a)c[a]=e[a+32768]}this.g.push(c);this.l+=c.length;if(t)e.set(e.subarray(d,d+32768));else for(a=0;32768>a;++a)e[a]=e[d+a];this.b=32768;return e};\nw.prototype.z=function(c){var d,a=this.input.length/this.a+1|0,b,e,f,g=this.input,h=this.c;c&&(\"number\"===typeof c.p&&(a=c.p),\"number\"===typeof c.u&&(a+=c.u));2>a?(b=(g.length-this.a)/this.o[2],f=258*(b/2)|0,e=f<h.length?h.length+f:h.length<<1):e=h.length*a;t?(d=new Uint8Array(e),d.set(h)):d=h;return this.c=d};\nw.prototype.n=function(){var c=0,d=this.c,a=this.g,b,e=new (t?Uint8Array:Array)(this.l+(this.b-32768)),f,g,h,k;if(0===a.length)return t?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);f=0;for(g=a.length;f<g;++f){b=a[f];h=0;for(k=b.length;h<k;++h)e[c++]=b[h]}f=32768;for(g=this.b;f<g;++f)e[c++]=d[f];this.g=[];return this.buffer=e};\nw.prototype.v=function(){var c,d=this.b;t?this.r?(c=new Uint8Array(d),c.set(this.c.subarray(0,d))):c=this.c.subarray(0,d):(this.c.length>d&&(this.c.length=d),c=this.c);return this.buffer=c};function W(c,d){var a,b;this.input=c;this.a=0;if(d||!(d={}))d.index&&(this.a=d.index),d.verify&&(this.A=d.verify);a=c[this.a++];b=c[this.a++];switch(a&15){case ha:this.method=ha;break;default:throw Error(\"unsupported compression method\");}if(0!==((a<<8)+b)%31)throw Error(\"invalid fcheck flag:\"+((a<<8)+b)%31);if(b&32)throw Error(\"fdict flag is not supported\");this.q=new w(c,{index:this.a,bufferSize:d.bufferSize,bufferType:d.bufferType,resize:d.resize})}\nW.prototype.k=function(){var c=this.input,d,a;d=this.q.k();this.a=this.q.a;if(this.A){a=(c[this.a++]<<24|c[this.a++]<<16|c[this.a++]<<8|c[this.a++])>>>0;var b=d;if(\"string\"===typeof b){var e=b.split(\"\"),f,g;f=0;for(g=e.length;f<g;f++)e[f]=(e[f].charCodeAt(0)&255)>>>0;b=e}for(var h=1,k=0,m=b.length,n,p=0;0<m;){n=1024<m?1024:m;m-=n;do h+=b[p++],k+=h;while(--n);h%=65521;k%=65521}if(a!==(k<<16|h)>>>0)throw Error(\"invalid adler-32 checksum\");}return d};var ha=8;r(\"Zlib.Inflate\",W);r(\"Zlib.Inflate.prototype.decompress\",W.prototype.k);var X={ADAPTIVE:B.s,BLOCK:B.t},Y,Z,$,ia;if(Object.keys)Y=Object.keys(X);else for(Z in Y=[],$=0,X)Y[$++]=Z;$=0;for(ia=Y.length;$<ia;++$)Z=Y[$],r(\"Zlib.Inflate.BufferType.\"+Z,X[Z]);\nvar Zlib=mod.Zlib;\nexport { Zlib }","import { MTLLoader, OBJLoader } from 'three-obj-mtl-loader'\nimport Config from '../../config'\n\nexport default class OBJ {\n  constructor(app) {\n    this.self = app\n    this.objLoader = new OBJLoader() //obj\n    this.mtlLoader = new MTLLoader() //\n  }\n  load(path, scale, level) {\n    this.mtlLoader.setTexturePath(path.substring(0, path.lastIndexOf('/') + 1))\n    return new Promise(res => {\n      this.mtlLoader.load(`${path}.mtl`, materials => {\n        this.objLoader.setMaterials(materials)\n        this.objLoader.load(\n          `${path}.obj`,\n          obj => {\n            this.self.scene.add(obj)\n            obj.scale.set(\n              scale || Config.obj.globalScale,\n              scale || Config.obj.globalScale,\n              scale || Config.obj.globalScale\n            )\n            obj.userData.level = level\n            this.self.setCastShadowAndReceiveShadow(obj)\n            window.__HMF__[path] = obj\n            res(obj)\n          },\n          xhr => {\n            if (xhr.lengthComputable) {\n              var percentComplete = (xhr.loaded / xhr.total) * 100\n              this.self.container.querySelector('#loading').innerHTML = `Loading ${percentComplete.toFixed(1)}`\n            }\n          }\n        )\n      })\n    })\n  }\n}\n","/**\n * @author aleeper / http://adamleeper.com/\n * @author mrdoob / http://mrdoob.com/\n * @author gero3 / https://github.com/gero3\n * @author Mugen87 / https://github.com/Mugen87\n *\n * Description: A THREE loader for STL ASCII files, as created by Solidworks and other CAD programs.\n *\n * Supports both binary and ASCII encoded files, with automatic detection of type.\n *\n * The loader returns a non-indexed buffer geometry.\n *\n * Limitations:\n *  Binary decoding supports \"Magics\" color format (http://en.wikipedia.org/wiki/STL_(file_format)#Color_in_binary_STL).\n *  There is perhaps some question as to how valid it is to always assume little-endian-ness.\n *  ASCII decoding assumes file is UTF-8.\n *\n * Usage:\n *  var loader = new STLLoader();\n *  loader.load( './models/stl/slotted_disk.stl', function ( geometry ) {\n *    scene.add( new THREE.Mesh( geometry ) );\n *  });\n *\n * For binary STLs geometry might contain colors for vertices. To use it:\n *  // use the same code to load STL as above\n *  if (geometry.hasColors) {\n *    material = new THREE.MeshPhongMaterial({ opacity: geometry.alpha, vertexColors: THREE.VertexColors });\n *  } else { .... }\n *  var mesh = new THREE.Mesh( geometry, material );\n */\n\nimport {\n  BufferAttribute,\n  BufferGeometry,\n  DefaultLoadingManager,\n  FileLoader,\n  Float32BufferAttribute,\n  LoaderUtils,\n  Vector3\n} from 'three'\n\nvar STLLoader = function(manager) {\n  this.manager = manager !== undefined ? manager : DefaultLoadingManager\n}\n\nSTLLoader.prototype = {\n  constructor: STLLoader,\n\n  load: function(url, onLoad, onProgress, onError) {\n    var scope = this\n\n    var loader = new FileLoader(scope.manager)\n    loader.setPath(scope.path)\n    loader.setResponseType('arraybuffer')\n    loader.load(\n      url,\n      function(text) {\n        try {\n          onLoad(scope.parse(text))\n        } catch (exception) {\n          if (onError) {\n            onError(exception)\n          }\n        }\n      },\n      onProgress,\n      onError\n    )\n  },\n\n  setPath: function(value) {\n    this.path = value\n    return this\n  },\n\n  parse: function(data) {\n    function isBinary(data) {\n      var expect, face_size, n_faces, reader\n      reader = new DataView(data)\n      face_size = (32 / 8) * 3 + (32 / 8) * 3 * 3 + 16 / 8\n      n_faces = reader.getUint32(80, true)\n      expect = 80 + 32 / 8 + n_faces * face_size\n\n      if (expect === reader.byteLength) {\n        return true\n      }\n\n      // An ASCII STL data must begin with 'solid ' as the first six bytes.\n      // However, ASCII STLs lacking the SPACE after the 'd' are known to be\n      // plentiful.  So, check the first 5 bytes for 'solid'.\n\n      // Several encodings, such as UTF-8, precede the text with up to 5 bytes:\n      // https://en.wikipedia.org/wiki/Byte_order_mark#Byte_order_marks_by_encoding\n      // Search for \"solid\" to start anywhere after those prefixes.\n\n      // US-ASCII ordinal values for 's', 'o', 'l', 'i', 'd'\n\n      var solid = [115, 111, 108, 105, 100]\n\n      for (var off = 0; off < 5; off++) {\n        // If \"solid\" text is matched to the current offset, declare it to be an ASCII STL.\n\n        if (matchDataViewAt(solid, reader, off)) return false\n      }\n\n      // Couldn't find \"solid\" text at the beginning; it is binary STL.\n\n      return true\n    }\n\n    function matchDataViewAt(query, reader, offset) {\n      // Check if each byte in query matches the corresponding byte from the current offset\n\n      for (var i = 0, il = query.length; i < il; i++) {\n        if (query[i] !== reader.getUint8(offset + i, false)) return false\n      }\n\n      return true\n    }\n\n    function parseBinary(data) {\n      var reader = new DataView(data)\n      var faces = reader.getUint32(80, true)\n\n      var r,\n        g,\n        b,\n        hasColors = false,\n        colors\n      var defaultR, defaultG, defaultB, alpha\n\n      // process STL header\n      // check for default color in header (\"COLOR=rgba\" sequence).\n\n      for (var index = 0; index < 80 - 10; index++) {\n        if (\n          reader.getUint32(index, false) == 0x434f4c4f /*COLO*/ &&\n          reader.getUint8(index + 4) == 0x52 /*'R'*/ &&\n          reader.getUint8(index + 5) == 0x3d /*'='*/\n        ) {\n          hasColors = true\n          colors = []\n\n          defaultR = reader.getUint8(index + 6) / 255\n          defaultG = reader.getUint8(index + 7) / 255\n          defaultB = reader.getUint8(index + 8) / 255\n          alpha = reader.getUint8(index + 9) / 255\n        }\n      }\n\n      var dataOffset = 84\n      var faceLength = 12 * 4 + 2\n\n      var geometry = new BufferGeometry()\n\n      var vertices = []\n      var normals = []\n\n      for (var face = 0; face < faces; face++) {\n        var start = dataOffset + face * faceLength\n        var normalX = reader.getFloat32(start, true)\n        var normalY = reader.getFloat32(start + 4, true)\n        var normalZ = reader.getFloat32(start + 8, true)\n\n        if (hasColors) {\n          var packedColor = reader.getUint16(start + 48, true)\n\n          if ((packedColor & 0x8000) === 0) {\n            // facet has its own unique color\n\n            r = (packedColor & 0x1f) / 31\n            g = ((packedColor >> 5) & 0x1f) / 31\n            b = ((packedColor >> 10) & 0x1f) / 31\n          } else {\n            r = defaultR\n            g = defaultG\n            b = defaultB\n          }\n        }\n\n        for (var i = 1; i <= 3; i++) {\n          var vertexstart = start + i * 12\n\n          vertices.push(reader.getFloat32(vertexstart, true))\n          vertices.push(reader.getFloat32(vertexstart + 4, true))\n          vertices.push(reader.getFloat32(vertexstart + 8, true))\n\n          normals.push(normalX, normalY, normalZ)\n\n          if (hasColors) {\n            colors.push(r, g, b)\n          }\n        }\n      }\n\n      geometry.addAttribute('position', new BufferAttribute(new Float32Array(vertices), 3))\n      geometry.addAttribute('normal', new BufferAttribute(new Float32Array(normals), 3))\n\n      if (hasColors) {\n        geometry.addAttribute('color', new BufferAttribute(new Float32Array(colors), 3))\n        geometry.hasColors = true\n        geometry.alpha = alpha\n      }\n\n      return geometry\n    }\n\n    function parseASCII(data) {\n      var geometry = new BufferGeometry()\n      var patternFace = /facet([\\s\\S]*?)endfacet/g\n      var faceCounter = 0\n\n      var patternFloat = /[\\s]+([+-]?(?:\\d*)(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)/.source\n      var patternVertex = new RegExp('vertex' + patternFloat + patternFloat + patternFloat, 'g')\n      var patternNormal = new RegExp('normal' + patternFloat + patternFloat + patternFloat, 'g')\n\n      var vertices = []\n      var normals = []\n\n      var normal = new Vector3()\n\n      var result\n\n      while ((result = patternFace.exec(data)) !== null) {\n        var vertexCountPerFace = 0\n        var normalCountPerFace = 0\n\n        var text = result[0]\n\n        while ((result = patternNormal.exec(text)) !== null) {\n          normal.x = parseFloat(result[1])\n          normal.y = parseFloat(result[2])\n          normal.z = parseFloat(result[3])\n          normalCountPerFace++\n        }\n\n        while ((result = patternVertex.exec(text)) !== null) {\n          vertices.push(parseFloat(result[1]), parseFloat(result[2]), parseFloat(result[3]))\n          normals.push(normal.x, normal.y, normal.z)\n          vertexCountPerFace++\n        }\n\n        // every face have to own ONE valid normal\n\n        if (normalCountPerFace !== 1) {\n          console.error(\"THREE.STLLoader: Something isn't right with the normal of face number \" + faceCounter)\n        }\n\n        // each face have to own THREE valid vertices\n\n        if (vertexCountPerFace !== 3) {\n          console.error(\"THREE.STLLoader: Something isn't right with the vertices of face number \" + faceCounter)\n        }\n\n        faceCounter++\n      }\n\n      geometry.addAttribute('position', new Float32BufferAttribute(vertices, 3))\n      geometry.addAttribute('normal', new Float32BufferAttribute(normals, 3))\n\n      return geometry\n    }\n\n    function ensureString(buffer) {\n      if (typeof buffer !== 'string') {\n        return LoaderUtils.decodeText(new Uint8Array(buffer))\n      }\n\n      return buffer\n    }\n\n    function ensureBinary(buffer) {\n      if (typeof buffer === 'string') {\n        var array_buffer = new Uint8Array(buffer.length)\n        for (var i = 0; i < buffer.length; i++) {\n          array_buffer[i] = buffer.charCodeAt(i) & 0xff // implicitly assumes little-endian\n        }\n        return array_buffer.buffer || array_buffer\n      } else {\n        return buffer\n      }\n    }\n\n    // start\n\n    var binData = ensureBinary(data)\n\n    return isBinary(binData) ? parseBinary(binData) : parseASCII(ensureString(data))\n  }\n}\n\nexport { STLLoader }\n","import { STLLoader } from './STLLoader.js'\nimport Config from '../../config.js'\nimport * as THREE from 'three'\n\nexport default class STL {\n  constructor(app) {\n    this.self = app\n    this.loader = new STLLoader()\n  }\n  load(path) {\n    return new Promise(res => {\n      this.loader.load(path, obj => {\n        var material = new THREE.MeshPhongMaterial({\n          color: 0xff5533,\n          specular: 0x111111,\n          shininess: 200\n        })\n        var mesh = new THREE.Mesh(obj, material)\n\n        mesh.position.set(0, 0, 0)\n        mesh.rotation.set(-Math.PI / 2, 0, 0)\n        mesh.scale.set(Config.obj.globalScale, Config.obj.globalScale, Config.obj.globalScale)\n        this.self.setCastShadowAndReceiveShadow(obj)\n        mesh.castShadow = true\n        mesh.receiveShadow = true\n        this.self.scene.add(mesh)\n        res(mesh)\n      })\n    })\n  }\n}\n","import BaseThree from './core/BaseThree'\nimport Detector from './utils/detector'\nimport { throttle } from 'throttle-debounce'\n// \nimport Config from './config'\n\nclass Main extends BaseThree {\n  constructor(container) {\n    super(container)\n    this.initEvent()\n    this.loadAllObjs()\n    this.timer = null // \n  }\n\n  showObjInfo(event) {\n    const targetObj = this.getFirstIntersectObj(event)\n    if (\n      targetObj &&\n      (this.canShowInfoPanel(targetObj.object.name) || this.canShowInfoPanel(targetObj.object.parent.name))\n    ) {\n      if (this.timer) {\n        return\n      } else {\n        this.timer = setTimeout(() => {\n          layer.open({\n            content: `${targetObj.object.parent.name || targetObj.object.name}`,\n            title: '',\n            offset: 'rt',\n            // offset: position,\n            // time: 1000, // \n            anim: 1, // \n            // isOutAnim: false, // \n            shade: 0, // \n            end: () => (this.timer = null)\n          })\n        }, 200)\n      }\n    }\n  }\n\n  enterObj(event) {\n    clearTimeout(this.timer)\n    this.timer = null\n    const targetObj = this.getFirstIntersectObj(event)\n    const targetObjName = targetObj && targetObj.object.parent.userData.childName\n    if (targetObj && this.canLoadChild(targetObjName)) {\n      this.hideOrShowAllObj(false)\n      // \n      if (window.__HMF__[targetObjName]) {\n        window.__HMF__[targetObjName].visible = true\n        const parentRoute = this.router.getLastChild()\n        if (parentRoute) {\n          this.router.push({\n            current: Config.obj[targetObjName].level,\n            parent: parentRoute.current\n          })\n        }\n      } else {\n        // \n        this.togglerLoading({\n          show: true\n        })\n        this.loadObj(Config.obj[targetObjName]).then(obj => {\n          this.togglerLoading()\n          obj.userData.childName = Config.obj[targetObjName].childName\n          obj.userData.level = Config.obj[targetObjName].level\n          this.modifyEnviroment({\n            cameraPosition: [150, 150, 500],\n            ambientLightColor: 0xe6e6e6\n          })\n          const parentRoute = this.router.getLastChild()\n          if (parentRoute) {\n            this.router.push({\n              current: Config.obj[targetObjName].level,\n              parent: parentRoute.current\n            })\n          }\n        })\n      }\n    }\n  }\n\n  initEvent() {\n    window.addEventListener('dblclick', this.enterObj.bind(this), false) // \n    window.addEventListener('click', this.showObjInfo.bind(this), false) // \n    window.addEventListener(\n      'mouseup',\n      event => {\n        if (event.which === 2) {\n          // ,\n          const popRoute = this.router.pop()\n          popRoute && this.showObjByLevel(popRoute.parent)\n          popRoute.parent === 'one' &&\n            this.modifyEnviroment({\n              reset: true\n            })\n        }\n      },\n      false\n    )\n  }\n\n  loadAllObjs() {\n    // 1 - building()\n    this.loadObj(Config.obj.group_build_out_1).then(obj => {\n      obj.position.set(-138, -400, 148.5)\n      const position = [-138, 0, 148.5]\n      this.positionAnimate(obj, position, 0)\n      obj.name = `building_1`\n      obj.userData.childName = Config.obj.group_build_out_1.childName\n\n      // \n      for (let index = 1; index < 4; index++) {\n        const cloneObj = obj.clone()\n        cloneObj.name = `building_${index + 1}`\n        cloneObj.position.set(-138 + index * 40, -400, 148.5)\n        const position = [-138 + index * 40, 0, 148.5]\n        this.positionAnimate(cloneObj, position, index)\n        this.scene.add(cloneObj)\n      }\n      for (let index = 4; index < 9; index++) {\n        const cloneObj = obj.clone()\n        cloneObj.name = `building_${index + 1}`\n        cloneObj.position.set(-218 + (index - 3) * 40, 0, 108.5)\n\n        cloneObj.position.set(-218 + (index - 3) * 40, -400, 108.5)\n        const position = [-218 + (index - 3) * 40, 0, 108.5]\n        this.positionAnimate(cloneObj, position, index)\n        this.scene.add(cloneObj)\n      }\n\n      // \n      for (let index = 9; index < 14; index++) {\n        const cloneObj = obj.clone()\n        cloneObj.name = `building_${index + 1}`\n        cloneObj.position.set((index - 9) * 42, -400, 0)\n        const position = [(index - 9) * 42, 0, 0]\n        this.positionAnimate(cloneObj, position, index)\n        this.scene.add(cloneObj)\n      }\n      for (let index = 14; index < 18; index++) {\n        const cloneObj = obj.clone()\n        cloneObj.name = `building_${index + 1}`\n        cloneObj.position.set((index - 14) * 42, -400, -55)\n        const position = [(index - 14) * 42, 0, -55]\n        this.positionAnimate(cloneObj, position, index)\n        this.scene.add(cloneObj)\n      }\n      for (let index = 18; index < 21; index++) {\n        const cloneObj = obj.clone()\n        cloneObj.name = `building_${index + 1}`\n\n        cloneObj.position.set((index - 18) * 42 + 42, -400, -110)\n        const position = [(index - 18) * 42 + 42, 0, -110]\n        this.positionAnimate(cloneObj, position, index)\n        this.scene.add(cloneObj)\n      }\n      for (let index = 21; index < 27; index++) {\n        const cloneObj = obj.clone()\n        cloneObj.name = `building_${index + 1}`\n        cloneObj.position.set((index - 21) * 31 - 30, -400, -156)\n        const position = [(index - 21) * 31 - 30, 0, -156]\n        this.positionAnimate(cloneObj, position, index)\n        this.scene.add(cloneObj)\n      }\n    })\n    // 2\n    this.loadObj(Config.obj.group_road_1).then(obj => {\n      this.showMessage()\n      this.togglerLoading()\n\n      Config.isDev && this.initGUI(obj)\n      this.setCastShadowAndReceiveShadow(obj)\n    })\n    // 3 - vally()\n    this.loadObj(Config.obj.group_villa_1).then(obj => {\n      obj.name = 'villa_1'\n      obj.position.set(87, 1400, 105)\n      const position = [87, 0, 105]\n      this.positionAnimate(obj, position, 0)\n      // \n      for (let index = 1; index < 3; index++) {\n        const cloneObj = obj.clone()\n        cloneObj.name = `villa_${index + 1}`\n        obj.position.set(85 + index * 30, 1400, 105)\n        const position = [85 + index * 30, 0, 105]\n        this.positionAnimate(cloneObj, position, index)\n        this.scene.add(cloneObj)\n      }\n      for (let index = 3; index < 5; index++) {\n        const cloneObj = obj.clone()\n        cloneObj.name = `villa_${index + 1}`\n        cloneObj.rotation.set(0, -Math.PI / 2, 0)\n        obj.position.set(104.5 + (index - 3) * 35.5, 1400, 70)\n        const position = [104.5 + (index - 3) * 35.5, 0, 70]\n        this.positionAnimate(cloneObj, position, index)\n        this.scene.add(cloneObj)\n      }\n    })\n    // 4\n    this.loadObj(Config.obj.group_shop_1).then(obj => {\n      obj.scale.set(100, 100, 100)\n      const scale = [Config.obj.globalScale, Config.obj.globalScale, Config.obj.globalScale]\n      this.scaleAnimate(obj, scale, 1)\n    })\n    // 5\n    this.loadObj(Config.obj.group_parking_1).then(obj => {\n      obj.position.set(181.5, 0, -161)\n    })\n    // 6-,\"\n    this.loadFbx(Config.obj.group_barrier_gate_fbx).then(obj => {\n      obj.name = ''\n      obj.children[1].name = 'barrier_gate_out_1'\n      obj.children[4].name = 'barrier_gate_in_1'\n      obj.position.set(24, 5, 188)\n    })\n    // 7-\n    this.loadObj(Config.obj.group_barrier_gate_obj).then(obj => {\n      // \n      obj.children[3].name = 'barrier_gate_out_2'\n      obj.children[4].name = 'barrier_gate_in_2'\n\n      obj.position.set(216, 0, -40)\n      obj.rotation.set(0, Math.PI / 2, 0)\n      // \n      const cloneObj = obj.clone()\n      cloneObj.children[3].name = 'barrier_gate_out_3'\n      cloneObj.children[4].name = 'barrier_gate_in_3'\n      cloneObj.position.set(-60, 0, -120)\n      cloneObj.rotation.set(0, -Math.PI / 2, 0)\n      this.scene.add(cloneObj)\n      // \n      const cloneObj2 = obj.clone()\n      cloneObj2.children[3].name = 'barrier_gate_out_5'\n      cloneObj2.children[4].name = 'barrier_gate_in_5'\n      cloneObj2.position.set(-208, 0, 66)\n      cloneObj2.scale.set(0.22, 0.22, 0.22)\n      cloneObj2.rotation.set(0, -Math.PI / 2, 0)\n      this.scene.add(cloneObj2)\n    })\n    // 8\n    this.loadObj(Config.obj.group_charging_pile_1).then(obj => {\n      obj.position.set(192, 0, -80)\n      for (let index = 1; index < 19; index++) {\n        const cloneObj = obj.clone()\n        cloneObj.name = `charging_pile_${index + 1}`\n        cloneObj.position.set(192, 0, -80 - index * 3)\n        this.scene.add(cloneObj)\n      }\n    })\n    // 9\n    this.loadObj(Config.obj.water_obj).then(obj => {\n      obj.position.set(-160, 0, 10)\n    })\n  }\n}\n\nfunction init() {\n  if (!Detector.webgl) {\n    alert(' WebGL, Chrome ')\n  } else {\n    window.devicePixelRatio && (Config.dpr = window.devicePixelRatio)\n    new Main(document.getElementById('appContainer'))\n  }\n}\n\ninit()\n","import Config from '../config'\n\n// Manages all dat.GUI interactions\nexport default class DatGUI {\n  constructor(main, mesh) {\n    const gui = new dat.GUI()\n\n    this.camera = main.camera.threeCamera\n    this.controls = main.threeControls\n    this.light = main.light\n\n    const build = main.scene.getObjectByName('building_1')\n    mesh = build\n\n    /* Camera */\n    const cameraFolder = gui.addFolder('Camera')\n    const cameraFOVGui = cameraFolder.add(Config.camera, 'fov', 0, 180).name('Camera FOV')\n    cameraFOVGui.onChange(value => {\n      this.controls.enableRotate = false\n      this.camera.fov = value\n    })\n    cameraFOVGui.onFinishChange(() => {\n      this.camera.updateProjectionMatrix()\n      this.controls.enableRotate = true\n    })\n    const cameraAspectGui = cameraFolder.add(Config.camera, 'aspect', 0, 4).name('Camera Aspect')\n    cameraAspectGui.onChange(value => {\n      this.controls.enableRotate = false\n\n      this.camera.aspect = value\n    })\n    cameraAspectGui.onFinishChange(() => {\n      this.camera.updateProjectionMatrix()\n\n      this.controls.enableRotate = true\n    })\n    const cameraFogColorGui = cameraFolder.addColor(Config.fog, 'color').name('Fog Color')\n    cameraFogColorGui.onChange(value => {\n      main.scene.fog.color.setHex(value)\n    })\n    const cameraFogNearGui = cameraFolder.add(Config.fog, 'near', 0.0, 0.01).name('Fog Near')\n    cameraFogNearGui.onChange(value => {\n      this.controls.enableRotate = false\n      main.scene.fog.density = value\n    })\n    cameraFogNearGui.onFinishChange(() => {\n      this.controls.enableRotate = true\n    })\n\n    /* Controls */\n    const controlsFolder = gui.addFolder('Controls')\n    controlsFolder\n      .add(Config.controls, 'autoRotate')\n      .name('Auto Rotate')\n      .onChange(value => {\n        this.controls.autoRotate = value\n      })\n    const controlsAutoRotateSpeedGui = controlsFolder\n      .add(Config.controls, 'autoRotateSpeed', -1, 1)\n      .name('Rotation Speed')\n    controlsAutoRotateSpeedGui.onChange(value => {\n      this.controls.enableRotate = false\n      this.controls.autoRotateSpeed = value\n    })\n    controlsAutoRotateSpeedGui.onFinishChange(() => {\n      this.controls.enableRotate = true\n    })\n    /* Lights */\n    // Ambient Light\n    const ambientLightFolder = gui.addFolder('Ambient Light')\n    ambientLightFolder\n      .add(Config.ambientLight, 'enabled')\n      .name('Enabled')\n      .onChange(value => {\n        this.light.ambientLight.visible = value\n      })\n    ambientLightFolder\n      .addColor(Config.ambientLight, 'color')\n      .name('Color')\n      .onChange(value => {\n        this.light.ambientLight.color.setHex(value)\n      })\n\n    const spotLightFolder = gui.addFolder('Spot Light')\n    spotLightFolder\n      .add(Config.spotLight, 'enabled')\n      .name('Enabled')\n      .onChange(value => {\n        this.light.spotLight.visible = value\n      })\n    spotLightFolder\n      .addColor(Config.spotLight, 'color')\n      .name('Color')\n      .onChange(value => {\n        this.light.spotLight.color.setHex(value)\n      })\n    spotLightFolder\n      .add(Config.spotLight, 'distance')\n      .name('distance')\n      .onChange(value => {\n        this.light.spotLight.distance = value\n      })\n\n    spotLightFolder\n      .add(Config.spotLight, 'angle', 0, 180)\n      .name('angle')\n      .onChange(value => {\n        this.light.spotLight.angle = value\n      })\n    spotLightFolder\n      .add(Config.spotLight.position, 'x', -400, 400)\n      .name('position.x')\n      .onChange(value => {\n        this.light.spotLight.position.x = value\n      })\n    spotLightFolder\n      .add(Config.spotLight.position, 'y', -400, 400)\n      .name('position.y')\n      .onChange(value => {\n        this.light.spotLight.position.y = value\n      })\n    spotLightFolder\n      .add(Config.spotLight.position, 'z', -400, 400)\n      .name('position.z')\n      .onChange(value => {\n        this.light.spotLight.position.z = value\n      })\n    spotLightFolder\n      .add(Config.spotLight, 'helperEnabled')\n      .name('helperEnabled')\n      .onChange(value => {\n        this.light.spotLightHelper.visible = true\n      })\n  }\n}\n","/**\n * @author alteredq / http://alteredqualia.com/\n * @author mr.doob / http://mrdoob.com/\n */\n\nexport default {\n  webgl: (function() {\n    try {\n      var canvas = document.createElement('canvas')\n\n      return !!(window.WebGLRenderingContext && (canvas.getContext('webgl') || canvas.getContext('experimental-webgl')))\n    } catch (e) {\n      return false\n    }\n  })()\n}\n"],"sourceRoot":""}